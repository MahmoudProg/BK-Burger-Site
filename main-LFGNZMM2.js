import{a as et,b as Et,c as Yl,d as m,e as m0,f as Ia,g as _0,h as y0,i as x0,j as Zl,k as v0,l as Co,m as Xl,n as ba,o as w0,p as E0,q as Jl,r as ge,s as xr,t as Zt,u as Ca,v as Do,w as I0,x as b0,y as Gn,z as lt}from"./chunk-6JORYTGP.js";var C0=null;var ed=1,D0=Symbol("SIGNAL");function Ve(t){let e=C0;return C0=t,e}var T0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function DC(t){if(!(rd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ed)){if(!t.producerMustRecompute(t)&&!td(t)){t.dirty=!1,t.lastCleanEpoch=ed;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ed}}function A0(t){return t&&(t.nextProducerIndex=0),Ve(t)}function S0(t,e){if(Ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(rd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)nd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function td(t){Da(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(DC(n),r!==n.version))return!0}return!1}function M0(t){if(Da(t),rd(t))for(let e=0;e<t.producerNode.length;e++)nd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function nd(t,e){if(TC(t),Da(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)nd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Da(i),i.producerIndexOfThis[r]=e}}function rd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Da(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function TC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function AC(){throw new Error}var SC=AC;function P0(t){SC=t}function G(t){return typeof t=="function"}function fi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ta=fi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var He=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(o){e=o instanceof Ta?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{N0(o)}catch(s){e=e??[],s instanceof Ta?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ta(e)}}add(e){var n;if(e&&e!==this)if(this.closed)N0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vr(n,e)}remove(e){let{_finalizers:n}=this;n&&vr(n,e),e instanceof t&&e._removeParent(this)}};He.EMPTY=(()=>{let t=new He;return t.closed=!0,t})();var id=He.EMPTY;function Aa(t){return t instanceof He||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function N0(t){G(t)?t():t.unsubscribe()}var Nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pi={setTimeout(t,e,...n){let{delegate:r}=pi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=pi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Sa(t){pi.setTimeout(()=>{let{onUnhandledError:e}=Nt;if(e)e(t);else throw t})}function od(){}var O0=sd("C",void 0,void 0);function R0(t){return sd("E",void 0,t)}function k0(t){return sd("N",t,void 0)}function sd(t,e,n){return{kind:t,value:e,error:n}}var wr=null;function gi(t){if(Nt.useDeprecatedSynchronousErrorHandling){let e=!wr;if(e&&(wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wr;if(wr=null,n)throw r}}else t()}function F0(t){Nt.useDeprecatedSynchronousErrorHandling&&wr&&(wr.errorThrown=!0,wr.error=t)}var Er=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Aa(e)&&e.add(this)):this.destination=NC}static create(e,n,r){return new Cn(e,n,r)}next(e){this.isStopped?cd(k0(e),this):this._next(e)}error(e){this.isStopped?cd(R0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cd(O0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MC=Function.prototype.bind;function ad(t,e){return MC.call(t,e)}var ud=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ma(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ma(r)}else Ma(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ma(n)}}},Cn=class extends Er{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Nt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ad(e.next,o),error:e.error&&ad(e.error,o),complete:e.complete&&ad(e.complete,o)}):i=e}this.destination=new ud(i)}};function Ma(t){Nt.useDeprecatedSynchronousErrorHandling?F0(t):Sa(t)}function PC(t){throw t}function cd(t,e){let{onStoppedNotification:n}=Nt;n&&pi.setTimeout(()=>n(t,e))}var NC={closed:!0,next:od,error:PC,complete:od};var mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(t){return t}function V0(t){return t.length===0?Xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=RC(n)?n:new Cn(n,r,i);return gi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=L0(r),new r((i,o)=>{let s=new Cn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mi](){return this}pipe(...n){return V0(n)(this)}toPromise(n){return n=L0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function L0(t){var e;return(e=t??Nt.Promise)!==null&&e!==void 0?e:Promise}function OC(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function RC(t){return t&&t instanceof Er||OC(t)&&Aa(t)}function kC(t){return G(t?.lift)}function X(t){return e=>{if(kC(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new ld(t,e,n,r,i)}var ld=class extends Er{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var j0=fi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var It=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new j0}next(n){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?id:(this.currentObservers=null,o.push(n),new He(()=>{this.currentObservers=null,vr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new Pa(e,n),t})(),Pa=class extends It{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:id}};var To=class extends It{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ao={now(){return(Ao.delegate||Date).now()},delegate:void 0};var Na=class extends It{constructor(e=1/0,n=1/0,r=Ao){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Oa=class extends He{constructor(e,n){super()}schedule(e,n=0){return this}};var So={setInterval(t,e,...n){let{delegate:r}=So;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=So;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _i=class extends Oa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return So.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&So.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var yi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};yi.now=Ao.now;var xi=class extends yi{constructor(e,n=yi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Mo=new xi(_i);var Ra=class extends _i{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ka=class extends xi{};var dd=new ka(Ra);var Fa=new ue(t=>t.complete());function B0(t){return t&&G(t.schedule)}function U0(t){return t[t.length-1]}function qn(t){return B0(U0(t))?t.pop():void 0}function $0(t,e){return typeof U0(t)=="number"?t.pop():e}var Va=t=>t&&typeof t.length=="number"&&typeof t!="function";function La(t){return G(t?.then)}function ja(t){return G(t[mi])}function Ba(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function Ua(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $a=FC();function Ha(t){return G(t?.[$a])}function Ga(t){return _0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ia(n.read());if(i)return yield Ia(void 0);yield yield Ia(r)}}finally{n.releaseLock()}})}function qa(t){return G(t?.getReader)}function Le(t){if(t instanceof ue)return t;if(t!=null){if(ja(t))return VC(t);if(Va(t))return LC(t);if(La(t))return jC(t);if(Ba(t))return H0(t);if(Ha(t))return BC(t);if(qa(t))return UC(t)}throw Ua(t)}function VC(t){return new ue(e=>{let n=t[mi]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LC(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function jC(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Sa)})}function BC(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function H0(t){return new ue(e=>{$C(t,e).catch(n=>e.error(n))})}function UC(t){return H0(Ga(t))}function $C(t,e){var n,r,i,o;return m0(this,void 0,void 0,function*(){try{for(n=y0(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function bt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ct(t,e=0){return X((n,r)=>{n.subscribe(ae(r,i=>bt(r,t,()=>r.next(i),e),()=>bt(r,t,()=>r.complete(),e),i=>bt(r,t,()=>r.error(i),e)))})}function Ot(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function G0(t,e){return Le(t).pipe(Ot(e),Ct(e))}function q0(t,e){return Le(t).pipe(Ot(e),Ct(e))}function z0(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function W0(t,e){return new ue(n=>{let r;return bt(n,e,()=>{r=t[$a](),bt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function za(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{bt(n,e,()=>{let r=t[Symbol.asyncIterator]();bt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function K0(t,e){return za(Ga(t),e)}function Q0(t,e){if(t!=null){if(ja(t))return G0(t,e);if(Va(t))return z0(t,e);if(La(t))return q0(t,e);if(Ba(t))return za(t,e);if(Ha(t))return W0(t,e);if(qa(t))return K0(t,e)}throw Ua(t)}function tt(t,e){return e?Q0(t,e):Le(t)}function Dn(...t){let e=qn(t);return tt(t,e)}var Wa=fi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(t,e){return X((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}function Y0(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?y(_):c.push(_),y=_=>{o&&e.next(_),u++;let x=!1;Le(n(_,l++)).subscribe(ae(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){let I=c.shift();s?bt(e,s,()=>y(I)):y(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(ae(e,f,()=>{d=!0,h()})),()=>{a?.()}}function hd(t,e,n=1/0){return G(e)?hd((r,i)=>Ie((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),X((r,i)=>Y0(r,i,t,n)))}function Ka(t=1/0){return hd(Xt,t)}function Z0(){return Ka(1)}function fd(...t){return Z0()(tt(t,qn(t)))}function pd(...t){let e=qn(t),n=$0(t,1/0),r=t;return r.length?r.length===1?Le(r[0]):Ka(n)(tt(r,e)):Fa}function zn(t,e){return X((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function X0(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(ae(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function J0(t){return X((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function e_(t){return t<=0?()=>Fa:X((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gd(t,e=Xt){return t=t??HC,X((n,r)=>{let i,o=!0;n.subscribe(ae(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function HC(t,e){return t===e}function t_(t=GC){return X((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function GC(){return new Wa}function Qa(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zn((i,o)=>t(i,o,r)):Xt,e_(1),n?J0(e):t_(()=>new Wa))}function Po(){return X((t,e)=>{let n,r=!1;t.subscribe(ae(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function No(t,e){return X(X0(t,e,arguments.length>=2,!0))}function n_(t={}){let{connector:e=()=>new It,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},y=()=>{let _=s;f(),_?.unsubscribe()};return X((_,x)=>{u++,!d&&!l&&h();let I=c=c??e();x.add(()=>{u--,u===0&&!d&&!l&&(a=md(y,i))}),I.subscribe(x),!s&&u>0&&(s=new Cn({next:M=>I.next(M),error:M=>{d=!0,h(),a=md(f,n,M),I.error(M)},complete:()=>{l=!0,h(),a=md(f,r),I.complete()}}),Le(_).subscribe(s))})(o)}}function md(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Cn({next:()=>{r.unsubscribe(),t()}});return Le(e(...n)).subscribe(r)}function Ya(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,n_({connector:()=>new Na(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Oo(...t){let e=qn(t);return X((n,r)=>{(e?fd(t,n,e):fd(t,n)).subscribe(r)})}function Rt(t,e){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ae(r,c=>{i?.unsubscribe();let u=0,l=o++;Le(t(c,l)).subscribe(i=ae(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Za(t,e){return G(e)?Rt(()=>t,e):Rt(()=>t)}function _d(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Xt}var L_="https://g.co/ng/security#xss",K=class extends Error{constructor(e,n){super(dh(e,n)),this.code=e}};function dh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ie(t){for(let e in t)if(t[e]===ie)return e;throw Error("Could not find renamed property on target object.")}function dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function r_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var qC=ie({__forward_ref__:ie});function hh(t){return t.__forward_ref__=hh,t.toString=function(){return dt(this())},t}function Ft(t){return zC(t)?t():t}function zC(t){return typeof t=="function"&&t.hasOwnProperty(qC)&&t.__forward_ref__===hh}function j_(t){return t&&!!t.\u0275providers}var WC=ie({\u0275cmp:ie}),KC=ie({\u0275dir:ie}),QC=ie({\u0275pipe:ie}),YC=ie({\u0275mod:ie}),i_=ie({\u0275fac:ie}),Ro=ie({__NG_ELEMENT_ID__:ie}),o_=ie({__NG_ENV_ID__:ie});function fh(t){return typeof t=="string"?t:t==null?"":String(t)}function ZC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fh(t)}function XC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new K(-200,`Circular dependency in DI detected for ${t}${n}`)}function ph(t,e){throw new K(-201,!1)}function JC(t,e){t==null&&eD(e,t,null,"!=")}function eD(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function We(t){return{providers:t.providers||[],imports:t.imports||[]}}function gh(t){return s_(t,B_)||s_(t,U_)}function s_(t,e){return t.hasOwnProperty(e)?t[e]:null}function tD(t){let e=t&&(t[B_]||t[U_]);return e||null}function a_(t){return t&&(t.hasOwnProperty(c_)||t.hasOwnProperty(nD))?t[c_]:null}var B_=ie({\u0275prov:ie}),c_=ie({\u0275inj:ie}),U_=ie({ngInjectableDef:ie}),nD=ie({ngInjectorDef:ie}),z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(z||{}),Ad;function rD(){return Ad}function Jt(t){let e=Ad;return Ad=t,e}function $_(t,e,n){let r=gh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&z.Optional)return null;if(e!==void 0)return e;ph(t,"Injector")}var gt=globalThis;var k=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var iD={},Lo=iD,Sd="__NG_DI_FLAG__",oc="ngTempTokenPath",oD="ngTokenPath",sD=/\n/gm,aD="\u0275",u_="__source",ko;function vi(t){let e=ko;return ko=t,e}function cD(t,e=z.Default){if(ko===void 0)throw new K(-203,!1);return ko===null?$_(t,void 0,e):ko.get(t,e&z.Optional?null:void 0,e)}function T(t,e=z.Default){return(rD()||cD)(Ft(t),e)}function Ne(t,e=z.Default){return T(t,Ec(e))}function Ec(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Md(t){let e=[];for(let n=0;n<t.length;n++){let r=Ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=z.Default;for(let s=0;s<r.length;s++){let a=r[s],c=lD(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(T(i,o))}else e.push(T(r))}return e}function uD(t,e){return t[Sd]=e,t.prototype[Sd]=e,t}function lD(t){return t[Sd]}function dD(t,e,n,r){let i=t[oc];throw e[u_]&&i.unshift(e[u_]),t.message=hD(`
`+t.message,i,n,r),t[oD]=i,t[oc]=null,t}function hD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==aD?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(sD,`
  `)}`}function Ic(t){return{toString:t}.toString()}var H_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(H_||{}),on=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(on||{}),jo={},en=[],Tn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Tn||{});function G_(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Pd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];pD(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function fD(t){return t===3||t===4||t===6}function pD(t){return t.charCodeAt(0)===64}function mh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?l_(t,n,i,null,e[++r]):l_(t,n,i,null,null))}}return t}function l_(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var q_="ng-template";function gD(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&G_(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function z_(t){return t.type===4&&t.value!==q_}function mD(t,e,n){let r=t.type===4&&!n?q_:t.value;return e===r}function _D(t,e,n){let r=4,i=t.attrs||[],o=vD(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!kt(r)&&!kt(c))return!1;if(s&&kt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!mD(t,c,n)||c===""&&e.length===1){if(kt(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!gD(t.attrs,u,n)){if(kt(r))return!1;s=!0}continue}let l=r&8?"class":c,d=yD(l,i,z_(t),n);if(d===-1){if(kt(r))return!1;s=!0;continue}if(u!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&G_(f,u,0)!==-1||r&2&&u!==h){if(kt(r))return!1;s=!0}}}}return kt(r)||s}function kt(t){return(t&1)===0}function yD(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wD(e,t)}function xD(t,e,n=!1){for(let r=0;r<e.length;r++)if(_D(t,e[r],n))return!0;return!1}function vD(t){for(let e=0;e<t.length;e++){let n=t[e];if(fD(n))return e}return t.length}function wD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function d_(t,e){return t?":not("+e.trim()+")":e}function ED(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kt(s)&&(e+=d_(o,i),i=""),r=s,o=o||!kt(r);n++}return i!==""&&(e+=d_(o,i)),e}function ID(t){return t.map(ED).join(",")}function bD(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!kt(i))break;i=o}r++}return{attrs:e,classes:n}}function un(t){return Ic(()=>{let e=Q_(t),n=Et(et({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===H_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||on.Emulated,styles:t.styles||en,_:null,schemas:t.schemas||null,tView:null,id:""});Y_(n);let r=t.dependencies;return n.directiveDefs=f_(r,!1),n.pipeDefs=f_(r,!0),n.id=SD(n),n})}function CD(t){return Ci(t)||W_(t)}function DD(t){return t!==null}function Ke(t){return Ic(()=>({type:t.type,bootstrap:t.bootstrap||en,declarations:t.declarations||en,imports:t.imports||en,exports:t.exports||en,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function h_(t,e){if(t==null)return jo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Tn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Tn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function bc(t){return Ic(()=>{let e=Q_(t);return Y_(e),e})}function Ci(t){return t[WC]||null}function W_(t){return t[KC]||null}function K_(t){return t[QC]||null}function TD(t){let e=Ci(t)||W_(t)||K_(t);return e!==null?e.standalone:!1}function AD(t,e){let n=t[YC]||null;if(!n&&e===!0)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function Q_(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||jo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||en,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:h_(t.inputs,e),outputs:h_(t.outputs),debugInfo:null}}function Y_(t){t.features?.forEach(e=>e(t))}function f_(t,e){if(!t)return null;let n=e?K_:CD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(DD)}function SD(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Sn=0,H=1,L=2,qe=3,Vt=4,jt=5,Bo=6,Uo=7,Ge=8,Di=9,sn=10,ze=11,$o=12,p_=13,Ai=14,an=15,Cc=16,wi=17,Ho=18,Dc=19,Z_=20,Fo=21,yd=22,Cr=23,Lt=25,X_=1;var Dr=7,sc=8,ac=9,nt=10,_h=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(_h||{});function Ir(t){return Array.isArray(t)&&typeof t[X_]=="object"}function Mn(t){return Array.isArray(t)&&t[X_]===!0}function J_(t){return(t.flags&4)!==0}function yh(t){return t.componentOffset>-1}function xh(t){return(t.flags&1)===1}function ts(t){return!!t.template}function MD(t){return(t[L]&512)!==0}function Go(t,e){let n=t.hasOwnProperty(i_);return n?t[i_]:null}var Nd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ey(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function vh(){return ty}function ty(t){return t.type.prototype.ngOnChanges&&(t.setInput=ND),PD}vh.ngInherit=!0;function PD(){let t=ry(this),e=t?.current;if(e){let n=t.previous;if(n===jo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ND(t,e,n,r,i){let o=this.declaredInputs[r],s=ry(t)||OD(t,{previous:jo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Nd(u&&u.currentValue,n,c===jo),ey(t,e,i,n)}var ny="__ngSimpleChanges__";function ry(t){return t[ny]||null}function OD(t,e){return t[ny]=e}var g_=null;var tn=function(t,e,n){g_?.(t,e,n)},RD="svg",kD="math",FD=!1;function VD(){return FD}function cn(t){for(;Array.isArray(t);)t=t[Sn];return t}function LD(t,e){return cn(e[t])}function Bt(t,e){return cn(e[t.index])}function wh(t,e){return t.data[e]}function Pr(t,e){let n=e[t];return Ir(n)?n:n[Sn]}function Eh(t){return(t[L]&128)===128}function jD(t){return Mn(t[qe])}function cc(t,e){return e==null?null:t[e]}function iy(t){t[wi]=0}function BD(t){t[L]&1024||(t[L]|=1024,Eh(t)&&qo(t))}function UD(t,e){for(;t>0;)e=e[Ai],t--;return e}function oy(t){return t[L]&9216||t[Cr]?.dirty}function Od(t){oy(t)?qo(t):t[L]&64&&(VD()?(t[L]|=1024,qo(t)):t[sn].changeDetectionScheduler?.notify())}function qo(t){t[sn].changeDetectionScheduler?.notify();let e=zo(t);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!Eh(e)));)e=zo(e)}function $D(t,e){if((t[L]&256)===256)throw new K(911,!1);t[Fo]===null&&(t[Fo]=[]),t[Fo].push(e)}function zo(t){let e=t[qe];return Mn(e)?e[qe]:e}var W={lFrame:fy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function HD(){return W.lFrame.elementDepthCount}function GD(){W.lFrame.elementDepthCount++}function qD(){W.lFrame.elementDepthCount--}function sy(){return W.bindingsEnabled}function zD(){return W.skipHydrationRootTNode!==null}function WD(t){return W.skipHydrationRootTNode===t}function KD(){W.skipHydrationRootTNode=null}function fe(){return W.lFrame.lView}function Kn(){return W.lFrame.tView}function rt(t){return W.lFrame.contextLView=t,t[Ge]}function it(t){return W.lFrame.contextLView=null,t}function ln(){let t=ay();for(;t!==null&&t.type===64;)t=t.parent;return t}function ay(){return W.lFrame.currentTNode}function QD(){let t=W.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ns(t,e){let n=W.lFrame;n.currentTNode=t,n.isParent=e}function cy(){return W.lFrame.isParent}function YD(){W.lFrame.isParent=!1}function uy(){let t=W.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ZD(t){return W.lFrame.bindingIndex=t}function Tc(){return W.lFrame.bindingIndex++}function XD(){return W.lFrame.inI18n}function JD(t,e){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=t,Rd(e)}function e1(){return W.lFrame.currentDirectiveIndex}function Rd(t){W.lFrame.currentDirectiveIndex=t}function ly(t){W.lFrame.currentQueryIndex=t}function t1(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[jt]:null}function dy(t,e,n){if(n&z.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&z.Host);)if(i=t1(o),i===null||(o=o[Ai],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=W.lFrame=hy();return r.currentTNode=e,r.lView=t,!0}function Ih(t){let e=hy(),n=t[H];W.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hy(){let t=W.lFrame,e=t===null?null:t.child;return e===null?fy(t):e}function fy(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function py(){let t=W.lFrame;return W.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gy=py;function bh(){let t=py();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function n1(t){return(W.lFrame.contextLView=UD(t,W.lFrame.contextLView))[Ge]}function Ac(){return W.lFrame.selectedIndex}function Tr(t){W.lFrame.selectedIndex=t}function my(){let t=W.lFrame;return wh(t.tView,t.selectedIndex)}function r1(){return W.lFrame.currentNamespace}var _y=!0;function Ch(){return _y}function Dh(t){_y=t}function i1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ty(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Th(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function ec(t,e,n){yy(t,e,3,n)}function tc(t,e,n,r){(t[L]&3)===n&&yy(t,e,n,r)}function xd(t,e){let n=t[L];(n&3)===e&&(n&=16383,n+=1,t[L]=n)}function yy(t,e,n,r){let i=r!==void 0?t[wi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[wi]+=65536),(a<o||o==-1)&&(o1(t,n,e,c),t[wi]=(t[wi]&4294901760)+c+2),c++}function m_(t,e){tn(4,t,e);let n=Ve(null);try{e.call(t)}finally{Ve(n),tn(5,t,e)}}function o1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[L]>>14<t[wi]>>16&&(t[L]&3)===e&&(t[L]+=16384,m_(a,o)):m_(a,o)}var bi=-1,Wo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function s1(t){return t instanceof Wo}function a1(t){return(t.flags&8)!==0}function c1(t){return(t.flags&16)!==0}function xy(t){return t!==bi}function uc(t){return t&32767}function u1(t){return t>>16}function lc(t,e){let n=u1(t),r=e;for(;n>0;)r=r[Ai],n--;return r}var kd=!0;function __(t){let e=kd;return kd=t,e}var l1=256,vy=l1-1,wy=5,d1=0,nn={};function h1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ro)&&(r=n[Ro]),r==null&&(r=n[Ro]=d1++);let i=r&vy,o=1<<i;e.data[t+(i>>wy)]|=o}function Ey(t,e){let n=Iy(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,vd(r.data,t),vd(e,null),vd(r.blueprint,null));let i=Ah(t,e),o=t.injectorIndex;if(xy(i)){let s=uc(i),a=lc(i,e),c=a[H].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function vd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Iy(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ah(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ay(i),r===null)return bi;if(n++,i=i[Ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bi}function f1(t,e,n){h1(t,e,n)}function by(t,e,n){if(n&z.Optional||t!==void 0)return t;ph(e,"NodeInjector")}function Cy(t,e,n,r){if(n&z.Optional&&r===void 0&&(r=null),!(n&(z.Self|z.Host))){let i=t[Di],o=Jt(void 0);try{return i?i.get(e,r,n&z.Optional):$_(e,r,n&z.Optional)}finally{Jt(o)}}return by(r,e,n)}function Dy(t,e,n,r=z.Default,i){if(t!==null){if(e[L]&2048&&!(r&z.Self)){let s=y1(t,e,n,r,nn);if(s!==nn)return s}let o=Ty(t,e,n,r,nn);if(o!==nn)return o}return Cy(e,n,r,i)}function Ty(t,e,n,r,i){let o=m1(n);if(typeof o=="function"){if(!dy(e,t,r))return r&z.Host?by(i,n,r):Cy(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&z.Optional))ph(n);else return s}finally{gy()}}else if(typeof o=="number"){let s=null,a=Iy(t,e),c=bi,u=r&z.Host?e[an][jt]:null;for((a===-1||r&z.SkipSelf)&&(c=a===-1?Ah(t,e):e[a+8],c===bi||!x_(r,!1)?a=-1:(s=e[H],a=uc(c),e=lc(c,e)));a!==-1;){let l=e[H];if(y_(o,a,l.data)){let d=p1(a,e,n,s,r,u);if(d!==nn)return d}c=e[a+8],c!==bi&&x_(r,e[H].data[a+8]===u)&&y_(o,a,e)?(s=l,a=uc(c),e=lc(c,e)):a=-1}}return i}function p1(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],c=r==null?yh(a)&&kd:r!=s&&(a.type&3)!==0,u=i&z.Host&&o===a,l=g1(a,s,n,c,u);return l!==null?Ko(e,s,l,a):nn}function g1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let y=s[f];if(f<c&&n===y||f>=c&&y.type===n)return f}if(i){let f=s[c];if(f&&ts(f)&&f.type===n)return c}return null}function Ko(t,e,n,r){let i=t[n],o=e.data;if(s1(i)){let s=i;s.resolving&&XC(ZC(o[n]));let a=__(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Jt(s.injectImpl):null,l=dy(t,r,z.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&i1(n,o[n],e)}finally{u!==null&&Jt(u),__(a),s.resolving=!1,gy()}}return i}function m1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ro)?t[Ro]:void 0;return typeof e=="number"?e>=0?e&vy:_1:e}function y_(t,e,n){let r=1<<t;return!!(n[e+(t>>wy)]&r)}function x_(t,e){return!(t&z.Self)&&!(t&z.Host&&e)}var br=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Dy(this._tNode,this._lView,e,Ec(r),n)}};function _1(){return new br(ln(),fe())}function y1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[L]&2048&&!(s[L]&512);){let a=Ty(o,s,n,r|z.Self,nn);if(a!==nn)return a;let c=o.parent;if(!c){let u=s[Z_];if(u){let l=u.get(n,nn,r);if(l!==nn)return l}c=Ay(s),s=s[Ai]}o=c}return i}function Ay(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[jt]:null}var Xa="__parameters__";function x1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function v1(t,e,n){return Ic(()=>{let r=x1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Xa)?c[Xa]:Object.defineProperty(c,Xa,{value:[]})[Xa];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function w1(t){let e=gt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function E1(t){return typeof t=="function"}function Sh(t,e){t.forEach(n=>Array.isArray(n)?Sh(n,e):e(n))}function Sy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Mh=uD(v1("Optional"),8);function I1(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(T1))}return o}return hc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>A1(o));e.push(c)}),C1(),Promise.all(e).then(()=>{})}var hc=new Map,b1=new Set;function C1(){let t=hc;return hc=new Map,t}function D1(){return hc.size===0}function T1(t){return typeof t=="string"?t:t.text()}function A1(t){b1.delete(t)}var Qo=new k("ENVIRONMENT_INITIALIZER"),My=new k("INJECTOR",-1),Py=new k("INJECTOR_DEF_TYPES"),fc=class{get(e,n=Lo){if(n===Lo){let r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}};function S1(...t){return{\u0275providers:M1(!0,t),\u0275fromNgModule:!0}}function M1(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Sh(e,s=>{let a=s;Fd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ny(i,o),n}function Ny(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ph(i,o=>{e(o,r)})}}function Fd(t,e,n,r){if(t=Ft(t),!t)return!1;let i=null,o=a_(t),s=!o&&Ci(t);if(!o&&!s){let c=t.ngModule;if(o=a_(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Fd(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Sh(o.imports,l=>{Fd(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Ny(u,e)}if(!a){let u=Go(i)||(()=>new i);e({provide:i,useFactory:u,deps:en},i),e({provide:Py,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>T(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Ph(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Ph(t,e){for(let n of t)j_(n)&&(n=n.\u0275providers),Array.isArray(n)?Ph(n,e):e(n)}var P1=ie({provide:String,useValue:ie});function Oy(t){return t!==null&&typeof t=="object"&&P1 in t}function N1(t){return!!(t&&t.useExisting)}function O1(t){return!!(t&&t.useFactory)}function Vd(t){return typeof t=="function"}var Sc=new k("Set Injector scope."),nc={},R1={},wd;function Ry(){return wd===void 0&&(wd=new fc),wd}var Ar=class{},Ld=class extends Ar{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bd(e,s=>this.processProvider(s)),this.records.set(My,Ei(void 0,this)),i.has("environment")&&this.records.set(Ar,Ei(void 0,this));let o=this.records.get(Sc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Py,en,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vi(this),r=Jt(void 0),i;try{return e()}finally{vi(n),Jt(r)}}get(e,n=Lo,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(o_))return e[o_](this);r=Ec(r);let i,o=vi(this),s=Jt(void 0);try{if(!(r&z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=B1(e)&&gh(e);u&&this.injectableDefInScope(u)?c=Ei(jd(e),nc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&z.Self?Ry():this.parent;return n=r&z.Optional&&n===Lo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[oc]=a[oc]||[]).unshift(dt(e)),o)throw a;return dD(a,e,"R3InjectorError",this.source)}else throw a}finally{Jt(s),vi(o)}}resolveInjectorInitializers(){let e=vi(this),n=Jt(void 0),r;try{let i=this.get(Qo,en,z.Self);for(let o of i)o()}finally{vi(e),Jt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=Ft(e);let n=Vd(e)?e:Ft(e&&e.provide),r=F1(e);if(!Vd(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ei(void 0,nc,!0),i.factory=()=>Md(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===nc&&(n.value=R1,n.value=n.factory()),typeof n.value=="object"&&n.value&&j1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jd(t){let e=gh(t),n=e!==null?e.factory:Go(t);if(n!==null)return n;if(t instanceof k)throw new K(204,!1);if(t instanceof Function)return k1(t);throw new K(204,!1)}function k1(t){if(t.length>0)throw new K(204,!1);let n=tD(t);return n!==null?()=>n.factory(t):()=>new t}function F1(t){if(Oy(t))return Ei(void 0,t.useValue);{let e=V1(t);return Ei(e,nc)}}function V1(t,e,n){let r;if(Vd(t)){let i=Ft(t);return Go(i)||jd(i)}else if(Oy(t))r=()=>Ft(t.useValue);else if(O1(t))r=()=>t.useFactory(...Md(t.deps||[]));else if(N1(t))r=()=>T(Ft(t.useExisting));else{let i=Ft(t&&(t.useClass||t.provide));if(L1(t))r=()=>new i(...Md(t.deps));else return Go(i)||jd(i)}return r}function Ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function L1(t){return!!t.deps}function j1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function B1(t){return typeof t=="function"||typeof t=="object"&&t instanceof k}function Bd(t,e){for(let n of t)Array.isArray(n)?Bd(n,e):n&&j_(n)?Bd(n.\u0275providers,e):e(n)}function v_(t,e=null,n=null,r){let i=ky(t,e,n,r);return i.resolveInjectorInitializers(),i}function ky(t,e=null,n=null,r,i=new Set){let o=[n||en,S1(t)];return r=r||(typeof t=="object"?void 0:dt(t)),new Ld(o,e||Ry(),r||null,i)}var Nr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return v_({name:""},i,r,"");{let o=r.name??"";return v_({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Lo,e.NULL=new fc,e.\u0275prov=J({token:e,providedIn:"any",factory:()=>T(My)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Ud;function Fy(t){Ud=t}function U1(){if(Ud!==void 0)return Ud;if(typeof document<"u")return document;throw new K(210,!1)}var Mc=new k("AppId",{providedIn:"root",factory:()=>$1}),$1="ng",Nh=new k("Platform Initializer"),Dt=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Oh=new k("CSP nonce",{providedIn:"root",factory:()=>U1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function H1(t){return t instanceof Function?t():t}function Vy(t){return(t.flags&128)===128}var Or=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Or||{});var Ly=new Map,G1=0;function q1(){return G1++}function z1(t){Ly.set(t[Dc],t)}function W1(t){Ly.delete(t[Dc])}var w_="__ngContext__";function Sr(t,e){Ir(e)?(t[w_]=e[Dc],z1(e)):t[w_]=e}var K1;function Rh(t,e){return K1(t,e)}function Ii(t,e,n,r,i){if(r!=null){let o,s=!1;Mn(r)?o=r:Ir(r)&&(s=!0,r=r[Sn]);let a=cn(r);t===0&&n!==null?i==null?$y(e,n,a):pc(e,n,a,i||null,!0):t===1&&n!==null?pc(e,n,a,i||null,!0):t===2?dT(e,a,s):t===3&&e.destroyNode(a),o!=null&&fT(e,t,o,n,i)}}function Q1(t,e){return t.createText(e)}function Y1(t,e,n){t.setValue(e,n)}function jy(t,e,n){return t.createElement(e,n)}function Z1(t,e){By(t,e),e[Sn]=null,e[jt]=null}function X1(t,e,n,r,i,o){r[Sn]=i,r[jt]=e,Nc(t,r,n,1,i,o)}function By(t,e){e[sn].changeDetectionScheduler?.notify(),Nc(t,e,e[ze],2,null,null)}function J1(t){let e=t[$o];if(!e)return Ed(t[H],t);for(;e;){let n=null;if(Ir(e))n=e[$o];else{let r=e[nt];r&&(n=r)}if(!n){for(;e&&!e[Vt]&&e!==t;)Ir(e)&&Ed(e[H],e),e=e[qe];e===null&&(e=t),Ir(e)&&Ed(e[H],e),n=e&&e[Vt]}e=n}}function eT(t,e,n,r){let i=nt+r,o=n.length;r>0&&(n[i-1][Vt]=e),r<o-nt?(e[Vt]=n[i],Sy(n,nt+r,e)):(n.push(e),e[Vt]=null),e[qe]=n;let s=e[Cc];s!==null&&n!==s&&tT(s,e);let a=e[Ho];a!==null&&a.insertView(t),Od(e),e[L]|=128}function tT(t,e){let n=t[ac],i=e[qe][qe][an];e[an]!==i&&(t[L]|=_h.HasTransplantedViews),n===null?t[ac]=[e]:n.push(e)}function Uy(t,e){let n=t[ac],r=n.indexOf(e);n.splice(r,1)}function Yo(t,e){if(t.length<=nt)return;let n=nt+e,r=t[n];if(r){let i=r[Cc];i!==null&&i!==t&&Uy(i,r),e>0&&(t[n-1][Vt]=r[Vt]);let o=dc(t,nt+e);Z1(r[H],r);let s=o[Ho];s!==null&&s.detachView(o[H]),r[qe]=null,r[Vt]=null,r[L]&=-129}return r}function Pc(t,e){if(!(e[L]&256)){let n=e[ze];n.destroyNode&&Nc(t,e,n,3,null,null),J1(e)}}function Ed(t,e){if(!(e[L]&256)){e[L]&=-129,e[L]|=256,e[Cr]&&M0(e[Cr]),rT(t,e),nT(t,e),e[H].type===1&&e[ze].destroy();let n=e[Cc];if(n!==null&&Mn(e[qe])){n!==e[qe]&&Uy(n,e);let r=e[Ho];r!==null&&r.detachView(t)}W1(e)}}function nT(t,e){let n=t.cleanup,r=e[Uo];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Uo]=null);let i=e[Fo];if(i!==null){e[Fo]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function rT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Wo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];tn(4,a,c);try{c.call(a)}finally{tn(5,a,c)}}else{tn(4,i,o);try{o.call(i)}finally{tn(5,i,o)}}}}}function iT(t,e,n){return oT(t,e.parent,n)}function oT(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Sn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===on.None||o===on.Emulated)return null}return Bt(r,n)}}function pc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function $y(t,e,n){t.appendChild(e,n)}function E_(t,e,n,r,i){r!==null?pc(t,e,n,r,i):$y(t,e,n)}function sT(t,e,n,r){t.removeChild(e,n,r)}function kh(t,e){return t.parentNode(e)}function aT(t,e){return t.nextSibling(e)}function cT(t,e,n){return lT(t,e,n)}function uT(t,e,n){return t.type&40?Bt(t,n):null}var lT=uT,I_;function Fh(t,e,n,r){let i=iT(t,r,e),o=e[ze],s=r.parent||e[jt],a=cT(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)E_(o,i,n[c],a,!1);else E_(o,i,n,a,!1);I_!==void 0&&I_(o,r,e,n,i)}function rc(t,e){if(e!==null){let n=e.type;if(n&3)return Bt(e,t);if(n&4)return $d(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return rc(t,r);{let i=t[e.index];return Mn(i)?$d(-1,i):cn(i)}}else{if(n&32)return Rh(e,t)()||cn(t[e.index]);{let r=Hy(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(t[an]);return rc(i,r)}else return rc(t,e.next)}}}return null}function Hy(t,e){if(e!==null){let r=t[an][jt],i=e.projection;return r.projection[i]}return null}function $d(t,e){let n=nt+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return rc(r,i)}return e[Dr]}function dT(t,e,n){let r=kh(t,e);r&&sT(t,r,e,n)}function Vh(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Sr(cn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Vh(t,e,n.child,r,i,o,!1),Ii(e,t,i,a,o);else if(c&32){let u=Rh(n,r),l;for(;l=u();)Ii(e,t,i,l,o);Ii(e,t,i,a,o)}else c&16?hT(t,e,r,n,i,o):Ii(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Nc(t,e,n,r,i,o){Vh(n,r,t.firstChild,e,i,o,!1)}function hT(t,e,n,r,i,o){let s=n[an],c=s[jt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Ii(e,t,i,l,o)}else{let u=c,l=s[qe];Vy(r)&&(u.flags|=128),Vh(t,e,u,l,i,o,!0)}}function fT(t,e,n,r,i){let o=n[Dr],s=cn(n);o!==s&&Ii(e,t,r,o,i);for(let a=nt;a<n.length;a++){let c=n[a];Nc(c[H],c,t,e,r,o)}}function pT(t,e,n){t.setAttribute(e,"style",n)}function Gy(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qy(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Pd(t,e,r),i!==null&&Gy(t,e,i),o!==null&&pT(t,e,o)}var gc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${L_})`}};function Lh(t){return t instanceof gc?t.changingThisBreaksApplicationSecurity:t}function zy(t,e){let n=gT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${L_})`)}return n===e}function gT(t){return t instanceof gc&&t.getTypeName()||null}var mT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wy(t){return t=String(t),t.match(mT)?t:"unsafe:"+t}var jh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jh||{});function Pn(t){let e=_T();return e?e.sanitize(jh.URL,t)||"":zy(t,"URL")?Lh(t):Wy(fh(t))}function _T(){let t=fe();return t&&t[sn].sanitizer}var Hd=class{};var yT="h",xT="b";var vT=()=>null;function Bh(t,e,n=!1){return vT(t,e,n)}var Gd=class{},mc=class{};function wT(t){let e=Error(`No component factory found for ${dt(t)}.`);return e[ET]=t,e}var ET="ngComponent";var qd=class{resolveComponentFactory(e){throw wT(e)}},Uh=(()=>{let e=class e{};e.NULL=new qd;let t=e;return t})();function IT(){return Oc(ln(),fe())}function Oc(t,e){return new rs(Bt(t,e))}var rs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=IT;let t=e;return t})();var Zo=class{},Rc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>bT();let t=e;return t})();function bT(){let t=fe(),e=ln(),n=Pr(e.index,t);return(Ir(n)?n:t)[ze]}var CT=(()=>{let e=class e{};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Id={};function _c(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(cn(o)),Mn(o)&&DT(o,r);let s=n.type;if(s&8)_c(t,e,n.child,r);else if(s&32){let a=Rh(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Hy(e,n);if(Array.isArray(a))r.push(...a);else{let c=zo(e[an]);_c(c[H],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function DT(t,e){for(let n=nt;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&_c(r[H],r,i,e)}t[Dr]!==t[Sn]&&e.push(t[Dr])}var Ky=[];function TT(t){return t[Cr]??AT(t)}function AT(t){let e=Ky.pop()??Object.create(MT);return e.lView=t,e}function ST(t){t.lView[Cr]!==t&&(t.lView=null,Ky.push(t))}var MT=Et(et({},T0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qo(t.lView)},consumerOnSignalRead(){this.lView[Cr]=this}});function Qy(t){return Zy(t[$o])}function Yy(t){return Zy(t[Vt])}function Zy(t){for(;t!==null&&!Mn(t);)t=t[Vt];return t}var PT="ngOriginalError";function bd(t){return t[PT]}var An=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bd(e);for(;n&&bd(n);)n=bd(n);return n||null}},Xy=new k("",{providedIn:"root",factory:()=>Ne(An).handleError.bind(void 0)});var Jy=!1,NT=new k("",{providedIn:"root",factory:()=>Jy});var Si={};function $(t=1){ex(Kn(),fe(),Ac()+t,!1)}function ex(t,e,n,r){if(!r)if((e[L]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ec(e,o,n)}else{let o=t.preOrderHooks;o!==null&&tc(e,o,0,n)}Tr(n)}function je(t,e=z.Default){let n=fe();if(n===null)return T(t,e);let r=ln();return Dy(r,n,Ft(t),e)}function tx(t,e,n,r,i,o){let s=Ve(null);try{let a=null;i&Tn.SignalBased&&(a=e[r][D0]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Tn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):ey(e,a,r,o)}finally{Ve(s)}}function OT(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Tr(~i);else{let o=i,s=n[++r],a=n[++r];JD(s,o);let c=e[o];a(2,c)}}}finally{Tr(-1)}}function kc(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Sn]=i,d[L]=r|4|128|8|64,(u!==null||t&&t[L]&2048)&&(d[L]|=2048),iy(d),d[qe]=d[Ai]=t,d[Ge]=n,d[sn]=s||t&&t[sn],d[ze]=a||t&&t[ze],d[Di]=c||t&&t[Di]||null,d[jt]=o,d[Dc]=q1(),d[Bo]=l,d[Z_]=u,d[an]=e.type==2?t[an]:d,d}function Fc(t,e,n,r,i){let o=t.data[e];if(o===null)o=RT(t,e,n,r,i),XD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=QD();o.injectorIndex=s===null?-1:s.injectorIndex}return ns(o,!0),o}function RT(t,e,n,r,i){let o=ay(),s=cy(),a=s?o:o&&o.parent,c=t.data[e]=jT(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function nx(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function rx(t,e,n,r,i){let o=Ac(),s=r&2;try{Tr(-1),s&&e.length>Lt&&ex(t,e,Lt,!1),tn(s?2:0,i),n(r,i)}finally{Tr(o),tn(s?3:1,i)}}function ix(t,e,n){if(J_(e)){let r=Ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ve(r)}}}function ox(t,e,n){sy()&&(qT(t,e,n,Bt(n,e)),(n.flags&64)===64&&dx(t,e,n))}function sx(t,e,n=Bt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ax(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=$h(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function $h(t,e,n,r,i,o,s,a,c,u,l){let d=Lt+r,h=d+i,f=kT(d,h),y=typeof u=="function"?u():u;return f[H]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:l}}function kT(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Si);return n}function FT(t,e,n,r){let o=r.get(NT,Jy)||n===on.ShadowDom,s=t.selectRootElement(e,o);return VT(s),s}function VT(t){LT(t)}var LT=()=>null;function jT(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function b_(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Tn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?C_(r,n,u,a,c):C_(r,n,u,a)}return r}function C_(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function BT(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,y=h?h.outputs:null;c=b_(0,d.inputs,l,c,f),u=b_(1,d.outputs,l,u,y);let _=c!==null&&s!==null&&!z_(e)?eA(c,l,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function UT(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cx(t,e,n,r,i,o,s,a){let c=Bt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Hh(t,n,l,r,i),yh(e)&&$T(n,e.index)):e.type&3?(r=UT(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function $T(t,e){let n=Pr(e,t);n[L]&16||(n[L]|=64)}function ux(t,e,n,r){if(sy()){let i=r===null?null:{"":-1},o=WT(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&lx(t,e,n,s,i,a),i&&KT(n,r,i)}n.mergedAttrs=mh(n.mergedAttrs,n.attrs)}function lx(t,e,n,r,i,o){for(let u=0;u<r.length;u++)f1(Ey(n,e),t,r[u].type);YT(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=nx(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=mh(n.mergedAttrs,l.hostAttrs),ZT(t,n,e,c,l),QT(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}BT(t,n,o)}function HT(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;GT(s)!=a&&s.push(a),s.push(n,r,o)}}function GT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function qT(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;yh(n)&&XT(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ey(n,e),Sr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Ko(e,t,a,n);if(Sr(u,e),s!==null&&JT(e,a-i,u,c,n,s),ts(c)){let l=Pr(n.index,e);l[Ge]=Ko(e,t,a,n)}}}function dx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=e1();try{Tr(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Rd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zT(c,u)}}finally{Tr(-1),Rd(s)}}function zT(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function WT(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(xD(e,s.selectors,!1))if(r||(r=[]),ts(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;zd(t,e,c)}else r.unshift(s),zd(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function zd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function KT(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function QT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ts(e)&&(n[""]=t)}}function YT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ZT(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Go(i.type,!0)),s=new Wo(o,ts(i),je);t.blueprint[r]=s,n[r]=s,HT(t,e,r,nx(t,n,i.hostVars,Si),i)}function XT(t,e,n){let r=Bt(e,t),i=ax(n),o=t[sn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vc(t,kc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function JT(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];tx(r,n,c,u,l,d)}}function eA(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function hx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function fx(t,e){let n=t.contentQueries;if(n!==null){let r=Ve(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];ly(o),a.contentQueries(2,e[s],s)}}}finally{Ve(r)}}}function Vc(t,e){return t[$o]?t[p_][Vt]=e:t[$o]=e,t[p_]=e,e}function Wd(t,e,n){ly(0);let r=Ve(null);try{e(t,n)}finally{Ve(r)}}function tA(t){return t[Uo]||(t[Uo]=[])}function nA(t){return t.cleanup||(t.cleanup=[])}function px(t,e){let n=t[Di],r=n?n.get(An,null):null;r&&r.handleError(e)}function Hh(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];tx(l,u,r,a,c,i)}}function rA(t,e,n){let r=LD(e,t);Y1(t[ze],r,n)}var iA=100;function oA(t,e=!0){let n=t[sn],r=n.rendererFactory,i=!1;i||r.begin?.();try{sA(t)}catch(o){throw e&&px(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function sA(t){Kd(t,0);let e=0;for(;oy(t);){if(e===iA)throw new K(103,!1);e++,Kd(t,1)}}function aA(t,e,n,r){let i=e[L];if((i&256)===256)return;let o=!1;!o&&e[sn].inlineEffectRunner?.flush(),Ih(e);let s=null,a=null;!o&&cA(t)&&(a=TT(e),s=A0(a));try{iy(e),ZD(t.bindingStartIndex),n!==null&&rx(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&ec(e,d,null)}else{let d=t.preOrderHooks;d!==null&&tc(e,d,0,null),xd(e,0)}if(uA(e),gx(e,0),t.contentQueries!==null&&fx(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&ec(e,d)}else{let d=t.contentHooks;d!==null&&tc(e,d,1),xd(e,1)}OT(t,e);let u=t.components;u!==null&&_x(e,u,0);let l=t.viewQuery;if(l!==null&&Wd(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&ec(e,d)}else{let d=t.viewHooks;d!==null&&tc(e,d,2),xd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yd]){for(let d of e[yd])d();e[yd]=null}o||(e[L]&=-73)}catch(c){throw qo(e),c}finally{a!==null&&(S0(a,s),ST(a)),bh()}}function cA(t){return t.type!==2}function gx(t,e){for(let n=Qy(t);n!==null;n=Yy(n))for(let r=nt;r<n.length;r++){let i=n[r];mx(i,e)}}function uA(t){for(let e=Qy(t);e!==null;e=Yy(e)){if(!(e[L]&_h.HasTransplantedViews))continue;let n=e[ac];for(let r=0;r<n.length;r++){let i=n[r],o=i[qe];BD(i)}}}function lA(t,e,n){let r=Pr(e,t);mx(r,n)}function mx(t,e){Eh(t)&&Kd(t,e)}function Kd(t,e){let r=t[H],i=t[L],o=t[Cr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&td(o)),o&&(o.dirty=!1),t[L]&=-9217,s)aA(r,t,r.template,t[Ge]);else if(i&8192){gx(t,1);let a=r.components;a!==null&&_x(t,a,1)}}function _x(t,e,n){for(let r=0;r<e.length;r++)lA(t,e[r],n)}function Gh(t){for(t[sn].changeDetectionScheduler?.notify();t;){t[L]|=64;let e=zo(t);if(MD(t)&&!e)return t;t=e}return null}var Xo=class{get rootNodes(){let e=this._lView,n=e[H];return _c(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ge]}set context(e){this._lView[Ge]=e}get destroyed(){return(this._lView[L]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qe];if(Mn(e)){let n=e[sc],r=n?n.indexOf(this):-1;r>-1&&(Yo(e,r),dc(n,r))}this._attachedToViewContainer=!1}Pc(this._lView[H],this._lView)}onDestroy(e){$D(this._lView,e)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[L]&=-129}reattach(){Od(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,oA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,By(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e,Od(this._lView)}};var D_=new Set;function qh(t){D_.has(t)||(D_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Qd=class extends It{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Cd(o),i&&(i=Cd(i)),s&&(s=Cd(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}};function Cd(t){return e=>{setTimeout(t,void 0,e)}}var rn=Qd;function T_(...t){}function dA(){let t=typeof gt.requestAnimationFrame=="function",e=gt[t?"requestAnimationFrame":"setTimeout"],n=gt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=dA().nativeRequestAnimationFrame,pA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,hA,T_,T_);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},hA={};function zh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fA(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(gt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Yd(t),t.isCheckStableRunning=!0,zh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Yd(t))}function pA(t){let e=()=>{fA(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(gA(a))return n.invokeTask(i,o,s,a);try{return A_(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),S_(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return A_(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),S_(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Yd(t),zh(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Yd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function A_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function S_(t){t._nesting--,zh(t)}var Zd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function gA(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function mA(t="zone.js",e){return t==="noop"?new Zd:t==="zone.js"?new re(e):t}var yx=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function _A(t,e){let n=Pr(e,t),r=n[H];yA(r,n);let i=n[Sn];i!==null&&n[Bo]===null&&(n[Bo]=Bh(i,n[Di])),Wh(r,n,n[Ge])}function yA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wh(t,e,n){Ih(e);try{let r=t.viewQuery;r!==null&&Wd(1,r,n);let i=t.template;i!==null&&rx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fx(t,e),t.staticViewQueries&&Wd(2,t.viewQuery,n);let o=t.components;o!==null&&xA(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[L]&=-5,bh()}}function xA(t,e){for(let n=0;n<e.length;n++)_A(t,e[n])}function Xd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=r_(i,a);else if(o==2){let c=a,u=e[++s];r=r_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Jd=class extends Uh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ci(e);return new yc(n,this.ngModule)}};function M_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function vA(t){let e=t.toLowerCase();return e==="svg"?RD:e==="math"?kD:null}var eh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ec(r);let i=this.injector.get(e,Id,r);return i!==Id||n===Id?i:this.parentInjector.get(e,n,r)}},yc=class extends mc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=M_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return M_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ID(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof Ar?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new eh(e,o):e,a=s.get(Zo,null);if(a===null)throw new K(407,!1);let c=s.get(CT,null),u=s.get(yx,null),l=s.get(Hd,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",y=r?FT(h,r,this.componentDef.encapsulation,s):jy(h,f,vA(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let x=null;y!==null&&(x=Bh(y,s,!0));let I=$h(0,null,null,1,0,null,null,null,null,null,null),M=kc(null,I,null,_,null,null,d,h,s,null,x);Ih(M);let D,N;try{let O=this.componentDef,B,he=null;O.findHostDirectiveDefs?(B=[],he=new Map,O.findHostDirectiveDefs(O,B,he),B.push(O)):B=[O];let wt=wA(M,y),Ql=EA(wt,y,O,B,M,d,h);N=wh(I,Lt),y&&CA(h,O,y,r),n!==void 0&&DA(N,this.ngContentSelectors,n),D=bA(Ql,O,B,he,M,[TA]),Wh(I,M,null)}finally{bh()}return new th(this.componentType,D,Oc(N,M),M,N)}},th=class extends Gd{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Xo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Hh(o[H],o,i,e,n),this.previousInputValues.set(e,n);let s=Pr(this._tNode.index,o);Gh(s)}}get injector(){return new br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function wA(t,e){let n=t[H],r=Lt;return t[r]=e,Fc(n,r,2,"#host",null)}function EA(t,e,n,r,i,o,s){let a=i[H];IA(r,t,e,s);let c=null;e!==null&&(c=Bh(e,i[Di]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=kc(i,ax(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&zd(a,t,r.length-1),Vc(i,d),i[t.index]=d}function IA(t,e,n,r){for(let i of t)e.mergedAttrs=mh(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xd(e,e.mergedAttrs,!0),n!==null&&qy(r,n,e))}function bA(t,e,n,r,i,o){let s=ln(),a=i[H],c=Bt(s,i);lx(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Ko(i,a,d,s);Sr(h,i)}dx(a,i,s),c&&Sr(c,i);let u=Ko(i,a,s.directiveStart+s.componentOffset,s);if(t[Ge]=i[Ge]=u,o!==null)for(let l of o)l(u,e);return ix(a,s,t),u}function CA(t,e,n,r){if(r)Pd(t,n,["ng-version","17.1.0"]);else{let{attrs:i,classes:o}=bD(e.selectors[0]);i&&Pd(t,n,i),o&&o.length>0&&Gy(t,n,o.join(" "))}}function DA(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function TA(){let t=ln();Th(fe()[H],t)}var S4=new RegExp(`^(\\d+)*(${xT}|${yT})*(.*)`);var AA=()=>null;function Jo(t,e){return AA(t,e)}function Lc(t,e,n,r){let i=e.tView,s=t[L]&4096?4096:16,a=kc(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Cc]=c;let u=t[Ho];return u!==null&&(a[Ho]=u.createEmbeddedView(i)),Wh(i,a,n),a}function xx(t,e){let n=nt+e;if(n<t.length)return t[n]}function es(t,e){return!e||e.firstChild===null||Vy(t)}function jc(t,e,n,r=!0){let i=e[H];if(eT(i,e,t,n),r){let s=$d(n,t),a=e[ze],c=kh(a,t[Dr]);c!==null&&X1(i,t[jt],a,e,c,s)}let o=e[Bo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vx(t,e){let n=Yo(t,e);return n!==void 0&&Pc(n[H],n),n}var Kh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=SA;let t=e;return t})();function SA(){let t=ln();return PA(t,fe())}var MA=Kh,wx=class extends MA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Oc(this._hostTNode,this._hostLView)}get injector(){return new br(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ah(this._hostTNode,this._hostLView);if(xy(e)){let n=lc(e,this._hostLView),r=uc(e),i=n[H].data[r+8];return new br(i,n)}else return new br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=P_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-nt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jo(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,es(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!E1(e),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new yc(Ci(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?u:this.parentInjector).get(Ar,null);_&&(o=_)}let l=Ci(c.componentType??{}),d=Jo(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,o);return this.insertImpl(f.hostView,a,es(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(jD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[qe],u=new wx(c,c[jt],c[qe]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return jc(s,i,o,r),e.attachToViewContainerRef(),Sy(Dd(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=P_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yo(this._lContainer,n);r&&(dc(Dd(this._lContainer),n),Pc(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yo(this._lContainer,n);return r&&dc(Dd(this._lContainer),n)!=null?new Xo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function P_(t){return t[sc]}function Dd(t){return t[sc]||(t[sc]=[])}function PA(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=hx(r,e,null,t),e[t.index]=n,Vc(e,n)),OA(n,e,t,r),new wx(n,t,e)}function NA(t,e){let n=t[ze],r=n.createComment(""),i=Bt(e,t),o=kh(n,i);return pc(n,o,r,aT(n,i),!1),r}var OA=FA,RA=()=>!1;function kA(t,e,n){return RA(t,e,n)}function FA(t,e,n,r){if(t[Dr])return;let i;n.type&8?i=cn(r):i=NA(e,n),t[Dr]=i}function Ex(t,e,n){return t[e]=n}function Mr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function VA(t,e,n,r){let i=Mr(t,e,n);return Mr(t,e+1,r)||i}function LA(t,e,n,r,i,o,s,a,c){let u=e.consts,l=Fc(e,t,4,s||null,cc(u,a));ux(e,n,l,cc(u,c)),Th(e,l);let d=l.tView=$h(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function mt(t,e,n,r,i,o,s,a){let c=fe(),u=Kn(),l=t+Lt,d=u.firstCreatePass?LA(l,u,c,e,n,r,i,o,s):u.data[l];ns(d,!1);let h=jA(u,c,d,t);Ch()&&Fh(u,c,h,d),Sr(h,c);let f=hx(h,c,h,d);return c[l]=f,Vc(c,f),kA(f,d,c),xh(d)&&ox(u,c,d),s!=null&&sx(c,d,a),mt}var jA=BA;function BA(t,e,n,r){return Dh(!0),e[ze].createComment("")}function Ix(t,e,n,r){return Mr(t,Tc(),n)?e+fh(n)+r:Si}function _t(t,e,n){let r=fe(),i=Tc();if(Mr(r,i,e)){let o=Kn(),s=my();cx(o,s,r,t,e,r[ze],n,!1)}return _t}function N_(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Hh(t,n,o[s],s,r)}var nh=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Td(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function UA(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),u=e[o],l=Td(o,c,o,u,n);if(l!==0){l<0&&t.updateValue(o,u),o++;continue}let d=t.at(s),h=e[a],f=Td(s,d,a,h,n);if(f!==0){f<0&&t.updateValue(s,h),s--,a--;continue}let y=n(o,c),_=n(s,d),x=n(o,u);if(Object.is(x,_)){let I=n(a,h);Object.is(I,y)?(t.swap(o,s),t.updateValue(s,h),a--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new xc,i??=R_(t,o,s,n),rh(t,r,o,x))t.updateValue(o,u),o++,s++;else if(i.has(x))r.set(y,t.detach(o)),s--;else{let I=t.create(o,e[o]);t.attach(o,I),o++,s++}}for(;o<=a;)O_(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let u=t.at(o),l=c.value,d=Td(o,u,o,l,n);if(d!==0)d<0&&t.updateValue(o,l),o++,c=a.next();else{r??=new xc,i??=R_(t,o,s,n);let h=n(o,l);if(rh(t,r,o,h))t.updateValue(o,l),o++,s++,c=a.next();else if(!i.has(h))t.attach(o,t.create(o,l)),o++,s++,c=a.next();else{let f=n(o,u);r.set(f,t.detach(o)),s--}}}for(;!c.done;)O_(t,r,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function rh(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function O_(t,e,n,r,i){if(rh(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function R_(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var xc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Nn(t,e,n){qh("NgControlFlow");let r=fe(),i=Tc(),o=ah(r,Lt+t),s=0;if(Mr(r,i,e)){let a=Ve(null);try{if(vx(o,s),e!==-1){let c=ch(r[H],Lt+e),u=Jo(o,c.tView.ssrId),l=Lc(r,c,n,{dehydratedView:u});jc(o,l,s,es(c,u))}}finally{Ve(a)}}else{let a=xx(o,s);a!==void 0&&(a[Ge]=n)}}var ih=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-nt}};function Ut(t){return t}var oh=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function $t(t,e,n,r,i,o,s,a,c,u,l,d,h){qh("NgControlFlow");let f=c!==void 0,y=fe(),_=a?s.bind(y[an][Ge]):s,x=new oh(f,_);y[Lt+t]=x,mt(t+1,e,n,r,i,o),f&&mt(t+2,c,u,l,d,h)}var sh=class extends nh{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-nt}at(e){return this.getLView(e)[Ge].$implicit}attach(e,n){let r=n[Bo];this.needsIndexUpdate||=e!==this.length,jc(this.lContainer,n,e,es(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$A(this.lContainer,e)}create(e,n){let r=Jo(this.lContainer,this.templateTNode.tView.ssrId);return Lc(this.hostLView,this.templateTNode,new ih(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Pc(e[H],e)}updateValue(e,n){this.getLView(e)[Ge].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ge].$index=e}getLView(e){return HA(this.lContainer,e)}};function Ht(t){let e=Ve(null),n=Ac();try{let r=fe(),i=r[H],o=r[n];if(o.liveCollection===void 0){let a=n+1,c=ah(r,a),u=ch(i,a);o.liveCollection=new sh(c,r,u)}else o.liveCollection.reset();let s=o.liveCollection;if(UA(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Tc(),c=s.length===0;if(Mr(r,a,c)){let u=n+2,l=ah(r,u);if(c){let d=ch(i,u),h=Jo(l,d.tView.ssrId),f=Lc(r,d,void 0,{dehydratedView:h});jc(l,f,0,es(d,h))}else vx(l,0)}}}finally{Ve(e)}}function ah(t,e){return t[e]}function $A(t,e){return Yo(t,e)}function HA(t,e){return xx(t,e)}function ch(t,e){return wh(t,e)}function GA(t,e,n,r,i,o){let s=e.consts,a=cc(s,i),c=Fc(e,t,2,r,a);return ux(e,n,c,cc(s,o)),c.attrs!==null&&Xd(c,c.attrs,!1),c.mergedAttrs!==null&&Xd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function F(t,e,n,r){let i=fe(),o=Kn(),s=Lt+t,a=i[ze],c=o.firstCreatePass?GA(s,o,i,e,n,r):o.data[s],u=qA(o,i,c,a,e,t);i[s]=u;let l=xh(c);return ns(c,!0),qy(a,u,c),(c.flags&32)!==32&&Ch()&&Fh(o,i,u,c),HD()===0&&Sr(u,i),GD(),l&&(ox(o,i,c),ix(o,c,i)),r!==null&&sx(i,c),F}function R(){let t=ln();cy()?YD():(t=t.parent,ns(t,!1));let e=t;WD(e)&&KD(),qD();let n=Kn();return n.firstCreatePass&&(Th(n,t),J_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&a1(e)&&N_(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&c1(e)&&N_(n,e,fe(),e.stylesWithoutHost,!1),R}function be(t,e,n,r){return F(t,e,n,r),R(),be}var qA=(t,e,n,r,i,o)=>(Dh(!0),jy(r,i,r1()));function ot(){return fe()}var vc="en-US";var zA=vc;function WA(t){JC(t,"Expected localeId to be defined"),typeof t=="string"&&(zA=t.toLowerCase().replace(/_/g,"-"))}function Bc(t){return!!t&&typeof t.then=="function"}function bx(t){return!!t&&typeof t.subscribe=="function"}function Ce(t,e,n,r){let i=fe(),o=Kn(),s=ln();return QA(o,i,i[ze],s,t,e,r),Ce}function KA(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Uo],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function QA(t,e,n,r,i,o,s){let a=xh(r),u=t.firstCreatePass&&nA(t),l=e[Ge],d=tA(e),h=!0;if(r.type&3||s){let _=Bt(r,e),x=s?s(_):_,I=d.length,M=s?N=>s(cn(N[r.index])):r.index,D=null;if(!s&&a&&(D=KA(t,e,i,r.index)),D!==null){let N=D.__ngLastListenerFn__||D;N.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,h=!1}else{o=F_(r,e,l,o,!1);let N=n.listen(x,i,o);d.push(o,N),u&&u.push(i,M,I,I+1)}}else o=F_(r,e,l,o,!1);let f=r.outputs,y;if(h&&f!==null&&(y=f[i])){let _=y.length;if(_)for(let x=0;x<_;x+=2){let I=y[x],M=y[x+1],O=e[I][M].subscribe(o),B=d.length;d.push(o,O),u&&u.push(i,r.index,B,-(B+1))}}}function k_(t,e,n,r){try{return tn(6,e,n),n(r)!==!1}catch(i){return px(t,i),!1}finally{tn(7,e,n)}}function F_(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Pr(t.index,e):e;Gh(a);let c=k_(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=k_(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ee(t=1){return n1(t)}function is(t,e,n){return Cx(t,"",e,"",n),is}function Cx(t,e,n,r,i){let o=fe(),s=Ix(o,e,n,r);if(s!==Si){let a=Kn(),c=my();cx(a,c,o,t,s,o[ze],i,!1)}return Cx}var Qh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XA;let t=e;return t})(),YA=Qh,ZA=class extends YA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Lc(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Xo(i)}};function XA(){return JA(ln(),fe())}function JA(t,e){return t.type&4?new ZA(e,t,Oc(t,e)):null}function oe(t,e=""){let n=fe(),r=Kn(),i=t+Lt,o=r.firstCreatePass?Fc(r,i,1,e,null):r.data[i],s=eS(r,n,o,e,t);n[i]=s,Ch()&&Fh(r,n,s,o),ns(o,!1)}var eS=(t,e,n,r,i)=>(Dh(!0),Q1(e[ze],r));function Qn(t){return Qe("",t,""),Qn}function Qe(t,e,n){let r=fe(),i=Ix(r,t,e,n);return i!==Si&&rA(r,Ac(),i),Qe}var Ti=class{},uh=class{};var wc=class extends Ti{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jd(this);let i=AD(e);this._bootstrapComponents=H1(i.bootstrap),this._r3Injector=ky(e,n,[{provide:Ti,useValue:this},{provide:Uh,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lh=class extends uh{constructor(e){super(),this.moduleType=e}create(e){return new wc(this.moduleType,e,[])}};function tS(t,e,n){return new wc(t,e,n)}function Yh(t,e,n,r){return nS(fe(),uy(),t,e,n,r)}function Dx(t,e,n,r,i){return rS(fe(),uy(),t,e,n,r,i)}function Tx(t,e){let n=t[e];return n===Si?void 0:n}function nS(t,e,n,r,i,o){let s=e+n;return Mr(t,s,i)?Ex(t,s+1,o?r.call(o,i):r(i)):Tx(t,s+1)}function rS(t,e,n,r,i,o,s){let a=e+n;return VA(t,a,i,o)?Ex(t,a+2,s?r.call(s,i,o):r(i,o)):Tx(t,a+2)}var Ja=null;function iS(t){Ja!==null&&(t.defaultEncapsulation!==Ja.defaultEncapsulation||t.preserveWhitespaces!==Ja.preserveWhitespaces)||(Ja=t)}var Wn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Ax=new Wn("17.1.0");var oS=new k("compilerOptions");var Sx=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new To(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zh=new k(""),os=new k(""),Uc=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Xh||(sS(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(T(re),T($c),T(os))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),$c=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Xh?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function sS(t){Xh=t}var Xh,aS=new k("Application Initializer"),Mx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Ne(aS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Bc(s))r.push(s);else if(bx(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cS=new k("appBootstrapListener");function uS(t,e,n){let r=new lh(n);return Promise.resolve(r)}function lS(){P0(()=>{throw new K(600,!1)})}function dS(t){return t.isBoundToModule}function hS(t,e,n){try{let r=n();return Bc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Px(t,e){return Array.isArray(e)?e.reduce(Px,t):et(et({},t),e)}var Hc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ne(Xy),this.afterRenderEffectManager=Ne(yx),this.componentTypes=[],this.components=[],this.isStable=Ne(Sx).hasPendingTasks.pipe(Ie(r=>!r)),this._injector=Ne(Ar)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof mc;if(!this._injector.get(Mx).done){let f=!o&&TD(r),y=!1;throw new K(405,y)}let a;o?a=r:a=this._injector.get(Uh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=dS(a)?void 0:this._injector.get(Ti),u=i||a.selector,l=a.create(Nr.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Zh,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ic(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;ic(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(cS,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ic(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new K(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ic(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function V_(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var fS=(()=>{let e=class e{constructor(){this.zone=Ne(re),this.applicationRef=Ne(Hc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pS(t){return[{provide:re,useFactory:t},{provide:Qo,multi:!0,useFactory:()=>{let e=Ne(fS,{optional:!0});return()=>e.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let e=Ne(_S);return()=>{e.initialize()}}},{provide:Xy,useFactory:gS}]}function gS(){let t=Ne(re),e=Ne(An);return n=>t.runOutsideAngular(()=>e.handleError(n))}function mS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _S=(()=>{let e=class e{constructor(){this.subscription=new He,this.initialized=!1,this.zone=Ne(re),this.pendingTasks=Ne(Sx)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yS(){return typeof $localize<"u"&&$localize.locale||vc}var Jh=new k("LocaleId",{providedIn:"root",factory:()=>Ne(Jh,z.Optional|z.SkipSelf)||yS()});var Nx=new k("PlatformDestroyListeners"),Ox=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=mA(i?.ngZone,mS({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=tS(r.moduleType,this.injector,pS(()=>o)),a=s.injector.get(An,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{ic(this._modules,s),c.unsubscribe()})}),hS(a,o,()=>{let c=s.injector.get(Mx);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(Jh,vc);return WA(u||vc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=Px({},i);return uS(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Hc);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new K(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Nx,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(T(Nr))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Vo=null,Rx=new k("AllowMultipleToken");function xS(t){if(Vo&&!Vo.get(Rx,!1))throw new K(400,!1);lS(),Vo=t;let e=t.get(Ox);return ES(t),e}function ef(t,e,n=[]){let r=`Platform: ${e}`,i=new k(r);return(o=[])=>{let s=kx();if(!s||s.injector.get(Rx,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):xS(vS(a,r))}return wS(i)}}function vS(t=[],e){return Nr.create({name:e,providers:[{provide:Sc,useValue:"platform"},{provide:Nx,useValue:new Set([()=>Vo=null])},...t]})}function wS(t){let e=kx();if(!e)throw new K(401,!1);return e}function kx(){return Vo?.get(Ox)??null}function ES(t){t.get(Nh,null)?.forEach(n=>n())}function tf(){return!1}var Fx=ef(null,"core",[]),Vx=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(T(Hc))},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let t=e;return t})();var rf=null;function zc(){return rf}function Bx(t){rf||(rf=t)}var Gc=class{},Yn=new k("DocumentToken");function Ux(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var nf=/\s+/,Lx=[],$x=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Lx,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(nf):Lx}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(nf):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(nf).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(je(rs),je(Rc))},e.\u0275dir=bc({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Tn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Hx=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new of,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){jx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){jx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(je(Kh),je(Qh))},e.\u0275dir=bc({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),of=class{constructor(){this.$implicit=null,this.ngIf=null}};function jx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${dt(e)}'.`)}var Gx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let t=e;return t})(),qx="browser",CS="server";function Rr(t){return t===CS}var qc=class{};var cf=class extends Gc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uf=class t extends cf{static makeCurrent(){Bx(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TS();return n==null?null:AS(n)}resetBaseElement(){ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ux(document.cookie,e)}},ss=null;function TS(){return ss=ss||document.querySelector("base"),ss?ss.getAttribute("href"):null}function AS(t){return new URL(t,document.baseURI).pathname}var lf=class{addToWindow(e){gt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new K(5103,!1);return o},gt.getAllAngularTestabilities=()=>e.getAllTestabilities(),gt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=gt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};gt.frameworkStabilizers||(gt.frameworkStabilizers=[]),gt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?zc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},SS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),df=new k("EventManagerPlugins"),Yx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new K(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(T(df),T(re))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Wc=class{constructor(e){this._doc=e}},sf="ng-app-id",Zx=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${sf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(sf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(sf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(T(Yn),T(Mc),T(Oh,8),T(Dt))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),af={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ff=/%COMP%/g,Xx="%COMP%",MS=`_nghost-${Xx}`,PS=`_ngcontent-${Xx}`,NS=!0,OS=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>NS});function RS(t){return PS.replace(ff,t)}function kS(t){return MS.replace(ff,t)}function Jx(t,e){return e.map(n=>n.replace(ff,t))}var Wx=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Rr(c),this.defaultRenderer=new as(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===on.ShadowDom&&(i=Et(et({},i),{encapsulation:on.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Kc?o.applyToHost(r):o instanceof cs&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case on.Emulated:s=new Kc(u,l,i,this.appId,d,a,c,h);break;case on.ShadowDom:return new hf(u,l,r,i,a,c,this.nonce,h);default:s=new cs(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(T(Yx),T(Zx),T(Mc),T(OS),T(Yn),T(Dt),T(re),T(Oh))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),as=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(af[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Kx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Kx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=af[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=af[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Or.DashCase|Or.Important)?e.style.setProperty(n,r,i&Or.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Or.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=zc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Kx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hf=class extends as{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Jx(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cs=class extends as{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Jx(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kc=class extends cs{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=RS(u),this.hostAttr=kS(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},FS=(()=>{let e=class e extends Wc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(T(Yn))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Qx=["alt","control","meta","shift"],VS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},jS=(()=>{let e=class e extends Wc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zc().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Qx.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=VS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Qx.forEach(a=>{if(a!==o){let c=LS[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(T(Yn))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})();function BS(){uf.makeCurrent()}function US(){return new An}function $S(){return Fy(document),document}var HS=[{provide:Dt,useValue:qx},{provide:Nh,useValue:BS,multi:!0},{provide:Yn,useFactory:$S,deps:[]}],ev=ef(Fx,"browser",HS),GS=new k(""),qS=[{provide:os,useClass:lf,deps:[]},{provide:Zh,useClass:Uc,deps:[re,$c,os]},{provide:Uc,useClass:Uc,deps:[re,$c,os]}],zS=[{provide:Sc,useValue:"root"},{provide:An,useFactory:US,deps:[]},{provide:df,useClass:FS,multi:!0,deps:[Yn,re,Dt]},{provide:df,useClass:jS,multi:!0,deps:[Yn]},Wx,Zx,Yx,{provide:Zo,useExisting:Wx},{provide:qc,useClass:SS,deps:[]},[]],tv=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Mc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(T(GS,12))},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({providers:[...zS,...qS],imports:[Gx,Vx]});let t=e;return t})();var KS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GL=Et(et({},KS),{"[class.ng-submitted]":"isSubmitted"});var QS=new k("CallSetDisabledState",{providedIn:"root",factory:()=>nv}),nv="always";var YS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let t=e;return t})();var ZS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({imports:[YS]});let t=e;return t})();var rv=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:QS,useValue:r.callSetDisabledState??nv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({imports:[ZS]});let t=e;return t})();var dn=(()=>{let e=class e{constructor(){this.Array_Tabs=[{Tab_Name:"\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",icon:"assets/img/home.png",Active:!0},{Tab_Name:"\u0627\u0644\u0633\u0644\u0629",icon:"assets/img/cart.png",Active:!1},{Tab_Name:"\u0627\u0644\u0645\u0646\u064A\u0648",icon:"assets/img/cart.png",Active:!1,hidden:!0}],this.Array_Order=[],this.All_Menu=[{Name:"\u0627\u0644\u0628\u0631\u062C\u0640\u0640\u0640\u0631",Image:"assets/img/burger.png",Items:[{id:2,item_Name:"\u0628\u0631\u062C\u0631 \u0643\u0644\u0627\u0633\u064A\u0643",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:65},{Size:"M",Price:45},{Size:"L",Price:35}]},{id:3,item_Name:"\u0628\u0631\u062C\u0631 \u0645\u064A\u0643\u0633 \u062A\u0634\u064A\u0632",item_Detail:"\u062A\u0634\u064A\u0632 \u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0635\u0648\u0635 \u062C\u0628\u0646\u0629 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:70},{Size:"M",Price:50},{Size:"L",Price:40}]},{id:1,item_Name:"\u0628\u0631\u062C\u0631 \u0645\u0634\u0631\u0648\u0645",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u0645\u0634\u0631\u0648\u0645 - \u0628\u0635\u0644 \u0645\u0643\u0631\u0645\u0644 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:300},{Size:"M",Price:200},{Size:"L",Price:100}]}]},{Name:"\u0627\u0644\u0640\u0640\u0640\u0631\u0648\u0644",Image:"assets/img/roll-66.png",Items:[{id:1,item_Name:"\u0628\u0637\u0627\u0637\u0633 \u0631\u0648\u0648\u0644",item_Detail:"\u0628\u0637\u0627\u0637\u0633 - \u062E\u0636\u0627\u0631 \u0645\u062E\u0644\u0644 \u0645\u064A\u0643\u0633 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:65}]},{id:2,item_Name:"\u0633\u062C\u0642 \u062C\u0631\u064A\u0644",item_Detail:"\u0633\u062C\u0642 \u0645\u0634\u0648\u064A - \u0641\u0644\u0641\u0644 \u0648\u0628\u0635\u0644 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:65}]}]},{Name:"\u0627\u0644\u0645\u0642\u0628\u0644\u0627\u062A",Image:"assets/img/french-fries.png",Items:[{id:1,item_Name:"\u0637\u0628\u0642 \u0628\u0637\u0627\u0637\u0633",item_Detail:"",item_Price:[{Size:"One Size",Price:10}]},{id:2,item_Name:"\u0637\u0628\u0642 \u0628\u0637\u0627\u0637\u0633 \u0628\u0627\u0644\u062C\u0628\u0646\u0629",item_Detail:"",item_Price:[{Size:"One Size",Price:15}]}]},{Name:"\u0627\u0644\u062D\u0640\u0640\u0640\u0644\u0648",Image:"assets/img/cake.png",Items:[{id:1,item_Name:"\u0627\u0644\u062D\u0644\u0648 \u0628\u0646\u062F\u0642",item_Detail:"\u0646\u0648\u062A\u064A\u0644\u0627 - \u0634\u0648\u0643\u0644\u0627\u062A\u0629 \u0628\u064A\u0636\u0629 - \u0633\u0648\u062F\u0627\u0646\u064A",item_Price:[{Size:"One Size",Price:10}]},{id:2,item_Name:"\u0633\u0643\u0644\u0627\u0646\u0633",item_Detail:"\u062D\u0644\u0627\u0648\u0629 \u0628\u0627\u0644\u0642\u0634\u0637\u0629",item_Price:[{Size:"One Size",Price:10}]},{id:3,item_Name:"\u0627\u0644\u062D\u0644\u0648 \u0628\u0632\u064A\u0627\u062F\u0629",item_Detail:"\u0646\u0648\u062A\u064A\u0644\u0627 - \u0634\u0643\u0648\u0644\u0627\u062A\u0647 \u0628\u064A\u0636\u0629 - \u0635\u0648\u0635 \u0643\u0631\u0627\u0645\u064A\u0644 - \u0623\u0648\u0631\u064A\u0648",item_Price:[{Size:"One Size",Price:10}]}]}]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XS(t,e){if(t&1){let n=ot();F(0,"button",3),Ce("click",function(){let o=rt(n).$implicit,s=ee();return it(s.Open_Menu(o))}),be(1,"img",4),oe(2),R()}if(t&2){let n=e.$implicit;$(),_t("src",n.Image,Pn),$(),Qe(" ",n.Name," ")}}var iv=(()=>{let e=class e{constructor(r){this.Serv_=r}get All_Menu(){return this.Serv_.All_Menu}Open_Menu(r){this.Serv_.Selected_Menu_Name=r.Name,this.Serv_.Array_Tabs.map(i=>{i.Active=!1}),this.Serv_.Array_Tabs.filter(i=>i.Tab_Name==="\u0627\u0644\u0645\u0646\u064A\u0648")[0].Active=!0}};e.\u0275fac=function(i){return new(i||e)(je(dn))},e.\u0275cmp=un({type:e,selectors:[["app-page-home"]],decls:7,vars:0,consts:[["dir","rtl",1,"slide","slide1"],[1,"slide-head"],[1,"slide-body"],[3,"click"],[3,"src"]],template:function(i,o){i&1&&(F(0,"div",0)(1,"div",1)(2,"h4"),oe(3,"\u0627\u0644\u0642\u0648\u0627\u0626\u0645"),R()(),F(4,"div",2),$t(5,XS,3,2,"button",null,Ut),R()()),i&2&&($(5),Ht(o.All_Menu))},styles:[".slide1[_ngcontent-%COMP%]{padding:0 8px}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(0deg,#f6b825,#f6b8265e);outline:none;text-shadow:0px 1px 2px rgba(0,0,0,.425);font-weight:700;border:none;border-radius:16px;padding:22px 32px;color:#fff;font-size:14px;margin:25px 4px;width:50%;max-width:150px;cursor:pointer;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,#f6b725b7,#f6b82656)}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:-55px 0 14px;width:74px;filter:drop-shadow(0px 10px 6px rgba(0,0,0,.2))}"]});let t=e;return t})();function eM(t,e){if(t&1){let n=ot();F(0,"button",9),Ce("click",function(){rt(n);let i=ee().$implicit,o=ee().$implicit,s=ee();return it(s.Add_To_Trash_Order(o,i))}),oe(1,"\u0627\u0636\u0641 \u0627\u0644\u064A \u0627\u0644\u0633\u0644\u0629"),R()}}function tM(t,e){if(t&1){let n=ot();F(0,"div",13),Ce("click",function(){rt(n);let i=ee(2).$implicit,o=ee().$implicit,s=ee();return it(s.Remove_Ordered_Count_Object(o,i))}),be(1,"img",14),R()}}function nM(t,e){if(t&1){let n=ot();F(0,"div",15),Ce("click",function(){rt(n);let i=ee(2).$implicit,o=ee(2);return it(o.Subtract_Order_item(i))}),R()}}function rM(t,e){if(t&1){let n=ot();F(0,"div",10)(1,"div",11),Ce("click",function(){rt(n);let i=ee().$implicit,o=ee().$implicit,s=ee();return it(s.Add_To_Trash_Order(o,i))}),R(),F(2,"label"),oe(3),R(),mt(4,tM,2,0,"div",12)(5,nM,1,0),R()}if(t&2){let n=ee().$implicit;$(3),Qn(n.Ordered_Count==null?null:n.Ordered_Count.Count),$(),Nn(4,(n.Ordered_Count==null?null:n.Ordered_Count.Count)==1?4:(n.Ordered_Count==null?null:n.Ordered_Count.Count)>1?5:-1)}}function iM(t,e){if(t&1&&(F(0,"div",8)(1,"h5"),oe(2),R(),F(3,"span"),oe(4),R(),mt(5,eM,2,0,"button")(6,rM,6,2),R()),t&2){let n=e.$implicit;$(2),Qn(n.Size),$(2),Qe("",n.Price," \u062C.\u0645"),$(),Nn(5,n.Ordered_Count?6:5)}}function oM(t,e){if(t&1&&(F(0,"div",0)(1,"div",1),be(2,"img",2),F(3,"div",3),oe(4),R()(),F(5,"div",4)(6,"div",5)(7,"div",6),oe(8),R()(),F(9,"div",7),$t(10,iM,7,3,"div",16,Ut),R()()()),t&2){let n=e.$implicit,r=ee();$(2),is("src",r.Get_Array_Menu().Image,Pn),$(2),Qe(" ",n.item_Name," "),$(4),Qe(" ",n.item_Detail," "),$(2),Ht(n.item_Price)}}var ov=(()=>{let e=class e{constructor(r){this.Serv_=r}ngOnInit(){}get All_Menu(){return this.Serv_.All_Menu}get Selected_Menu_Name(){return this.Serv_.Selected_Menu_Name}Get_Array_Menu(){return this.All_Menu.filter(r=>r.Name===this.Selected_Menu_Name)[0]}Add_To_Trash_Order(r,i){i.Ordered_Count?i.Ordered_Count.Count++:i.Ordered_Count={Count:1};var o={id:r.id,item_Name:r.item_Name,item_Detail:r.item_Detail,Size:i.Size,item_Price:i,Menu_Name:this.Selected_Menu_Name};this.Serv_.Array_Order.findIndex(c=>c.id===o.id&&c.item_Name===o.item_Name&&c.Size===o.Size)!=-1||this.Serv_.Array_Order.push(o)}Subtract_Order_item(r){r.Ordered_Count.Count>1&&r.Ordered_Count.Count--}Remove_Ordered_Count_Object(r,i){if(i.Ordered_Count){delete i.Ordered_Count;let o=this.Serv_.Array_Order.findIndex(s=>s.id===r.id&&s.item_Name===r.item_Name&&s.Size===i.Size);this.Serv_.Array_Order.splice(o,1)}}};e.\u0275fac=function(i){return new(i||e)(je(dn))},e.\u0275cmp=un({type:e,selectors:[["app-page-menu"]],decls:2,vars:0,consts:[["dir","rtl",1,"card-menu"],[1,"pic-price"],[3,"src"],[1,"item-title"],[1,"content"],[1,"detail"],[1,"detail-content"],[1,"price-list"],[1,"price-list-item"],[3,"click"],[1,"Changer"],[1,"Plus",3,"click"],["class","Remove"],[1,"Remove",3,"click"],["src","assets/img/trash.png","width","16"],[1,"Subtract",3,"click"],["class","price-list-item"],["class","card-menu","dir","rtl"]],template:function(i,o){i&1&&$t(0,oM,12,3,"div",17,Ut),i&2&&Ht(o.Get_Array_Menu().Items)},styles:['.container[_ngcontent-%COMP%]{padding:8px}.card-menu[_ngcontent-%COMP%]{background-color:#fff;margin:32px 6px;border-radius:12px;box-shadow:0 1px 6px #00000024;padding:16px 0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0 16px}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-35px;width:74px}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#ff6564;font-size:large;text-shadow:0px 1px 1px rgba(10,10,10,.0941176471);margin-top:6px;white-space:nowrap}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-evenly}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:4px 6px;padding:0 6px;flex:1}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#f19215;text-shadow:0px 1px 1px rgba(255,117,4,.3019607843)}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:small;color:#7d7d81}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row-reverse;width:100%;border-radius:6px;overflow:hidden;margin:8px 0}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{width:30%;text-align:center;font-size:x-large;position:relative}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%], .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%]{padding:20px 0;width:30%;text-align:center;font-size:x-large;position:relative;cursor:pointer}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after{content:"+";color:#fff}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{content:"-";color:#747474}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%]{background-color:#f19215}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%], .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{background-color:#e0e0e0}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center;justify-content:center;width:40%}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin:12px 0;font-size:small;text-align:center}button[_ngcontent-%COMP%]{margin:8px 0;outline:none;border-radius:8px;border:none;padding:10px 14px;background-color:#f8a528;color:#fff}']});let t=e;return t})();function aM(t,e){if(t&1){let n=ot();F(0,"div",14),Ce("click",function(){rt(n);let i=ee().$implicit,o=ee();return it(o.Remove_Ordered(i))}),be(1,"img",15),R()}}function cM(t,e){if(t&1){let n=ot();F(0,"div",16),Ce("click",function(){rt(n);let i=ee().$implicit,o=ee();return it(o.Subtract_Order(i))}),R()}}function uM(t,e){if(t&1){let n=ot();F(0,"div",5)(1,"div",6)(2,"span",7),oe(3),F(4,"label"),oe(5),R(),oe(6," )"),R(),F(7,"span",8),oe(8),R()(),F(9,"div",9)(10,"div",10)(11,"span"),oe(12),R()(),F(13,"div",11)(14,"div",12),Ce("click",function(){let o=rt(n).$implicit,s=ee();return it(s.Plus_Order(o))}),R(),F(15,"label"),oe(16),R(),mt(17,aM,2,0,"div",13)(18,cM,1,0),R()()()}if(t&2){let n=e.$implicit;$(3),Qe("",n.item_Name," ( "),$(2),Qe("\u062D\u062C\u0645 : ",n.Size,""),$(3),Qe(" ",n.item_Detail," "),$(4),Qe("",n.item_Price.Price," \u062C.\u0645"),$(4),Qn(n.item_Price.Ordered_Count.Count),$(),Nn(17,n.item_Price.Ordered_Count.Count==1?17:n.item_Price.Ordered_Count.Count>1?18:-1)}}var sv=(()=>{let e=class e{constructor(r){this.Serv_=r}get Array_Order(){return this.Serv_.Array_Order}Plus_Order(r){r.item_Price.Ordered_Count.Count++}Subtract_Order(r){r.item_Price.Ordered_Count.Count--}Remove_Ordered(r){let i=this.Serv_.Array_Order.findIndex(c=>c.id===r.id&&c.item_Name===r.item_Name&&c.Size===r.Size);this.Serv_.Array_Order.splice(i,1);let o=this.Serv_.All_Menu.filter(c=>c.Name===r.Menu_Name)[0].Items,s=o.findIndex(c=>c.id===r.id&&c.item_Name===r.item_Name),a=o[s].item_Price.findIndex(c=>c.Size===r.Size);delete o[s].item_Price[a].Ordered_Count}Get_Total_Order_Price(){let r=0;return this.Serv_.Array_Order.map(i=>{let o=i.item_Price.Price,s=i.item_Price.Ordered_Count.Count;r+=o*s}),r}};e.\u0275fac=function(i){return new(i||e)(je(dn))},e.\u0275cmp=un({type:e,selectors:[["app-page-orders"]],decls:15,vars:1,consts:[[1,"Orders"],[1,"Order-Total"],[1,"Order-Pay-detail"],[1,"Title"],[1,"Tota-pay"],[1,"Order-item"],[1,"content"],[1,"item-Name"],[1,"item-detail"],[1,"count-item"],[1,"price"],[1,"Changer"],[1,"Plus",3,"click"],["class","Remove"],[1,"Remove",3,"click"],["src","assets/img/trash.png","width","16"],[1,"Subtract",3,"click"],["class","Order-item"]],template:function(i,o){i&1&&(F(0,"div",0)(1,"h4"),oe(2,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0644\u0628"),R(),$t(3,uM,19,6,"div",17,Ut),R(),F(5,"div",1)(6,"h4"),oe(7,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062F\u0641\u0639"),R(),F(8,"div",2)(9,"div",3)(10,"h5"),oe(11,"\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u064A"),R()(),F(12,"div",4)(13,"h5"),oe(14),R()()()()),i&2&&($(3),Ht(o.Array_Order),$(11),Qe("",o.Get_Total_Order_Price()," \u062C.\u0645"))},styles:['.Orders[_ngcontent-%COMP%], .Order-Total[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:8px 12px 25px;margin:12px;box-shadow:0 4px 8px #0000002e}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]{display:flex;margin:45px 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:75%}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-Name[_ngcontent-%COMP%]{color:#f19215;font-size:large;margin-bottom:6px}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]{font-size:small}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:30%;align-items:center;padding:0 16px 0 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{white-space:nowrap;margin-bottom:6px}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row-reverse;width:100%;border-radius:6px;overflow:hidden;margin:8px 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{width:30%;text-align:center;font-size:x-large;position:relative}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%], .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%]{padding:20px 0;width:30%;text-align:center;font-size:x-large;position:relative;cursor:pointer}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after{content:"+";color:#fff}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{content:"-";color:#747474}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%]{background-color:#f19215}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%], .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{background-color:#e0e0e0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center;justify-content:center;width:40%}.Order-Total[_ngcontent-%COMP%]{display:flex;flex-direction:column}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding:0 32px}']});let t=e;return t})();function dM(t,e){if(t&1&&(F(0,"div"),oe(1),R()),t&2){let n=ee();$(),Qn(n.Get_Count_Array_Order_Number())}}function hM(t,e){if(t&1){let n=ot();F(0,"div",8),Ce("click",function(){let o=rt(n).$implicit,s=ee();return it(s.Select_Menu(o))}),be(1,"img",4),R()}if(t&2){let n=e.$implicit;$(),_t("src",n.Image,Pn)}}var av=t=>({Active:t}),fM=(t,e)=>({Open:t,Close:e}),cv=(()=>{let e=class e{constructor(r){this.Serv_=r,this.Open=""}get All_Menu(){return this.Serv_.All_Menu}get Selected_Menu_Name(){return this.Serv_.Selected_Menu_Name}Toggle_Menus(){console.log(...gM("3796885533_19_4_19_39_4",this.Serv_.Array_Order)),this.Open=="Yes"?this.Open="No":this.Open="Yes"}Get_Selected_Menu_Image(){return this.Selected_Menu?this.Selected_Menu.Image:this.All_Menu[0].Image}Active_Tab(r){this.Serv_.Array_Tabs.map(o=>{o.Active=!1});var i=this.Serv_.Array_Tabs.filter(o=>o.Tab_Name===r)[0];i.Active=!0}Get_Tab_Active(r){return this.Serv_.Array_Tabs.filter(i=>i.Tab_Name===r)[0].Active}Select_Menu(r){this.Selected_Menu=r,this.Serv_.Selected_Menu_Name=r.Name,this.Toggle_Menus(),this.Active_Tab("\u0627\u0644\u0645\u0646\u064A\u0648")}Get_Count_Array_Order_Number(){let r=0;return this.Serv_.Array_Order.map(i=>{r+=i.item_Price.Ordered_Count.Count}),r}};e.\u0275fac=function(i){return new(i||e)(je(dn))},e.\u0275cmp=un({type:e,selectors:[["app-nav-bar"]],decls:15,vars:12,consts:[[1,"container"],[1,"cart",3,"ngClass","click"],["src","assets/img/cart.png"],[1,"Menu",3,"click"],[3,"src"],[1,"Other-Menu",3,"ngClass"],[3,"ngClass","click"],["src","assets/img/home.png"],[3,"click"]],template:function(i,o){i&1&&(F(0,"div",0)(1,"button",1),Ce("click",function(){return o.Active_Tab("\u0627\u0644\u0633\u0644\u0629")}),be(2,"img",2),F(3,"span"),oe(4,"\u0627\u0644\u0633\u0644\u0629"),R(),mt(5,dM,2,1,"div"),R(),F(6,"button",3),Ce("click",function(){return o.Toggle_Menus()}),be(7,"img",4),R(),F(8,"div",5),$t(9,hM,2,1,"div",null,Ut),R(),F(11,"button",6),Ce("click",function(){return o.Active_Tab("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629")}),be(12,"img",7),F(13,"span"),oe(14,"\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),R()()()),i&2&&($(),_t("ngClass",Yh(5,av,o.Get_Tab_Active("\u0627\u0644\u0633\u0644\u0629"))),$(4),Nn(5,o.Get_Count_Array_Order_Number()>0?5:-1),$(2),_t("src",o.Get_Selected_Menu_Image(),Pn),$(),_t("ngClass",Dx(7,fM,o.Open=="Yes",o.Open=="No")),$(),Ht(o.All_Menu),$(2),_t("ngClass",Yh(10,av,o.Get_Tab_Active("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"))))},dependencies:[$x],styles:[".container[_ngcontent-%COMP%]{position:fixed;z-index:1;bottom:0;min-height:70px;width:100%;background-color:#fff;box-shadow:0 -4px 18px #0001;display:flex;justify-content:space-evenly;border-radius:100% 100% 0% 0%;border-top:5px solid rgb(212,212,212)}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;outline:none;width:65px;height:65px;margin:-35px 0 0;border-radius:100%;box-shadow:0 6px 18px #00000014;border:1px solid rgb(196,196,196);background:#00000002;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.container[_ngcontent-%COMP%]   button.Active[_ngcontent-%COMP%]{border:2px solid rgb(252,215,181);box-shadow:0 6px 15px #c2c1c1,inset 0 0 15px #f7ce83}.container[_ngcontent-%COMP%]   button.Active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#cf8c0e}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;filter:opacity(.6)}.container[_ngcontent-%COMP%]   button.cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-5px}.container[_ngcontent-%COMP%]   button.cart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;background-color:#f75353;color:#ffdede;display:flex;justify-content:center;align-items:center;padding:4px;min-width:20px;min-height:20px;font-weight:700;font-size:12px;border-radius:100px;margin-top:-8px;margin-left:-58px;font-family:Arial,Helvetica,sans-serif}.container[_ngcontent-%COMP%]   button.Menu[_ngcontent-%COMP%]{margin:-55px 0 0;background-color:#ffc40041;border:1px solid rgb(255,153,0);width:75px;height:75px}.container[_ngcontent-%COMP%]   button.Menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;filter:opacity(1);filter:drop-shadow(0px 1px 0px rgba(0,0,0,.644))}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:gray;position:absolute;white-space:nowrap;bottom:-28px}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]{position:absolute;display:flex;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#ffd64d;border:1px solid rgb(255,153,0);box-shadow:0 0 20px #fff;width:45px;height:45px;border-radius:100%;display:flex;justify-content:center;align-items:center;position:absolute}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;filter:drop-shadow(0px 1px 0px rgba(0,0,0,.644))}@keyframes _ngcontent-%COMP%_child1-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(-215%,-220%);opacity:1}}@keyframes _ngcontent-%COMP%_child2-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(-115%,-300%);opacity:1}}@keyframes _ngcontent-%COMP%_child3-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(10%,-300%);opacity:1}}@keyframes _ngcontent-%COMP%_child4-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(115%,-220%);opacity:1}}@keyframes _ngcontent-%COMP%_child1-Close{0%{transform:translate(-215%,-220%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child2-Close{0%{transform:translate(-115%,-300%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child3-Close{0%{transform:translate(10%,-300%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child4-Close{0%{transform:translate(115%,-220%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_child1-Close .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:5ms}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_child2-Close .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.1s}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_child3-Close .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.2s}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_child4-Close .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.3s}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_child1-Open .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-215%,-220%);animation-delay:5ms;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_child2-Open .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-115%,-300%);animation-delay:.1s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_child3-Open .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(10%,-300%);animation-delay:.2s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_child4-Open .9s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(115%,-220%);animation-delay:.3s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{opacity:0}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:translate(-115%,-300%);transform:translate(-50%,-150%)}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:translate(10%,-300%);transform:translate(-50%,-150%)}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:translate(115%,-220%);transform:translate(-50%,-150%)}"]});let t=e;return t})();function pM(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)(`/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x466d(){var _0x11aee3=['','[object\\x20Map]','_WebSocketClass','indexOf','stackTraceLimit','timeEnd','nodeModules','_type','_isUndefined','join','hrtime','getOwnPropertySymbols','depth','astro','reduceLimits','111408sfzkxN','[object\\x20Array]','String','hostname','level','expId','_allowedToConnectOnSend','getPrototypeOf','allStrLength','getOwnPropertyNames','defineProperty','root_exp','host','autoExpandPreviousObjects','null','https://tinyurl.com/37x8b79t','global','method','127.0.0.1','_getOwnPropertyNames','positiveInfinity','performance','88190AnCzxP','nan','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help;\\x20also\\x20see\\x20','location','49834','__es'+'Module','onclose','strLength','_setNodeQueryPath','_ws','_console_ninja','_inBrowser',':logPointId:','replace','_setNodeId','1.0.0','message','getter','autoExpandLimit','symbol','...','WebSocket','value','default','sort','_cleanNode','toString','funcName','elapsed','readyState',["localhost","127.0.0.1","example.cypress.io","Mahmoud","192.168.1.104"],'count','unshift','_HTMLAllCollection','NEXT_RUNTIME','_p_','resolveGetters','push','onerror','noFunctions','_processTreeNodeResult','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','autoExpandMaxDepth','_isPrimitiveType','_allowedToSend','_isSet','gateway.docker.internal','data','unknown','split','_keyStrRegExp','Number','1706293989599','getWebSocketClass','_regExpToString','_isNegativeZero','edge','_property','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_objectToString','array','getOwnPropertyDescriptor','_consoleNinjaAllowedToStart','_hasSetOnItsPath','string','prototype','function','catch','props','close','now','_console_ninja_session','name','url','autoExpand','reload','capped','_setNodePermissions','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host,\\x20see\\x20','stack','\\x20browser','error','pathToFileURL','totalStrLength','Symbol','rootExpression','_attemptToReconnectShortly','length','_getOwnPropertyDescriptor','warn','_connectToHostNow','sortProps','port','onopen','env','constructor','unref','_Symbol','Boolean','_blacklistedProperty','30bnrOto','object','stringify','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','125TrInin','timeStamp','_getOwnPropertySymbols','_numberRegExp','current','_disposeWebsocket','_setNodeExpandableState','3239187UKFbPc','_hasMapOnItsPath','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help;\\x20also\\x20see\\x20','Map','versions','negativeZero','_connectAttemptCount','concat','NEGATIVE_INFINITY','setter','_socket','create','ws://','_addFunctionsNode','68096GJQmHS','index','_inNextEdge','_quotedRegExp','_setNodeLabel','_setNodeExpressionPath','132XkqITG','POSITIVE_INFINITY','_undefined','_reconnectTimeout','Buffer','RegExp','disabledLog','trace','boolean','then','hits','elements','_capIfString','forEach','_treeNodePropertiesAfterFullValue','_WebSocket','parent','substr','4166424WXfJvc','_dateToString','call','process','_maxConnectAttemptCount','cappedProps','map','_addObjectProperty','[object\\x20Date]','date','console','Error','\\x20server','Set','test','_propertyName','_sortProps','343150OHdrjk','includes','_connected','negativeInfinity','time','slice','pop','bind','isArray','_addLoadNode','_isMap','path','type','[object\\x20BigInt]','_isPrimitiveWrapperType','bigint','_connecting','_additionalMetadata','node','valueOf','number','_sendErrorMessage',"c:\\\\Users\\\\progr\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-1.0.274\\\\node_modules",'isExpressionToEvaluate','autoExpandPropertyCount','enumerable','send','_hasSymbolPropertyOnItsPath','_webSocketErrorDocsLink','_addProperty','perf_hooks','log','expressionsToEvaluate','ws/index.js','_p_length','undefined','serialize','_treeNodePropertiesBeforeFullValue'];_0x466d=function(){return _0x11aee3;};return _0x466d();}var _0x1097a9=_0xb830;(function(_0x41ce87,_0x3f724c){var _0x480637=_0xb830,_0x430d17=_0x41ce87();while(!![]){try{var _0x179903=-parseInt(_0x480637(0xda))/0x1+parseInt(_0x480637(0x8f))/0x2+-parseInt(_0x480637(0x13e))/0x3*(-parseInt(_0x480637(0x157))/0x4)+-parseInt(_0x480637(0x142))/0x5*(-parseInt(_0x480637(0x15d))/0x6)+-parseInt(_0x480637(0x149))/0x7+parseInt(_0x480637(0xc4))/0x8+parseInt(_0x480637(0x16f))/0x9;if(_0x179903===_0x3f724c)break;else _0x430d17['push'](_0x430d17['shift']());}catch(_0x156003){_0x430d17['push'](_0x430d17['shift']());}}}(_0x466d,0x41808));var j=Object[_0x1097a9(0x154)],H=Object[_0x1097a9(0xce)],G=Object[_0x1097a9(0x117)],ee=Object[_0x1097a9(0xcd)],te=Object[_0x1097a9(0xcb)],ne=Object[_0x1097a9(0x11b)]['hasOwnProperty'],re=(_0x50999f,_0x156e6e,_0x506dcc,_0x3f0921)=>{var _0x55f619=_0x1097a9;if(_0x156e6e&&typeof _0x156e6e=='object'||typeof _0x156e6e=='function'){for(let _0x352071 of ee(_0x156e6e))!ne['call'](_0x50999f,_0x352071)&&_0x352071!==_0x506dcc&&H(_0x50999f,_0x352071,{'get':()=>_0x156e6e[_0x352071],'enumerable':!(_0x3f0921=G(_0x156e6e,_0x352071))||_0x3f0921[_0x55f619(0xa8)]});}return _0x50999f;},x=(_0x57d8e5,_0x33682a,_0x3818fd)=>(_0x3818fd=_0x57d8e5!=null?j(te(_0x57d8e5)):{},re(_0x33682a||!_0x57d8e5||!_0x57d8e5[_0x1097a9(0xdf)]?H(_0x3818fd,_0x1097a9(0xf1),{'value':_0x57d8e5,'enumerable':!0x0}):_0x3818fd,_0x57d8e5)),X=class{constructor(_0xc5b3e8,_0x3dcc6d,_0x489c49,_0x4726ff,_0x33ee99){var _0x43f9f0=_0x1097a9;this[_0x43f9f0(0xd4)]=_0xc5b3e8,this[_0x43f9f0(0xd0)]=_0x3dcc6d,this['port']=_0x489c49,this['nodeModules']=_0x4726ff,this['dockerizedApp']=_0x33ee99,this[_0x43f9f0(0x106)]=!0x0,this['_allowedToConnectOnSend']=!0x0,this[_0x43f9f0(0x91)]=!0x1,this[_0x43f9f0(0x9f)]=!0x1,this['_inNextEdge']=_0xc5b3e8['process']?.['env']?.[_0x43f9f0(0xfc)]===_0x43f9f0(0x112),this[_0x43f9f0(0xe5)]=!this['global'][_0x43f9f0(0x172)]?.['versions']?.['node']&&!this['_inNextEdge'],this[_0x43f9f0(0xb7)]=null,this[_0x43f9f0(0x14f)]=0x0,this[_0x43f9f0(0x173)]=0x14,this['_webSocketErrorDocsLink']=_0x43f9f0(0xd3),this[_0x43f9f0(0xa4)]=(this[_0x43f9f0(0xe5)]?_0x43f9f0(0xdc):_0x43f9f0(0x14b))+this[_0x43f9f0(0xab)];}async[_0x1097a9(0x10f)](){var _0x3f172e=_0x1097a9;if(this[_0x3f172e(0xb7)])return this[_0x3f172e(0xb7)];let _0x2f2708;if(this[_0x3f172e(0xe5)]||this[_0x3f172e(0x159)])_0x2f2708=this[_0x3f172e(0xd4)][_0x3f172e(0xef)];else{if(this[_0x3f172e(0xd4)][_0x3f172e(0x172)]?.[_0x3f172e(0x16c)])_0x2f2708=this[_0x3f172e(0xd4)]['process']?.[_0x3f172e(0x16c)];else try{let _0xbbe394=await import(_0x3f172e(0x9a));_0x2f2708=(await import((await import(_0x3f172e(0x123)))[_0x3f172e(0x12c)](_0xbbe394[_0x3f172e(0xbe)](this[_0x3f172e(0xbb)],_0x3f172e(0xb0)))[_0x3f172e(0xf4)]()))[_0x3f172e(0xf1)];}catch{try{_0x2f2708=require(require(_0x3f172e(0x9a))[_0x3f172e(0xbe)](this['nodeModules'],'ws'));}catch{throw new Error(_0x3f172e(0x141));}}}return this['_WebSocketClass']=_0x2f2708,_0x2f2708;}['_connectToHostNow'](){var _0x4912c3=_0x1097a9;this[_0x4912c3(0x9f)]||this[_0x4912c3(0x91)]||this['_connectAttemptCount']>=this[_0x4912c3(0x173)]||(this[_0x4912c3(0xca)]=!0x1,this[_0x4912c3(0x9f)]=!0x0,this[_0x4912c3(0x14f)]++,this[_0x4912c3(0xe3)]=new Promise((_0x5b2f9b,_0x152695)=>{var _0x2c9355=_0x4912c3;this[_0x2c9355(0x10f)]()[_0x2c9355(0x166)](_0x44b663=>{var _0x284ca2=_0x2c9355;let _0x2f04a8=new _0x44b663(_0x284ca2(0x155)+(!this['_inBrowser']&&this['dockerizedApp']?_0x284ca2(0x108):this[_0x284ca2(0xd0)])+':'+this[_0x284ca2(0x136)]);_0x2f04a8[_0x284ca2(0x100)]=()=>{var _0x295ee6=_0x284ca2;this[_0x295ee6(0x106)]=!0x1,this['_disposeWebsocket'](_0x2f04a8),this[_0x295ee6(0x130)](),_0x152695(new Error('logger\\x20websocket\\x20error'));},_0x2f04a8[_0x284ca2(0x137)]=()=>{var _0x1e9f77=_0x284ca2;this['_inBrowser']||_0x2f04a8[_0x1e9f77(0x153)]&&_0x2f04a8['_socket'][_0x1e9f77(0x13a)]&&_0x2f04a8[_0x1e9f77(0x153)]['unref'](),_0x5b2f9b(_0x2f04a8);},_0x2f04a8['onclose']=()=>{var _0x3ab87f=_0x284ca2;this['_allowedToConnectOnSend']=!0x0,this[_0x3ab87f(0x147)](_0x2f04a8),this[_0x3ab87f(0x130)]();},_0x2f04a8['onmessage']=_0x4d8496=>{var _0x53f340=_0x284ca2;try{_0x4d8496&&_0x4d8496[_0x53f340(0x109)]&&this['_inBrowser']&&JSON['parse'](_0x4d8496[_0x53f340(0x109)])[_0x53f340(0xd5)]===_0x53f340(0x125)&&this['global'][_0x53f340(0xdd)]['reload']();}catch{}};})[_0x2c9355(0x166)](_0x2ccf15=>(this[_0x2c9355(0x91)]=!0x0,this[_0x2c9355(0x9f)]=!0x1,this[_0x2c9355(0xca)]=!0x1,this['_allowedToSend']=!0x0,this[_0x2c9355(0x14f)]=0x0,_0x2ccf15))['catch'](_0x451ae5=>(this['_connected']=!0x1,this['_connecting']=!0x1,console['warn'](_0x2c9355(0x128)+this['_webSocketErrorDocsLink']),_0x152695(new Error(_0x2c9355(0x103)+(_0x451ae5&&_0x451ae5[_0x2c9355(0xea)])))));}));}[_0x1097a9(0x147)](_0x2ea76f){var _0x1e62ce=_0x1097a9;this[_0x1e62ce(0x91)]=!0x1,this['_connecting']=!0x1;try{_0x2ea76f[_0x1e62ce(0xe0)]=null,_0x2ea76f[_0x1e62ce(0x100)]=null,_0x2ea76f[_0x1e62ce(0x137)]=null;}catch{}try{_0x2ea76f[_0x1e62ce(0xf7)]<0x2&&_0x2ea76f[_0x1e62ce(0x11f)]();}catch{}}[_0x1097a9(0x130)](){var _0x3769b2=_0x1097a9;clearTimeout(this[_0x3769b2(0x160)]),!(this[_0x3769b2(0x14f)]>=this[_0x3769b2(0x173)])&&(this[_0x3769b2(0x160)]=setTimeout(()=>{var _0x358df6=_0x3769b2;this[_0x358df6(0x91)]||this[_0x358df6(0x9f)]||(this[_0x358df6(0x134)](),this[_0x358df6(0xe3)]?.[_0x358df6(0x11d)](()=>this[_0x358df6(0x130)]()));},0x1f4),this[_0x3769b2(0x160)]['unref']&&this['_reconnectTimeout']['unref']());}async['send'](_0x4e24e3){var _0x142bfb=_0x1097a9;try{if(!this['_allowedToSend'])return;this[_0x142bfb(0xca)]&&this['_connectToHostNow'](),(await this[_0x142bfb(0xe3)])[_0x142bfb(0xa9)](JSON[_0x142bfb(0x140)](_0x4e24e3));}catch(_0x4183fe){console['warn'](this['_sendErrorMessage']+':\\x20'+(_0x4183fe&&_0x4183fe[_0x142bfb(0xea)])),this[_0x142bfb(0x106)]=!0x1,this[_0x142bfb(0x130)]();}}};function b(_0x4b3895,_0x2647c2,_0xea9eb5,_0x3a60db,_0x5151da,_0xb94277){var _0x59cd6f=_0x1097a9;let _0x1e57f0=_0xea9eb5[_0x59cd6f(0x10b)](',')[_0x59cd6f(0x84)](_0x11533f=>{var _0x4324c0=_0x59cd6f;try{_0x4b3895[_0x4324c0(0x121)]||((_0x5151da==='next.js'||_0x5151da==='remix'||_0x5151da===_0x4324c0(0xc2)||_0x5151da==='angular')&&(_0x5151da+=!_0x4b3895[_0x4324c0(0x172)]?.[_0x4324c0(0x14d)]?.['node']&&_0x4b3895['process']?.[_0x4324c0(0x138)]?.[_0x4324c0(0xfc)]!==_0x4324c0(0x112)?_0x4324c0(0x12a):_0x4324c0(0x8a)),_0x4b3895['_console_ninja_session']={'id':+new Date(),'tool':_0x5151da});let _0xb380e8=new X(_0x4b3895,_0x2647c2,_0x11533f,_0x3a60db,_0xb94277);return _0xb380e8[_0x4324c0(0xa9)][_0x4324c0(0x96)](_0xb380e8);}catch(_0x42b7f1){return console[_0x4324c0(0x133)](_0x4324c0(0x114),_0x42b7f1&&_0x42b7f1[_0x4324c0(0xea)]),()=>{};}});return _0x14f40f=>_0x1e57f0[_0x59cd6f(0x16a)](_0x27110f=>_0x27110f(_0x14f40f));}function W(_0x2d1833){var _0x43f749=_0x1097a9;let _0xc9a0a=function(_0x2a6d8e,_0x16cb71){return _0x16cb71-_0x2a6d8e;},_0x467056;if(_0x2d1833['performance'])_0x467056=function(){var _0x3e0a7a=_0xb830;return _0x2d1833[_0x3e0a7a(0xd9)]['now']();};else{if(_0x2d1833[_0x43f749(0x172)]&&_0x2d1833[_0x43f749(0x172)][_0x43f749(0xbf)]&&_0x2d1833[_0x43f749(0x172)]?.[_0x43f749(0x138)]?.[_0x43f749(0xfc)]!==_0x43f749(0x112))_0x467056=function(){var _0x4d4a01=_0x43f749;return _0x2d1833[_0x4d4a01(0x172)][_0x4d4a01(0xbf)]();},_0xc9a0a=function(_0x16bac1,_0x27035e){return 0x3e8*(_0x27035e[0x0]-_0x16bac1[0x0])+(_0x27035e[0x1]-_0x16bac1[0x1])/0xf4240;};else try{let {performance:_0x58e45c}=require(_0x43f749(0xad));_0x467056=function(){var _0x203e2e=_0x43f749;return _0x58e45c[_0x203e2e(0x120)]();};}catch{_0x467056=function(){return+new Date();};}}return{'elapsed':_0xc9a0a,'timeStamp':_0x467056,'now':()=>Date[_0x43f749(0x120)]()};}function J(_0x198f68,_0xd80310,_0x2e2ef1){var _0x192dab=_0x1097a9;if(_0x198f68[_0x192dab(0x118)]!==void 0x0)return _0x198f68[_0x192dab(0x118)];let _0xebe88b=_0x198f68[_0x192dab(0x172)]?.[_0x192dab(0x14d)]?.[_0x192dab(0xa1)]||_0x198f68[_0x192dab(0x172)]?.[_0x192dab(0x138)]?.['NEXT_RUNTIME']===_0x192dab(0x112);return _0xebe88b&&_0x2e2ef1==='nuxt'?_0x198f68[_0x192dab(0x118)]=!0x1:_0x198f68[_0x192dab(0x118)]=_0xebe88b||!_0xd80310||_0x198f68[_0x192dab(0xdd)]?.[_0x192dab(0xc7)]&&_0xd80310[_0x192dab(0x90)](_0x198f68['location'][_0x192dab(0xc7)]),_0x198f68[_0x192dab(0x118)];}function _0xb830(_0x1e5ae3,_0xc385c6){var _0x466d1e=_0x466d();return _0xb830=function(_0xb8301,_0x4c99da){_0xb8301=_0xb8301-0x83;var _0x5b1ed3=_0x466d1e[_0xb8301];return _0x5b1ed3;},_0xb830(_0x1e5ae3,_0xc385c6);}function Y(_0x1cc08b,_0x13ad5e,_0x3730c0,_0x5d91f4){var _0xeba5ae=_0x1097a9;_0x1cc08b=_0x1cc08b,_0x13ad5e=_0x13ad5e,_0x3730c0=_0x3730c0,_0x5d91f4=_0x5d91f4;let _0x4468d4=W(_0x1cc08b),_0x435479=_0x4468d4['elapsed'],_0x38efec=_0x4468d4[_0xeba5ae(0x143)];class _0x1d60d8{constructor(){var _0x406559=_0xeba5ae;this[_0x406559(0x10c)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x406559(0x145)]=/^(0|[1-9][0-9]*)$/,this[_0x406559(0x15a)]=/'([^\\\\']|\\\\')*'/,this[_0x406559(0x15f)]=_0x1cc08b[_0x406559(0xb2)],this[_0x406559(0xfb)]=_0x1cc08b['HTMLAllCollection'],this[_0x406559(0x132)]=Object['getOwnPropertyDescriptor'],this[_0x406559(0xd7)]=Object[_0x406559(0xcd)],this['_Symbol']=_0x1cc08b[_0x406559(0x12e)],this[_0x406559(0x110)]=RegExp[_0x406559(0x11b)][_0x406559(0xf4)],this[_0x406559(0x170)]=Date[_0x406559(0x11b)]['toString'];}[_0xeba5ae(0xb3)](_0x52e9c4,_0x2db60d,_0x163809,_0x1d3865){var _0x11b046=_0xeba5ae,_0x11758f=this,_0x533f43=_0x163809[_0x11b046(0x124)];function _0x553782(_0xa5ea99,_0x45f574,_0x474fe8){var _0x2d0d70=_0x11b046;_0x45f574[_0x2d0d70(0x9b)]=_0x2d0d70(0x10a),_0x45f574[_0x2d0d70(0x12b)]=_0xa5ea99[_0x2d0d70(0xea)],_0x1bfe65=_0x474fe8['node'][_0x2d0d70(0x146)],_0x474fe8[_0x2d0d70(0xa1)][_0x2d0d70(0x146)]=_0x45f574,_0x11758f['_treeNodePropertiesBeforeFullValue'](_0x45f574,_0x474fe8);}try{_0x163809[_0x11b046(0xc8)]++,_0x163809[_0x11b046(0x124)]&&_0x163809['autoExpandPreviousObjects']['push'](_0x2db60d);var _0x46e79c,_0x5b6af3,_0x4f4476,_0x4696b6,_0x268691=[],_0x5a0af2=[],_0x34f775,_0x58a139=this[_0x11b046(0xbc)](_0x2db60d),_0x4246d6=_0x58a139==='array',_0x36079c=!0x1,_0x183648=_0x58a139==='function',_0x520036=this[_0x11b046(0x105)](_0x58a139),_0x2a2a26=this[_0x11b046(0x9d)](_0x58a139),_0x6a2864=_0x520036||_0x2a2a26,_0x42f259={},_0x1d3bd8=0x0,_0x515978=!0x1,_0x1bfe65,_0x487006=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x163809[_0x11b046(0xc1)]){if(_0x4246d6){if(_0x5b6af3=_0x2db60d['length'],_0x5b6af3>_0x163809['elements']){for(_0x4f4476=0x0,_0x4696b6=_0x163809[_0x11b046(0x168)],_0x46e79c=_0x4f4476;_0x46e79c<_0x4696b6;_0x46e79c++)_0x5a0af2[_0x11b046(0xff)](_0x11758f[_0x11b046(0xac)](_0x268691,_0x2db60d,_0x58a139,_0x46e79c,_0x163809));_0x52e9c4['cappedElements']=!0x0;}else{for(_0x4f4476=0x0,_0x4696b6=_0x5b6af3,_0x46e79c=_0x4f4476;_0x46e79c<_0x4696b6;_0x46e79c++)_0x5a0af2[_0x11b046(0xff)](_0x11758f[_0x11b046(0xac)](_0x268691,_0x2db60d,_0x58a139,_0x46e79c,_0x163809));}_0x163809[_0x11b046(0xa7)]+=_0x5a0af2[_0x11b046(0x131)];}if(!(_0x58a139===_0x11b046(0xd2)||_0x58a139===_0x11b046(0xb2))&&!_0x520036&&_0x58a139!==_0x11b046(0xc6)&&_0x58a139!==_0x11b046(0x161)&&_0x58a139!==_0x11b046(0x9e)){var _0x3ff810=_0x1d3865['props']||_0x163809[_0x11b046(0x11e)];if(this[_0x11b046(0x107)](_0x2db60d)?(_0x46e79c=0x0,_0x2db60d[_0x11b046(0x16a)](function(_0x22909b){var _0x52a991=_0x11b046;if(_0x1d3bd8++,_0x163809[_0x52a991(0xa7)]++,_0x1d3bd8>_0x3ff810){_0x515978=!0x0;return;}if(!_0x163809[_0x52a991(0xa6)]&&_0x163809[_0x52a991(0x124)]&&_0x163809[_0x52a991(0xa7)]>_0x163809['autoExpandLimit']){_0x515978=!0x0;return;}_0x5a0af2[_0x52a991(0xff)](_0x11758f[_0x52a991(0xac)](_0x268691,_0x2db60d,_0x52a991(0x8b),_0x46e79c++,_0x163809,function(_0x8583d9){return function(){return _0x8583d9;};}(_0x22909b)));})):this[_0x11b046(0x99)](_0x2db60d)&&_0x2db60d[_0x11b046(0x16a)](function(_0x204d86,_0xf4a962){var _0x14424f=_0x11b046;if(_0x1d3bd8++,_0x163809[_0x14424f(0xa7)]++,_0x1d3bd8>_0x3ff810){_0x515978=!0x0;return;}if(!_0x163809[_0x14424f(0xa6)]&&_0x163809[_0x14424f(0x124)]&&_0x163809['autoExpandPropertyCount']>_0x163809[_0x14424f(0xec)]){_0x515978=!0x0;return;}var _0xa64fd8=_0xf4a962['toString']();_0xa64fd8[_0x14424f(0x131)]>0x64&&(_0xa64fd8=_0xa64fd8[_0x14424f(0x94)](0x0,0x64)+_0x14424f(0xee)),_0x5a0af2[_0x14424f(0xff)](_0x11758f[_0x14424f(0xac)](_0x268691,_0x2db60d,_0x14424f(0x14c),_0xa64fd8,_0x163809,function(_0xbe6483){return function(){return _0xbe6483;};}(_0x204d86)));}),!_0x36079c){try{for(_0x34f775 in _0x2db60d)if(!(_0x4246d6&&_0x487006['test'](_0x34f775))&&!this[_0x11b046(0x13d)](_0x2db60d,_0x34f775,_0x163809)){if(_0x1d3bd8++,_0x163809['autoExpandPropertyCount']++,_0x1d3bd8>_0x3ff810){_0x515978=!0x0;break;}if(!_0x163809[_0x11b046(0xa6)]&&_0x163809[_0x11b046(0x124)]&&_0x163809[_0x11b046(0xa7)]>_0x163809[_0x11b046(0xec)]){_0x515978=!0x0;break;}_0x5a0af2['push'](_0x11758f['_addObjectProperty'](_0x268691,_0x42f259,_0x2db60d,_0x58a139,_0x34f775,_0x163809));}}catch{}if(_0x42f259[_0x11b046(0xb1)]=!0x0,_0x183648&&(_0x42f259['_p_name']=!0x0),!_0x515978){var _0x4be1af=[][_0x11b046(0x150)](this['_getOwnPropertyNames'](_0x2db60d))['concat'](this[_0x11b046(0x144)](_0x2db60d));for(_0x46e79c=0x0,_0x5b6af3=_0x4be1af[_0x11b046(0x131)];_0x46e79c<_0x5b6af3;_0x46e79c++)if(_0x34f775=_0x4be1af[_0x46e79c],!(_0x4246d6&&_0x487006[_0x11b046(0x8c)](_0x34f775[_0x11b046(0xf4)]()))&&!this[_0x11b046(0x13d)](_0x2db60d,_0x34f775,_0x163809)&&!_0x42f259['_p_'+_0x34f775[_0x11b046(0xf4)]()]){if(_0x1d3bd8++,_0x163809[_0x11b046(0xa7)]++,_0x1d3bd8>_0x3ff810){_0x515978=!0x0;break;}if(!_0x163809[_0x11b046(0xa6)]&&_0x163809[_0x11b046(0x124)]&&_0x163809[_0x11b046(0xa7)]>_0x163809[_0x11b046(0xec)]){_0x515978=!0x0;break;}_0x5a0af2[_0x11b046(0xff)](_0x11758f[_0x11b046(0x85)](_0x268691,_0x42f259,_0x2db60d,_0x58a139,_0x34f775,_0x163809));}}}}}if(_0x52e9c4[_0x11b046(0x9b)]=_0x58a139,_0x6a2864?(_0x52e9c4[_0x11b046(0xf0)]=_0x2db60d[_0x11b046(0xa2)](),this['_capIfString'](_0x58a139,_0x52e9c4,_0x163809,_0x1d3865)):_0x58a139===_0x11b046(0x87)?_0x52e9c4[_0x11b046(0xf0)]=this['_dateToString']['call'](_0x2db60d):_0x58a139===_0x11b046(0x9e)?_0x52e9c4[_0x11b046(0xf0)]=_0x2db60d[_0x11b046(0xf4)]():_0x58a139===_0x11b046(0x162)?_0x52e9c4[_0x11b046(0xf0)]=this[_0x11b046(0x110)]['call'](_0x2db60d):_0x58a139==='symbol'&&this[_0x11b046(0x13b)]?_0x52e9c4[_0x11b046(0xf0)]=this[_0x11b046(0x13b)][_0x11b046(0x11b)][_0x11b046(0xf4)][_0x11b046(0x171)](_0x2db60d):!_0x163809[_0x11b046(0xc1)]&&!(_0x58a139==='null'||_0x58a139===_0x11b046(0xb2))&&(delete _0x52e9c4[_0x11b046(0xf0)],_0x52e9c4[_0x11b046(0x126)]=!0x0),_0x515978&&(_0x52e9c4[_0x11b046(0x83)]=!0x0),_0x1bfe65=_0x163809[_0x11b046(0xa1)][_0x11b046(0x146)],_0x163809['node'][_0x11b046(0x146)]=_0x52e9c4,this[_0x11b046(0xb4)](_0x52e9c4,_0x163809),_0x5a0af2[_0x11b046(0x131)]){for(_0x46e79c=0x0,_0x5b6af3=_0x5a0af2[_0x11b046(0x131)];_0x46e79c<_0x5b6af3;_0x46e79c++)_0x5a0af2[_0x46e79c](_0x46e79c);}_0x268691[_0x11b046(0x131)]&&(_0x52e9c4[_0x11b046(0x11e)]=_0x268691);}catch(_0xdc9086){_0x553782(_0xdc9086,_0x52e9c4,_0x163809);}return this['_additionalMetadata'](_0x2db60d,_0x52e9c4),this[_0x11b046(0x16b)](_0x52e9c4,_0x163809),_0x163809[_0x11b046(0xa1)][_0x11b046(0x146)]=_0x1bfe65,_0x163809['level']--,_0x163809[_0x11b046(0x124)]=_0x533f43,_0x163809[_0x11b046(0x124)]&&_0x163809['autoExpandPreviousObjects'][_0x11b046(0x95)](),_0x52e9c4;}[_0xeba5ae(0x144)](_0x2a4a55){var _0x874c11=_0xeba5ae;return Object[_0x874c11(0xc0)]?Object[_0x874c11(0xc0)](_0x2a4a55):[];}[_0xeba5ae(0x107)](_0x24433b){var _0x23b49d=_0xeba5ae;return!!(_0x24433b&&_0x1cc08b[_0x23b49d(0x8b)]&&this[_0x23b49d(0x115)](_0x24433b)==='[object\\x20Set]'&&_0x24433b[_0x23b49d(0x16a)]);}[_0xeba5ae(0x13d)](_0x137e25,_0x87508b,_0x521459){return _0x521459['noFunctions']?typeof _0x137e25[_0x87508b]=='function':!0x1;}[_0xeba5ae(0xbc)](_0x26fed2){var _0x40a499=_0xeba5ae,_0xafe7f9='';return _0xafe7f9=typeof _0x26fed2,_0xafe7f9===_0x40a499(0x13f)?this[_0x40a499(0x115)](_0x26fed2)===_0x40a499(0xc5)?_0xafe7f9=_0x40a499(0x116):this['_objectToString'](_0x26fed2)===_0x40a499(0x86)?_0xafe7f9=_0x40a499(0x87):this[_0x40a499(0x115)](_0x26fed2)===_0x40a499(0x9c)?_0xafe7f9=_0x40a499(0x9e):_0x26fed2===null?_0xafe7f9='null':_0x26fed2[_0x40a499(0x139)]&&(_0xafe7f9=_0x26fed2[_0x40a499(0x139)][_0x40a499(0x122)]||_0xafe7f9):_0xafe7f9===_0x40a499(0xb2)&&this['_HTMLAllCollection']&&_0x26fed2 instanceof this[_0x40a499(0xfb)]&&(_0xafe7f9='HTMLAllCollection'),_0xafe7f9;}[_0xeba5ae(0x115)](_0x569915){var _0x9ae7ea=_0xeba5ae;return Object[_0x9ae7ea(0x11b)][_0x9ae7ea(0xf4)][_0x9ae7ea(0x171)](_0x569915);}['_isPrimitiveType'](_0x5332f0){var _0x4fd674=_0xeba5ae;return _0x5332f0===_0x4fd674(0x165)||_0x5332f0===_0x4fd674(0x11a)||_0x5332f0===_0x4fd674(0xa3);}[_0xeba5ae(0x9d)](_0x5d583c){var _0x2ed699=_0xeba5ae;return _0x5d583c===_0x2ed699(0x13c)||_0x5d583c==='String'||_0x5d583c===_0x2ed699(0x10d);}[_0xeba5ae(0xac)](_0x23869e,_0x5e0b24,_0x18ce69,_0x14d228,_0x1e1416,_0x437436){var _0x2b1fd3=this;return function(_0x1d221a){var _0x57e586=_0xb830,_0x5292b4=_0x1e1416[_0x57e586(0xa1)]['current'],_0x1ff91d=_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x158)],_0x2800d7=_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x16d)];_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x16d)]=_0x5292b4,_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x158)]=typeof _0x14d228==_0x57e586(0xa3)?_0x14d228:_0x1d221a,_0x23869e['push'](_0x2b1fd3[_0x57e586(0x113)](_0x5e0b24,_0x18ce69,_0x14d228,_0x1e1416,_0x437436)),_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x16d)]=_0x2800d7,_0x1e1416[_0x57e586(0xa1)][_0x57e586(0x158)]=_0x1ff91d;};}['_addObjectProperty'](_0xb040af,_0xefd771,_0x2da156,_0x124727,_0x42618e,_0x9fa9d6,_0x4ce1cb){var _0x14cd22=_0xeba5ae,_0xd4ffc8=this;return _0xefd771[_0x14cd22(0xfd)+_0x42618e['toString']()]=!0x0,function(_0x355c24){var _0x18bd77=_0x14cd22,_0x2d45bc=_0x9fa9d6[_0x18bd77(0xa1)][_0x18bd77(0x146)],_0x4817ef=_0x9fa9d6['node'][_0x18bd77(0x158)],_0x176974=_0x9fa9d6['node'][_0x18bd77(0x16d)];_0x9fa9d6[_0x18bd77(0xa1)]['parent']=_0x2d45bc,_0x9fa9d6[_0x18bd77(0xa1)][_0x18bd77(0x158)]=_0x355c24,_0xb040af[_0x18bd77(0xff)](_0xd4ffc8[_0x18bd77(0x113)](_0x2da156,_0x124727,_0x42618e,_0x9fa9d6,_0x4ce1cb)),_0x9fa9d6[_0x18bd77(0xa1)][_0x18bd77(0x16d)]=_0x176974,_0x9fa9d6[_0x18bd77(0xa1)][_0x18bd77(0x158)]=_0x4817ef;};}[_0xeba5ae(0x113)](_0x988cca,_0x5decdb,_0x1747c2,_0x305e2e,_0x559d0a){var _0x315945=_0xeba5ae,_0x267001=this;_0x559d0a||(_0x559d0a=function(_0x50817c,_0x78f975){return _0x50817c[_0x78f975];});var _0x6b784e=_0x1747c2[_0x315945(0xf4)](),_0x56413a=_0x305e2e['expressionsToEvaluate']||{},_0x21c4e5=_0x305e2e['depth'],_0x447698=_0x305e2e['isExpressionToEvaluate'];try{var _0x50f1c8=this[_0x315945(0x99)](_0x988cca),_0x5b03d3=_0x6b784e;_0x50f1c8&&_0x5b03d3[0x0]==='\\x27'&&(_0x5b03d3=_0x5b03d3[_0x315945(0x16e)](0x1,_0x5b03d3[_0x315945(0x131)]-0x2));var _0x24b859=_0x305e2e[_0x315945(0xaf)]=_0x56413a[_0x315945(0xfd)+_0x5b03d3];_0x24b859&&(_0x305e2e['depth']=_0x305e2e[_0x315945(0xc1)]+0x1),_0x305e2e[_0x315945(0xa6)]=!!_0x24b859;var _0x57685f=typeof _0x1747c2==_0x315945(0xed),_0x4ec724={'name':_0x57685f||_0x50f1c8?_0x6b784e:this[_0x315945(0x8d)](_0x6b784e)};if(_0x57685f&&(_0x4ec724[_0x315945(0xed)]=!0x0),!(_0x5decdb===_0x315945(0x116)||_0x5decdb===_0x315945(0x89))){var _0xc6f266=this[_0x315945(0x132)](_0x988cca,_0x1747c2);if(_0xc6f266&&(_0xc6f266['set']&&(_0x4ec724[_0x315945(0x152)]=!0x0),_0xc6f266['get']&&!_0x24b859&&!_0x305e2e[_0x315945(0xfe)]))return _0x4ec724[_0x315945(0xeb)]=!0x0,this['_processTreeNodeResult'](_0x4ec724,_0x305e2e),_0x4ec724;}var _0x3a93d0;try{_0x3a93d0=_0x559d0a(_0x988cca,_0x1747c2);}catch(_0x3aa278){return _0x4ec724={'name':_0x6b784e,'type':_0x315945(0x10a),'error':_0x3aa278[_0x315945(0xea)]},this[_0x315945(0x102)](_0x4ec724,_0x305e2e),_0x4ec724;}var _0x5f450f=this[_0x315945(0xbc)](_0x3a93d0),_0x3cf548=this['_isPrimitiveType'](_0x5f450f);if(_0x4ec724[_0x315945(0x9b)]=_0x5f450f,_0x3cf548)this[_0x315945(0x102)](_0x4ec724,_0x305e2e,_0x3a93d0,function(){var _0x450f09=_0x315945;_0x4ec724[_0x450f09(0xf0)]=_0x3a93d0[_0x450f09(0xa2)](),!_0x24b859&&_0x267001[_0x450f09(0x169)](_0x5f450f,_0x4ec724,_0x305e2e,{});});else{var _0x413e76=_0x305e2e[_0x315945(0x124)]&&_0x305e2e[_0x315945(0xc8)]<_0x305e2e[_0x315945(0x104)]&&_0x305e2e[_0x315945(0xd1)][_0x315945(0xb8)](_0x3a93d0)<0x0&&_0x5f450f!==_0x315945(0x11c)&&_0x305e2e[_0x315945(0xa7)]<_0x305e2e[_0x315945(0xec)];_0x413e76||_0x305e2e[_0x315945(0xc8)]<_0x21c4e5||_0x24b859?(this[_0x315945(0xb3)](_0x4ec724,_0x3a93d0,_0x305e2e,_0x24b859||{}),this[_0x315945(0xa0)](_0x3a93d0,_0x4ec724)):this[_0x315945(0x102)](_0x4ec724,_0x305e2e,_0x3a93d0,function(){var _0x5bc30f=_0x315945;_0x5f450f===_0x5bc30f(0xd2)||_0x5f450f===_0x5bc30f(0xb2)||(delete _0x4ec724[_0x5bc30f(0xf0)],_0x4ec724[_0x5bc30f(0x126)]=!0x0);});}return _0x4ec724;}finally{_0x305e2e['expressionsToEvaluate']=_0x56413a,_0x305e2e[_0x315945(0xc1)]=_0x21c4e5,_0x305e2e['isExpressionToEvaluate']=_0x447698;}}[_0xeba5ae(0x169)](_0x158312,_0x52fa59,_0x12c82b,_0x289c16){var _0x12aa02=_0xeba5ae,_0x36a98f=_0x289c16[_0x12aa02(0xe1)]||_0x12c82b['strLength'];if((_0x158312===_0x12aa02(0x11a)||_0x158312===_0x12aa02(0xc6))&&_0x52fa59['value']){let _0x4a6342=_0x52fa59[_0x12aa02(0xf0)]['length'];_0x12c82b[_0x12aa02(0xcc)]+=_0x4a6342,_0x12c82b[_0x12aa02(0xcc)]>_0x12c82b[_0x12aa02(0x12d)]?(_0x52fa59['capped']='',delete _0x52fa59['value']):_0x4a6342>_0x36a98f&&(_0x52fa59[_0x12aa02(0x126)]=_0x52fa59['value']['substr'](0x0,_0x36a98f),delete _0x52fa59[_0x12aa02(0xf0)]);}}['_isMap'](_0x5be373){var _0x3ba1c6=_0xeba5ae;return!!(_0x5be373&&_0x1cc08b[_0x3ba1c6(0x14c)]&&this[_0x3ba1c6(0x115)](_0x5be373)===_0x3ba1c6(0xb6)&&_0x5be373[_0x3ba1c6(0x16a)]);}[_0xeba5ae(0x8d)](_0xc4ce1c){var _0x2962e7=_0xeba5ae;if(_0xc4ce1c['match'](/^\\d+$/))return _0xc4ce1c;var _0x4392b5;try{_0x4392b5=JSON[_0x2962e7(0x140)](''+_0xc4ce1c);}catch{_0x4392b5='\\x22'+this[_0x2962e7(0x115)](_0xc4ce1c)+'\\x22';}return _0x4392b5['match'](/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?_0x4392b5=_0x4392b5[_0x2962e7(0x16e)](0x1,_0x4392b5[_0x2962e7(0x131)]-0x2):_0x4392b5=_0x4392b5[_0x2962e7(0xe7)](/'/g,'\\x5c\\x27')[_0x2962e7(0xe7)](/\\\\"/g,'\\x22')[_0x2962e7(0xe7)](/(^"|"$)/g,'\\x27'),_0x4392b5;}[_0xeba5ae(0x102)](_0x26ebd8,_0x2b13b8,_0xe06eaa,_0x3c24ec){var _0x3742a8=_0xeba5ae;this[_0x3742a8(0xb4)](_0x26ebd8,_0x2b13b8),_0x3c24ec&&_0x3c24ec(),this[_0x3742a8(0xa0)](_0xe06eaa,_0x26ebd8),this[_0x3742a8(0x16b)](_0x26ebd8,_0x2b13b8);}['_treeNodePropertiesBeforeFullValue'](_0x5ae563,_0x571899){var _0x2cdb1b=_0xeba5ae;this[_0x2cdb1b(0xe8)](_0x5ae563,_0x571899),this['_setNodeQueryPath'](_0x5ae563,_0x571899),this[_0x2cdb1b(0x15c)](_0x5ae563,_0x571899),this[_0x2cdb1b(0x127)](_0x5ae563,_0x571899);}['_setNodeId'](_0x51436c,_0x5fcb4d){}[_0xeba5ae(0xe2)](_0x1972c1,_0x4ca0bc){}['_setNodeLabel'](_0x8aa837,_0x189dbb){}[_0xeba5ae(0xbd)](_0x516a56){return _0x516a56===this['_undefined'];}[_0xeba5ae(0x16b)](_0x591e56,_0x1f455e){var _0x1b05c6=_0xeba5ae;this[_0x1b05c6(0x15b)](_0x591e56,_0x1f455e),this[_0x1b05c6(0x148)](_0x591e56),_0x1f455e[_0x1b05c6(0x135)]&&this[_0x1b05c6(0x8e)](_0x591e56),this[_0x1b05c6(0x156)](_0x591e56,_0x1f455e),this['_addLoadNode'](_0x591e56,_0x1f455e),this[_0x1b05c6(0xf3)](_0x591e56);}['_additionalMetadata'](_0x5c2370,_0x1cbfde){var _0x461d28=_0xeba5ae;let _0x3b8641;try{_0x1cc08b[_0x461d28(0x88)]&&(_0x3b8641=_0x1cc08b[_0x461d28(0x88)][_0x461d28(0x12b)],_0x1cc08b['console'][_0x461d28(0x12b)]=function(){}),_0x5c2370&&typeof _0x5c2370[_0x461d28(0x131)]==_0x461d28(0xa3)&&(_0x1cbfde[_0x461d28(0x131)]=_0x5c2370['length']);}catch{}finally{_0x3b8641&&(_0x1cc08b['console'][_0x461d28(0x12b)]=_0x3b8641);}if(_0x1cbfde['type']===_0x461d28(0xa3)||_0x1cbfde[_0x461d28(0x9b)]===_0x461d28(0x10d)){if(isNaN(_0x1cbfde[_0x461d28(0xf0)]))_0x1cbfde[_0x461d28(0xdb)]=!0x0,delete _0x1cbfde[_0x461d28(0xf0)];else switch(_0x1cbfde[_0x461d28(0xf0)]){case Number[_0x461d28(0x15e)]:_0x1cbfde[_0x461d28(0xd8)]=!0x0,delete _0x1cbfde[_0x461d28(0xf0)];break;case Number[_0x461d28(0x151)]:_0x1cbfde[_0x461d28(0x92)]=!0x0,delete _0x1cbfde[_0x461d28(0xf0)];break;case 0x0:this[_0x461d28(0x111)](_0x1cbfde[_0x461d28(0xf0)])&&(_0x1cbfde[_0x461d28(0x14e)]=!0x0);break;}}else _0x1cbfde[_0x461d28(0x9b)]==='function'&&typeof _0x5c2370[_0x461d28(0x122)]==_0x461d28(0x11a)&&_0x5c2370['name']&&_0x1cbfde[_0x461d28(0x122)]&&_0x5c2370['name']!==_0x1cbfde['name']&&(_0x1cbfde[_0x461d28(0xf5)]=_0x5c2370[_0x461d28(0x122)]);}[_0xeba5ae(0x111)](_0x112127){var _0x57acac=_0xeba5ae;return 0x1/_0x112127===Number[_0x57acac(0x151)];}['_sortProps'](_0x3dc922){var _0x15369a=_0xeba5ae;!_0x3dc922['props']||!_0x3dc922[_0x15369a(0x11e)][_0x15369a(0x131)]||_0x3dc922['type']===_0x15369a(0x116)||_0x3dc922[_0x15369a(0x9b)]===_0x15369a(0x14c)||_0x3dc922[_0x15369a(0x9b)]===_0x15369a(0x8b)||_0x3dc922[_0x15369a(0x11e)][_0x15369a(0xf2)](function(_0x5b9559,_0x11da09){var _0x5af4d8=_0x5b9559['name']['toLowerCase'](),_0x9acbc1=_0x11da09['name']['toLowerCase']();return _0x5af4d8<_0x9acbc1?-0x1:_0x5af4d8>_0x9acbc1?0x1:0x0;});}[_0xeba5ae(0x156)](_0x21b8f6,_0x53f602){var _0x15ce53=_0xeba5ae;if(!(_0x53f602['noFunctions']||!_0x21b8f6[_0x15ce53(0x11e)]||!_0x21b8f6[_0x15ce53(0x11e)][_0x15ce53(0x131)])){for(var _0x3a5023=[],_0x2e6d60=[],_0x18f154=0x0,_0x39d54e=_0x21b8f6[_0x15ce53(0x11e)][_0x15ce53(0x131)];_0x18f154<_0x39d54e;_0x18f154++){var _0x276061=_0x21b8f6[_0x15ce53(0x11e)][_0x18f154];_0x276061['type']===_0x15ce53(0x11c)?_0x3a5023[_0x15ce53(0xff)](_0x276061):_0x2e6d60[_0x15ce53(0xff)](_0x276061);}if(!(!_0x2e6d60[_0x15ce53(0x131)]||_0x3a5023[_0x15ce53(0x131)]<=0x1)){_0x21b8f6[_0x15ce53(0x11e)]=_0x2e6d60;var _0x4ee7a9={'functionsNode':!0x0,'props':_0x3a5023};this[_0x15ce53(0xe8)](_0x4ee7a9,_0x53f602),this[_0x15ce53(0x15b)](_0x4ee7a9,_0x53f602),this[_0x15ce53(0x148)](_0x4ee7a9),this['_setNodePermissions'](_0x4ee7a9,_0x53f602),_0x4ee7a9['id']+='\\x20f',_0x21b8f6[_0x15ce53(0x11e)][_0x15ce53(0xfa)](_0x4ee7a9);}}}[_0xeba5ae(0x98)](_0x49615f,_0x3b5c15){}[_0xeba5ae(0x148)](_0x256a3b){}['_isArray'](_0x41a15a){var _0x264703=_0xeba5ae;return Array[_0x264703(0x97)](_0x41a15a)||typeof _0x41a15a==_0x264703(0x13f)&&this[_0x264703(0x115)](_0x41a15a)===_0x264703(0xc5);}['_setNodePermissions'](_0x294134,_0x4d88f1){}[_0xeba5ae(0xf3)](_0x20a039){var _0xcf5353=_0xeba5ae;delete _0x20a039[_0xcf5353(0xaa)],delete _0x20a039[_0xcf5353(0x119)],delete _0x20a039[_0xcf5353(0x14a)];}[_0xeba5ae(0x15c)](_0x22e503,_0xb96da4){}}let _0xba5153=new _0x1d60d8(),_0x49b01f={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x2febb7={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2};function _0x2fa7e8(_0x2fce41,_0xaac901,_0x3c7ef5,_0x365d83,_0x2b4f70,_0x2e0abc){var _0x5eb761=_0xeba5ae;let _0x3371d2,_0x3176de;try{_0x3176de=_0x38efec(),_0x3371d2=_0x3730c0[_0xaac901],!_0x3371d2||_0x3176de-_0x3371d2['ts']>0x1f4&&_0x3371d2[_0x5eb761(0xf9)]&&_0x3371d2[_0x5eb761(0x93)]/_0x3371d2[_0x5eb761(0xf9)]<0x64?(_0x3730c0[_0xaac901]=_0x3371d2={'count':0x0,'time':0x0,'ts':_0x3176de},_0x3730c0[_0x5eb761(0x167)]={}):_0x3176de-_0x3730c0[_0x5eb761(0x167)]['ts']>0x32&&_0x3730c0['hits']['count']&&_0x3730c0[_0x5eb761(0x167)][_0x5eb761(0x93)]/_0x3730c0['hits'][_0x5eb761(0xf9)]<0x64&&(_0x3730c0['hits']={});let _0xd1cda2=[],_0x416cc7=_0x3371d2[_0x5eb761(0xc3)]||_0x3730c0[_0x5eb761(0x167)][_0x5eb761(0xc3)]?_0x2febb7:_0x49b01f,_0x581d20=_0x1ee84d=>{var _0x4b98bd=_0x5eb761;let _0x50800f={};return _0x50800f[_0x4b98bd(0x11e)]=_0x1ee84d['props'],_0x50800f['elements']=_0x1ee84d[_0x4b98bd(0x168)],_0x50800f[_0x4b98bd(0xe1)]=_0x1ee84d[_0x4b98bd(0xe1)],_0x50800f[_0x4b98bd(0x12d)]=_0x1ee84d[_0x4b98bd(0x12d)],_0x50800f['autoExpandLimit']=_0x1ee84d['autoExpandLimit'],_0x50800f[_0x4b98bd(0x104)]=_0x1ee84d['autoExpandMaxDepth'],_0x50800f[_0x4b98bd(0x135)]=!0x1,_0x50800f[_0x4b98bd(0x101)]=!_0x13ad5e,_0x50800f[_0x4b98bd(0xc1)]=0x1,_0x50800f[_0x4b98bd(0xc8)]=0x0,_0x50800f[_0x4b98bd(0xc9)]='root_exp_id',_0x50800f[_0x4b98bd(0x12f)]=_0x4b98bd(0xcf),_0x50800f[_0x4b98bd(0x124)]=!0x0,_0x50800f['autoExpandPreviousObjects']=[],_0x50800f[_0x4b98bd(0xa7)]=0x0,_0x50800f[_0x4b98bd(0xfe)]=!0x0,_0x50800f[_0x4b98bd(0xcc)]=0x0,_0x50800f[_0x4b98bd(0xa1)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x50800f;};for(var _0x5276bc=0x0;_0x5276bc<_0x2b4f70[_0x5eb761(0x131)];_0x5276bc++)_0xd1cda2[_0x5eb761(0xff)](_0xba5153[_0x5eb761(0xb3)]({'timeNode':_0x2fce41==='time'||void 0x0},_0x2b4f70[_0x5276bc],_0x581d20(_0x416cc7),{}));if(_0x2fce41===_0x5eb761(0x164)){let _0x54225b=Error[_0x5eb761(0xb9)];try{Error[_0x5eb761(0xb9)]=0x1/0x0,_0xd1cda2[_0x5eb761(0xff)](_0xba5153[_0x5eb761(0xb3)]({'stackNode':!0x0},new Error()[_0x5eb761(0x129)],_0x581d20(_0x416cc7),{'strLength':0x1/0x0}));}finally{Error[_0x5eb761(0xb9)]=_0x54225b;}}return{'method':'log','version':_0x5d91f4,'args':[{'ts':_0x3c7ef5,'session':_0x365d83,'args':_0xd1cda2,'id':_0xaac901,'context':_0x2e0abc}]};}catch(_0xc1d67d){return{'method':'log','version':_0x5d91f4,'args':[{'ts':_0x3c7ef5,'session':_0x365d83,'args':[{'type':_0x5eb761(0x10a),'error':_0xc1d67d&&_0xc1d67d[_0x5eb761(0xea)]}],'id':_0xaac901,'context':_0x2e0abc}]};}finally{try{if(_0x3371d2&&_0x3176de){let _0x39ee54=_0x38efec();_0x3371d2['count']++,_0x3371d2[_0x5eb761(0x93)]+=_0x435479(_0x3176de,_0x39ee54),_0x3371d2['ts']=_0x39ee54,_0x3730c0[_0x5eb761(0x167)][_0x5eb761(0xf9)]++,_0x3730c0['hits'][_0x5eb761(0x93)]+=_0x435479(_0x3176de,_0x39ee54),_0x3730c0[_0x5eb761(0x167)]['ts']=_0x39ee54,(_0x3371d2['count']>0x32||_0x3371d2[_0x5eb761(0x93)]>0x64)&&(_0x3371d2[_0x5eb761(0xc3)]=!0x0),(_0x3730c0[_0x5eb761(0x167)]['count']>0x3e8||_0x3730c0[_0x5eb761(0x167)][_0x5eb761(0x93)]>0x12c)&&(_0x3730c0[_0x5eb761(0x167)][_0x5eb761(0xc3)]=!0x0);}}catch{}}}return _0x2fa7e8;}((_0x27a3b3,_0xccbd46,_0x42f2ff,_0x39ddc6,_0x374a56,_0x3ab083,_0x3ea20e,_0x17295e,_0x1b42b2,_0x1513ca)=>{var _0x6d0d70=_0x1097a9;if(_0x27a3b3['_console_ninja'])return _0x27a3b3[_0x6d0d70(0xe4)];if(!J(_0x27a3b3,_0x17295e,_0x374a56))return _0x27a3b3[_0x6d0d70(0xe4)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoLogMany':()=>{},'autoTraceMany':()=>{},'coverage':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x27a3b3[_0x6d0d70(0xe4)];let _0x453fe2=W(_0x27a3b3),_0x361a3a=_0x453fe2[_0x6d0d70(0xf6)],_0x6dc794=_0x453fe2['timeStamp'],_0x14408b=_0x453fe2['now'],_0x50d901={'hits':{},'ts':{}},_0x410bf7=Y(_0x27a3b3,_0x1b42b2,_0x50d901,_0x3ab083),_0x3e06df=_0x225a26=>{_0x50d901['ts'][_0x225a26]=_0x6dc794();},_0x3469f7=(_0x5cf307,_0xf31b99)=>{var _0x5e8fc5=_0x6d0d70;let _0x4503fc=_0x50d901['ts'][_0xf31b99];if(delete _0x50d901['ts'][_0xf31b99],_0x4503fc){let _0x1c4b4e=_0x361a3a(_0x4503fc,_0x6dc794());_0x48bd74(_0x410bf7(_0x5e8fc5(0x93),_0x5cf307,_0x14408b(),_0x553e4d,[_0x1c4b4e],_0xf31b99));}},_0x23a3ed=_0x5ec5c7=>_0x2625b7=>{var _0x91e8f4=_0x6d0d70;try{_0x3e06df(_0x2625b7),_0x5ec5c7(_0x2625b7);}finally{_0x27a3b3[_0x91e8f4(0x88)][_0x91e8f4(0x93)]=_0x5ec5c7;}},_0x28e17a=_0x390625=>_0x325330=>{var _0x543e26=_0x6d0d70;try{let [_0x34e18b,_0x2cf90b]=_0x325330[_0x543e26(0x10b)](_0x543e26(0xe6));_0x3469f7(_0x2cf90b,_0x34e18b),_0x390625(_0x34e18b);}finally{_0x27a3b3[_0x543e26(0x88)][_0x543e26(0xba)]=_0x390625;}};_0x27a3b3[_0x6d0d70(0xe4)]={'consoleLog':(_0x8c65fe,_0x25f248)=>{var _0x445365=_0x6d0d70;_0x27a3b3[_0x445365(0x88)][_0x445365(0xae)][_0x445365(0x122)]!==_0x445365(0x163)&&_0x48bd74(_0x410bf7(_0x445365(0xae),_0x8c65fe,_0x14408b(),_0x553e4d,_0x25f248));},'consoleTrace':(_0x4081b6,_0x198032)=>{var _0x3c28a1=_0x6d0d70;_0x27a3b3[_0x3c28a1(0x88)][_0x3c28a1(0xae)][_0x3c28a1(0x122)]!=='disabledTrace'&&_0x48bd74(_0x410bf7(_0x3c28a1(0x164),_0x4081b6,_0x14408b(),_0x553e4d,_0x198032));},'consoleTime':()=>{var _0x4837f8=_0x6d0d70;_0x27a3b3[_0x4837f8(0x88)]['time']=_0x23a3ed(_0x27a3b3['console'][_0x4837f8(0x93)]);},'consoleTimeEnd':()=>{var _0x8ef218=_0x6d0d70;_0x27a3b3[_0x8ef218(0x88)][_0x8ef218(0xba)]=_0x28e17a(_0x27a3b3[_0x8ef218(0x88)][_0x8ef218(0xba)]);},'autoLog':(_0x276a3d,_0x1fe4e9)=>{var _0x1b731c=_0x6d0d70;_0x48bd74(_0x410bf7(_0x1b731c(0xae),_0x1fe4e9,_0x14408b(),_0x553e4d,[_0x276a3d]));},'autoLogMany':(_0x3c7420,_0x20b118)=>{var _0x10c340=_0x6d0d70;_0x48bd74(_0x410bf7(_0x10c340(0xae),_0x3c7420,_0x14408b(),_0x553e4d,_0x20b118));},'autoTrace':(_0x27b835,_0x23af1a)=>{var _0x3ef9f4=_0x6d0d70;_0x48bd74(_0x410bf7(_0x3ef9f4(0x164),_0x23af1a,_0x14408b(),_0x553e4d,[_0x27b835]));},'autoTraceMany':(_0x407c10,_0x3cdd43)=>{var _0x38a5a0=_0x6d0d70;_0x48bd74(_0x410bf7(_0x38a5a0(0x164),_0x407c10,_0x14408b(),_0x553e4d,_0x3cdd43));},'autoTime':(_0x276ada,_0x18fb0a,_0x4a4f03)=>{_0x3e06df(_0x4a4f03);},'autoTimeEnd':(_0x523298,_0x5fd6d4,_0x1bf5d8)=>{_0x3469f7(_0x5fd6d4,_0x1bf5d8);},'coverage':_0x1a263f=>{_0x48bd74({'method':'coverage','version':_0x3ab083,'args':[{'id':_0x1a263f}]});}};let _0x48bd74=b(_0x27a3b3,_0xccbd46,_0x42f2ff,_0x39ddc6,_0x374a56,_0x1513ca),_0x553e4d=_0x27a3b3['_console_ninja_session'];return _0x27a3b3[_0x6d0d70(0xe4)];})(globalThis,_0x1097a9(0xd6),_0x1097a9(0xde),_0x1097a9(0xa5),'angular',_0x1097a9(0xe9),_0x1097a9(0x10e),_0x1097a9(0xf8),'1',_0x1097a9(0xb5));`)}catch{}}function gM(t,...e){try{pM().consoleLog(t,e)}catch{}return e}function _M(t,e){if(t&1){let n=ot();F(0,"button",8),Ce("click",function(){rt(n);let i=ee().$implicit,o=ee();return it(o.Active_Tab(i))}),oe(1),be(2,"img",9),R()}if(t&2){let n=ee().$implicit;$(),Qe("",n.Tab_Name," "),$(),is("src",n.icon,Pn)}}function yM(t,e){if(t&1&&mt(0,_M,3,2,"button"),t&2){let n=e.$implicit;Nn(0,n.hidden?-1:0)}}function xM(t,e){t&1&&be(0,"app-page-home")}function vM(t,e){t&1&&be(0,"app-page-menu")}function wM(t,e){t&1&&be(0,"app-page-orders")}var uv=(()=>{let e=class e{constructor(r){this.Serv_=r}ngOnInit(){}Get_Active_Tab(r){return this.Array_Tabs.filter(i=>i.Tab_Name===r)[0].Active}get Array_Tabs(){return this.Serv_.Array_Tabs}Active_Tab(r){this.Serv_.Array_Tabs.map(i=>{i.Active=!1}),r.Active=!0}};e.\u0275fac=function(i){return new(i||e)(je(dn))},e.\u0275cmp=un({type:e,selectors:[["app-root"]],decls:13,vars:3,consts:[[1,"container"],[1,"head"],["src","assets/img/banner.jpg",1,"panner"],["src","assets/img/logo.jpg",1,"logo"],[1,"body"],[1,"Tabs",2,"display","none"],[1,"Components"],[4,"ngIf"],[3,"click"],["alt","",3,"src"]],template:function(i,o){i&1&&(be(0,"app-nav-bar"),F(1,"div",0)(2,"div",1),be(3,"img",2)(4,"img",3),R(),F(5,"div",4)(6,"div",5),$t(7,yM,1,1,null,null,Ut),R(),F(9,"div",6),mt(10,xM,1,0,"app-page-home",7)(11,vM,1,0,"app-page-menu",7)(12,wM,1,0,"app-page-orders",7),R()()()),i&2&&($(7),Ht(o.Array_Tabs),$(3),_t("ngIf",o.Get_Active_Tab("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629")),$(),_t("ngIf",o.Get_Active_Tab("\u0627\u0644\u0645\u0646\u064A\u0648")),$(),_t("ngIf",o.Get_Active_Tab("\u0627\u0644\u0633\u0644\u0629")))},dependencies:[Hx,iv,ov,sv,cv],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;margin-bottom:60px}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .panner[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;width:135px;z-index:1;top:100%;left:50%;border-radius:50%;transform:translate(-50%,-60%)}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding-bottom:100px}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Tabs[_ngcontent-%COMP%]{position:fixed;z-index:1;width:100%;bottom:0;display:flex;flex-direction:row-reverse;justify-content:center;background:#fff;padding:8px 0;box-shadow:0 -9px 12px #0000000a}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin:0;display:flex;flex-direction:column-reverse;align-items:center;outline:none;border:none;background:transparent}app-page-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column}app-page-orders[_ngcontent-%COMP%]{direction:rtl}.Components[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:8px}.Components[_ngcontent-%COMP%] > app-page-home[_ngcontent-%COMP%]{padding-bottom:8px}@media only screen and (max-width: 600px){.container[_ngcontent-%COMP%]{padding:0}}@media only screen and (min-width: 820px){.container[_ngcontent-%COMP%]{padding:0 80px}}"]});let t=e;return t})();var EM="firebase",IM="10.7.2";Gn(EM,IM,"app");var Mi=new Wn("ANGULARFIRE2_VERSION");var bM=(t,e)=>{let n=e?[e]:b0(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},kr=class{constructor(){return bM(CM)}},CM="app-check";function pf(){}var Qc=class{zone;delegate;constructor(e,n=dd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},gf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pf,{},pf,pf)),n.pipe(_d({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Yc=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Qc(Zone.current)),this.insideAngular=n.run(()=>new Qc(Zone.current,Mo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(T(re))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DM(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ft(t){return TM(DM())(t)}function TM(t){return function(n){return n=n.lift(new gf(t.ngZone)),n.pipe(Ot(t.outsideAngular),Ct(t.insideAngular))}}var AM="firebase",SM="10.7.2";lt.registerVersion(AM,SM,"app-compat");var MM=["ngOnDestroy"],hv=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(MM.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var Zc=class{constructor(e){return e}},Pi=new k("angularfire2.app.options"),Ni=new k("angularfire2.app.name");function ls(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>lt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;PM("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Zc(s)}var PM=(t,...e)=>{tf()&&typeof console<"u"&&console[t](...e)},NM={provide:Zc,useFactory:ls,deps:[Pi,re,[new Mh,Ni]]},fv=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Pi,useValue:n},{provide:Ni,useValue:r}]}}constructor(n){lt.registerVersion("angularfire",Mi.full,"core"),lt.registerVersion("angularfire",Mi.full,"app-compat"),lt.registerVersion("angular",Ax.full,n.toString())}static \u0275fac=function(r){return new(r||t)(T(Dt))};static \u0275mod=Ke({type:t});static \u0275inj=We({providers:[NM]})}return t})();function Xc(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return OM(i,s)||(dv("error",`${e} was already initialized on the ${n} Firebase App with different settings.${RM?" You may need to reload as Firebase is not HMR aware.":""}`),dv("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function OM(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var RM=typeof module<"u"&&!!module.hot,dv=(t,...e)=>{tf()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var VM=new Map,LM={activated:!1,tokenObservers:[]},jM={initialized:!1,enabled:!1};function Gt(t){return VM.get(t)||Object.assign({},LM)}function yv(){return jM}var BM="https://content-firebaseappcheck.googleapis.com/v1";var UM="exchangeDebugToken",pv={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},x5=24*60*60*1e3;var _f=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return m(this,null,function*(){this.stop();try{this.pending=new Zl,this.pending.promise.catch(n=>{}),yield $M(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Zl,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function $M(t){return new Promise(e=>{setTimeout(e,t)})}var HM={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Zn=new E0("appCheck","AppCheck",HM);function xv(t){if(!Gt(t).activated)throw Zn.create("use-before-activation",{appName:t.name})}function vv(r,i){return m(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw Zn.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Zn.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw Zn.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Zn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function wv(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${BM}/projects/${n}/apps/${r}:${UM}?key=${i}`,body:{debug_token:e}}}var GM="firebase-app-check-database",qM=1,yf="firebase-app-check-store";var Jc=null;function zM(){return Jc||(Jc=new Promise((t,e)=>{try{let n=indexedDB.open(GM,qM);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Zn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yf,{keyPath:"compositeKey"})}}}catch(n){e(Zn.create("storage-open",{originalErrorMessage:n?.message}))}}),Jc)}function WM(t,e){return KM(QM(t),e)}function KM(t,e){return m(this,null,function*(){let r=(yield zM()).transaction(yf,"readwrite"),o=r.objectStore(yf).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Zn.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function QM(t){return`${t.options.appId}-${t.name}`}var xf=new Ca("@firebase/app-check");function mf(t,e){return ba()?WM(t,e).catch(n=>{xf.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ev(){return yv().enabled}function Iv(){return m(this,null,function*(){let t=yv();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YM={error:"UNKNOWN_ERROR"};function ZM(t){return x0.encodeString(JSON.stringify(t),!1)}function vf(t,e=!1){return m(this,null,function*(){let n=t.app;xv(n);let r=Gt(n),i=r.token,o;if(i&&!ds(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ds(c)?i=c:yield mf(n,void 0))}if(!e&&i&&ds(i))return{token:i.token};let s=!1;if(Ev()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vv(wv(n,yield Iv()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield mf(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Gt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?xf.warn(c.message):xf.error(c),o=c}let a;return i?o?ds(i)?a={token:i.token,internalError:o}:a=mv(o):(a={token:i.token},r.token=i,yield mf(n,i)):a=mv(o),s&&tP(n,a),a})}function XM(t){return m(this,null,function*(){let e=t.app;xv(e);let{provider:n}=Gt(e);if(Ev()){let r=yield Iv(),{token:i}=yield vv(wv(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function JM(t,e,n,r){let{app:i}=t,o=Gt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ds(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),gv(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gv(t))}function bv(t,e){let n=Gt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function gv(t){let{app:e}=t,n=Gt(e),r=n.tokenRefresher;r||(r=eP(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function eP(t){let{app:e}=t;return new _f(()=>m(this,null,function*(){let n=Gt(e),r;if(n.token?r=yield vf(t,!0):r=yield vf(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Gt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},pv.RETRIAL_MIN_WAIT,pv.RETRIAL_MAX_WAIT)}function tP(t,e){let n=Gt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ds(t){return t.expireTimeMillis-Date.now()>0}function mv(t){return{token:ZM(YM),error:t}}var wf=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Gt(this.app);for(let n of e)bv(this.app,n.next);return Promise.resolve()}};function nP(t,e){return new wf(t,e)}function rP(t){return{getToken:e=>vf(t,e),getLimitedUseToken:()=>XM(t),addTokenListener:e=>JM(t,"INTERNAL",e),removeTokenListener:e=>bv(t.app,e)}}var iP="@firebase/app-check",oP="0.8.1";var sP="app-check",_v="app-check-internal";function aP(){Do(new xr(sP,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return nP(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(_v).initialize()})),Do(new xr(_v,t=>{let e=t.getProvider("app-check").getImmediate();return rP(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(iP,oP)}aP();var cP=["localhost","0.0.0.0","127.0.0.1"],P5=typeof window<"u"&&cP.includes(window.location.hostname);var Ef=new k("angularfire2.auth.use-emulator"),If=new k("angularfire2.auth.settings"),bf=new k("angularfire2.auth.tenant-id"),Cf=new k("angularfire2.auth.langugage-code"),Df=new k("angularfire2.auth.use-device-language"),Tf=new k("angularfire.auth.persistence"),Af=(t,e,n,r,i,o,s,a)=>Xc(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),Dv=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,h,f){let y=new It,_=Dn(void 0).pipe(Ct(s.outsideAngular),Rt(()=>o.runOutsideAngular(()=>import("./chunk-UKU5HHAF.js"))),Ie(()=>ls(n,o,r)),Ie(x=>Af(x,o,a,u,l,d,c,h)),Ya({bufferSize:1,refCount:!1}));if(Rr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dn(null);else{_.pipe(Qa()).subscribe();let x=_.pipe(Rt(D=>D.getRedirectResult().then(N=>N,()=>null)),ft,Ya({bufferSize:1,refCount:!1})),I=_.pipe(Rt(D=>new ue(N=>({unsubscribe:o.runOutsideAngular(()=>D.onAuthStateChanged(O=>N.next(O),O=>N.error(O),()=>N.complete()))})))),M=_.pipe(Rt(D=>new ue(N=>({unsubscribe:o.runOutsideAngular(()=>D.onIdTokenChanged(O=>N.next(O),O=>N.error(O),()=>N.complete()))}))));this.authState=x.pipe(Za(I),Ot(s.outsideAngular),Ct(s.insideAngular)),this.user=x.pipe(Za(M),Ot(s.outsideAngular),Ct(s.insideAngular)),this.idToken=this.user.pipe(Rt(D=>D?tt(D.getIdToken()):Dn(null))),this.idTokenResult=this.user.pipe(Rt(D=>D?tt(D.getIdTokenResult()):Dn(null))),this.credential=pd(x,y,this.authState.pipe(zn(D=>!D))).pipe(Ie(D=>D?.user?D:null),Ot(s.outsideAngular),Ct(s.insideAngular))}return hv(this,_,o,{spy:{apply:(x,I,M)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&M.then(D=>y.next(D))}}})}static \u0275fac=function(r){return new(r||t)(T(Pi),T(Ni,8),T(Dt),T(re),T(Yc),T(Ef,8),T(If,8),T(bf,8),T(Cf,8),T(Df,8),T(Tf,8),T(kr,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var lP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zt={},b,Yf=Yf||{},V=lP||self;function fu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Cs(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function dP(t){return Object.prototype.hasOwnProperty.call(t,Sf)&&t[Sf]||(t[Sf]=++hP)}var Sf="closure_uid_"+(1e9*Math.random()>>>0),hP=0;function fP(t,e,n){return t.call.apply(t.bind,arguments)}function pP(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ye(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ye=fP:Ye=pP,Ye.apply(null,arguments)}function eu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Re(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Xn(){this.s=this.s,this.o=this.o}var gP=0;Xn.prototype.s=!1;Xn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gP!=0)&&dP(this)};Xn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jv=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Zf(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tv(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(fu(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Ze(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var mP=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};V.addEventListener("test",n,e),V.removeEventListener("test",n,e)}catch{}return t}();function _s(t){return/^[\s\xa0]*$/.test(t)}function pu(){var t=V.navigator;return t&&(t=t.userAgent)?t:""}function hn(t){return pu().indexOf(t)!=-1}function Xf(t){return Xf[" "](t),t}Xf[" "]=function(){};function _P(t,e){var n=oN;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var yP=hn("Opera"),Fi=hn("Trident")||hn("MSIE"),Bv=hn("Edge"),Rf=Bv||Fi,Uv=hn("Gecko")&&!(pu().toLowerCase().indexOf("webkit")!=-1&&!hn("Edge"))&&!(hn("Trident")||hn("MSIE"))&&!hn("Edge"),xP=pu().toLowerCase().indexOf("webkit")!=-1&&!hn("Edge");function $v(){var t=V.document;return t?t.documentMode:void 0}var kf;e:{if(tu="",nu=function(){var t=pu();if(Uv)return/rv:([^\);]+)(\)|;)/.exec(t);if(Bv)return/Edge\/([\d\.]+)/.exec(t);if(Fi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(xP)return/WebKit\/(\S+)/.exec(t);if(yP)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),nu&&(tu=nu?nu[1]:""),Fi&&(ru=$v(),ru!=null&&ru>parseFloat(tu))){kf=String(ru);break e}kf=tu}var tu,nu,ru,Ff;V.document&&Fi?(Mf=$v(),Ff=Mf||parseInt(kf,10)||void 0):Ff=void 0;var Mf,vP=Ff;function ys(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Uv){e:{try{Xf(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wP[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ys.$.h.call(this)}}Re(ys,Ze);var wP={2:"touch",3:"pen",4:"mouse"};ys.prototype.h=function(){ys.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ds="closure_listenable_"+(1e6*Math.random()|0),EP=0;function IP(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++EP,this.fa=this.ia=!1}function gu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Jf(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function bP(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Hv(t){let e={};for(let n in t)e[n]=t[n];return e}var Av="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gv(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<Av.length;o++)n=Av[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mu(t){this.src=t,this.g={},this.h=0}mu.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Lf(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new IP(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Vf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=jv(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(gu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Lf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var ep="closure_lm_"+(1e6*Math.random()|0),Pf={};function qv(t,e,n,r,i){if(r&&r.once)return Wv(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qv(t,e[o],n,r,i);return null}return n=rp(n),t&&t[Ds]?t.O(e,n,Cs(r)?!!r.capture:!!r,i):zv(t,e,n,!1,r,i)}function zv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Cs(i)?!!i.capture:!!i,a=np(t);if(a||(t[ep]=a=new mu(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=CP(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mP||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qv(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function CP(){function t(n){return e.call(t.src,t.listener,n)}let e=DP;return t}function Wv(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wv(t,e[o],n,r,i);return null}return n=rp(n),t&&t[Ds]?t.P(e,n,Cs(r)?!!r.capture:!!r,i):zv(t,e,n,!0,r,i)}function Kv(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Kv(t,e[o],n,r,i);else r=Cs(r)?!!r.capture:!!r,n=rp(n),t&&t[Ds]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Lf(o,n,r,i),-1<n&&(gu(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=np(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Lf(e,n,r,i)),(n=-1<t?e[t]:null)&&tp(n))}function tp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ds])Vf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=np(e))?(Vf(n,t),n.h==0&&(n.src=null,e[ep]=null)):gu(t)}}}function Qv(t){return t in Pf?Pf[t]:Pf[t]="on"+t}function DP(t,e){if(t.fa)t=!0;else{e=new ys(e,this);var n=t.listener,r=t.la||t.src;t.ia&&tp(t),t=n.call(r,e)}return t}function np(t){return t=t[ep],t instanceof mu?t:null}var Nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rp(t){return typeof t=="function"?t:(t[Nf]||(t[Nf]=function(e){return t.handleEvent(e)}),t[Nf])}function Oe(){Xn.call(this),this.i=new mu(this),this.S=this,this.J=null}Re(Oe,Xn);Oe.prototype[Ds]=!0;Oe.prototype.removeEventListener=function(t,e,n,r){Kv(this,t,e,n,r)};function Ue(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ze(e,t);else if(e instanceof Ze)e.target=e.target||t;else{var i=e;e=new Ze(r,t),Gv(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=iu(s,r,!0,e)&&i}if(s=e.g=t,i=iu(s,r,!0,e)&&i,i=iu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=iu(s,r,!1,e)&&i}Oe.prototype.N=function(){if(Oe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gu(n[r]);delete t.g[e],t.h--}}this.J=null};Oe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Oe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function iu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Vf(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var ip=V.JSON.stringify,jf=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function TP(){var t=op;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Bf=class{constructor(){this.h=this.g=null}add(e,n){let r=Yv.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Yv=new jf(()=>new Uf,t=>t.reset()),Uf=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function AP(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function SP(t){V.setTimeout(()=>{throw t},0)}var xs,vs=!1,op=new Bf,Zv=()=>{let t=V.Promise.resolve(void 0);xs=()=>{t.then(MP)}},MP=()=>{for(var t;t=TP();){try{t.h.call(t.g)}catch(n){SP(n)}var e=Yv;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vs=!1};function _u(t,e){Oe.call(this),this.h=t||1,this.g=e||V,this.j=Ye(this.qb,this),this.l=Date.now()}Re(_u,Oe);b=_u.prototype;b.ga=!1;b.T=null;b.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ue(this,"tick"),this.ga&&(sp(this),this.start()))}};b.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}b.N=function(){_u.$.N.call(this),sp(this),delete this.g};function ap(t,e,n){if(typeof t=="function")n&&(t=Ye(t,n));else if(t&&typeof t.handleEvent=="function")t=Ye(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function Xv(t){t.g=ap(()=>{t.g=null,t.i&&(t.i=!1,Xv(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var $f=class extends Xn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xv(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function ws(t){Xn.call(this),this.h=t,this.g={}}Re(ws,Xn);var Sv=[];function Jv(t,e,n,r){Array.isArray(n)||(n&&(Sv[0]=n.toString()),n=Sv);for(var i=0;i<n.length;i++){var o=qv(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ew(t){Jf(t.g,function(e,n){this.g.hasOwnProperty(n)&&tp(e)},t),t.g={}}ws.prototype.N=function(){ws.$.N.call(this),ew(this)};ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function yu(){this.g=!0}yu.prototype.Ea=function(){this.g=!1};function PP(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function NP(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ri(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+RP(t,n)+(r?" "+r:"")})}function OP(t,e){t.info(function(){return"TIMEOUT: "+e})}yu.prototype.info=function(){};function RP(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return ip(n)}catch{return e}}var jr={},Mv=null;function xu(){return Mv=Mv||new Oe}jr.Ta="serverreachability";function tw(t){Ze.call(this,jr.Ta,t)}Re(tw,Ze);function Es(t){let e=xu();Ue(e,new tw(e))}jr.STAT_EVENT="statevent";function nw(t,e){Ze.call(this,jr.STAT_EVENT,t),this.stat=e}Re(nw,Ze);function st(t){let e=xu();Ue(e,new nw(e,t))}jr.Ua="timingevent";function rw(t,e){Ze.call(this,jr.Ua,t),this.size=e}Re(rw,Ze);function Ts(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var vu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},iw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cp(){}cp.prototype.h=null;function Pv(t){return t.h||(t.h=t.i())}function ow(){}var As={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function up(){Ze.call(this,"d")}Re(up,Ze);function lp(){Ze.call(this,"c")}Re(lp,Ze);var Hf;function wu(){}Re(wu,cp);wu.prototype.g=function(){return new XMLHttpRequest};wu.prototype.i=function(){return{}};Hf=new wu;function Ss(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ws(this),this.P=kP,t=Rf?125:void 0,this.V=new _u(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sw}function sw(){this.i=null,this.g="",this.h=!1}var kP=45e3,aw={},Gf={};b=Ss.prototype;b.setTimeout=function(t){this.P=t};function qf(t,e,n){t.L=1,t.A=Iu(Rn(e)),t.u=n,t.S=!0,cw(t,null)}function cw(t,e){t.G=Date.now(),Ms(t),t.B=Rn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),mw(n.i,"t",r),t.o=0,n=t.l.J,t.h=new sw,t.g=Vw(t.l,n?e:null,!t.u),0<t.O&&(t.M=new $f(Ye(t.Pa,t,t.g),t.O)),Jv(t.U,t.g,"readystatechange",t.nb),e=t.I?Hv(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Es(),PP(t.j,t.v,t.B,t.m,t.W,t.u)}b.nb=function(t){t=t.target;let e=this.M;e&&fn(t)==3?e.l():this.Pa(t)};b.Pa=function(t){try{if(t==this.g)e:{let l=fn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Rf||this.g&&(this.h.h||this.g.ja()||kv(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Es(3):Es(2)),Eu(this);var n=this.g.da();this.ca=n;t:if(uw(this)){var r=kv(this.g);t="";var i=r.length,o=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),ms(this);var s="";break t}this.h.i=new V.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,NP(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_s(a)){var u=a;break t}}u=null}if(n=u)Ri(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,n);else{this.i=!1,this.s=3,st(12),Fr(this),ms(this);break e}}this.S?(lw(this,l,s),Rf&&this.i&&l==3&&(Jv(this.U,this.V,"tick",this.mb),this.V.start())):(Ri(this.j,this.m,s,null),zf(this,s)),l==4&&Fr(this),this.i&&!this.J&&(l==4?Ow(this.l,this):(this.i=!1,Ms(this)))}else nN(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),Fr(this),ms(this)}}}catch{}finally{}};function uw(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function lw(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=FP(t,n),i==Gf){e==4&&(t.s=4,st(14),r=!1),Ri(t.j,t.m,null,"[Incomplete Response]");break}else if(i==aw){t.s=4,st(15),Ri(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ri(t.j,t.m,i,null),zf(t,i);uw(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,st(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mp(e),e.M=!0,st(11))):(Ri(t.j,t.m,n,"[Invalid Chunked Response]"),Fr(t),ms(t))}b.mb=function(){if(this.g){var t=fn(this.g),e=this.g.ja();this.o<e.length&&(Eu(this),lw(this,t,e),this.i&&t!=4&&Ms(this))}};function FP(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Gf:(n=Number(e.substring(n,r)),isNaN(n)?aw:(r+=1,r+n>e.length?Gf:(e=e.slice(r,r+n),t.o=r+n,e)))}b.cancel=function(){this.J=!0,Fr(this)};function Ms(t){t.Y=Date.now()+t.P,dw(t,t.P)}function dw(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ts(Ye(t.lb,t),e)}function Eu(t){t.C&&(V.clearTimeout(t.C),t.C=null)}b.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(OP(this.j,this.B),this.L!=2&&(Es(),st(17)),Fr(this),this.s=2,ms(this)):dw(this,this.Y-t)};function ms(t){t.l.H==0||t.J||Ow(t.l,t)}function Fr(t){Eu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,sp(t.V),ew(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function zf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Wf(n.i,t))){if(!t.K&&Wf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)uu(n),Du(n);else break e;gp(n),st(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ts(Ye(n.ib,n),6e3));if(1>=xw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vr(n,11)}else if((t.K||n.g==t)&&uu(n),!_s(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=r.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(dp(o,o.h),o.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,le(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=Fw(r,r.J?r.pa:null,r.Y),s.K){vw(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Eu(a),Ms(a)),r.g=s}else Pw(r);0<n.j.length&&Tu(n)}else u[0]!="stop"&&u[0]!="close"||Vr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Vr(n,7):pp(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Es(4)}catch{}}function VP(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function LP(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function hw(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=LP(t),r=VP(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var fw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jP(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Lr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Lr){this.h=t.h,au(this,t.j),this.s=t.s,this.g=t.g,cu(this,t.m),this.l=t.l;var e=t.i,n=new Is;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Nv(this,n),this.o=t.o}else t&&(e=String(t).match(fw))?(this.h=!1,au(this,e[1]||"",!0),this.s=ps(e[2]||""),this.g=ps(e[3]||"",!0),cu(this,e[4]),this.l=ps(e[5]||"",!0),Nv(this,e[6]||"",!0),this.o=ps(e[7]||"")):(this.h=!1,this.i=new Is(null,this.h))}Lr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(gs(e,Ov,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(gs(e,Ov,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(gs(n,n.charAt(0)=="/"?$P:UP,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",gs(n,GP)),t.join("")};function Rn(t){return new Lr(t)}function au(t,e,n){t.j=n?ps(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Nv(t,e,n){e instanceof Is?(t.i=e,qP(t.i,t.h)):(n||(e=gs(e,HP)),t.i=new Is(e,t.h))}function le(t,e,n){t.i.set(e,n)}function Iu(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ps(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,BP),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BP(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ov=/[#\/\?@]/g,UP=/[#\?:]/g,$P=/[#\?]/g,HP=/[#\?@]/g,GP=/#/g;function Is(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jn(t){t.g||(t.g=new Map,t.h=0,t.i&&jP(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}b=Is.prototype;b.add=function(t,e){Jn(this),this.i=null,t=Vi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function pw(t,e){Jn(t),e=Vi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gw(t,e){return Jn(t),e=Vi(t,e),t.g.has(e)}b.forEach=function(t,e){Jn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};b.ta=function(){Jn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};b.Z=function(t){Jn(this);let e=[];if(typeof t=="string")gw(this,t)&&(e=e.concat(this.g.get(Vi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};b.set=function(t,e){return Jn(this),this.i=null,t=Vi(this,t),gw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};b.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function mw(t,e,n){pw(t,e),0<n.length&&(t.i=null,t.g.set(Vi(t,e),Zf(n)),t.h+=n.length)}b.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Vi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qP(t,e){e&&!t.j&&(Jn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(pw(this,r),mw(this,i,n))},t)),t.j=e}var zP=class{constructor(t,e){this.g=t,this.map=e}};function _w(t){this.l=t||WP,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ka&&V.g.Ka()&&V.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WP=10;function yw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function xw(t){return t.h?1:t.g?t.g.size:0}function Wf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function dp(t,e){t.g?t.g.add(e):t.h=e}function vw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_w.prototype.cancel=function(){if(this.i=ww(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function ww(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Zf(t.i)}var KP=class{stringify(t){return V.JSON.stringify(t,void 0)}parse(t){return V.JSON.parse(t,void 0)}};function QP(){this.g=new KP}function YP(t,e,n){let r=n||"";try{hw(t,function(i,o){let s=i;Cs(i)&&(s=ip(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZP(t,e){let n=new yu;if(V.Image){let r=new Image;r.onload=eu(ou,n,r,"TestLoadImage: loaded",!0,e),r.onerror=eu(ou,n,r,"TestLoadImage: error",!1,e),r.onabort=eu(ou,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=eu(ou,n,r,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ou(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ps(t){this.l=t.ec||null,this.j=t.ob||!1}Re(Ps,cp);Ps.prototype.g=function(){return new bu(this.l,this.j)};Ps.prototype.i=function(t){return function(){return t}}({});function bu(t,e){Oe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=hp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Re(bu,Oe);var hp=0;b=bu.prototype;b.open=function(t,e){if(this.readyState!=hp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bs(this)};b.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||V).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=hp};b.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ew(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Ew(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}b.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ns(this):bs(this),this.readyState==3&&Ew(this)}};b.Za=function(t){this.g&&(this.response=this.responseText=t,Ns(this))};b.Ya=function(t){this.g&&(this.response=t,Ns(this))};b.ka=function(){this.g&&Ns(this)};function Ns(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bs(t)}b.setRequestHeader=function(t,e){this.v.append(t,e)};b.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};b.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XP=V.JSON.parse;function _e(t){Oe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Iw,this.L=this.M=!1}Re(_e,Oe);var Iw="",JP=/^https?$/i,eN=["POST","PUT"];b=_e.prototype;b.Oa=function(t){this.M=t};b.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Hf.g(),this.C=this.u?Pv(this.u):Pv(Hf),this.g.onreadystatechange=Ye(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){Rv(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=V.FormData&&t instanceof V.FormData,!(0<=jv(eN,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Dw(this),0<this.B&&((this.L=tN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.ua,this)):this.A=ap(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Rv(this,o)}};function tN(t){return Fi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}b.ua=function(){typeof Yf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function Rv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bw(t),Cu(t)}function bw(t){t.F||(t.F=!0,Ue(t,"complete"),Ue(t,"error"))}b.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),Cu(this))};b.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cu(this,!0)),_e.$.N.call(this)};b.La=function(){this.s||(this.G||this.v||this.l?Cw(this):this.kb())};b.kb=function(){Cw(this)};function Cw(t){if(t.h&&typeof Yf<"u"&&(!t.C[1]||fn(t)!=4||t.da()!=2)){if(t.v&&fn(t)==4)ap(t.La,0,t);else if(Ue(t,"readystatechange"),fn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(fw)[1]||null;!i&&V.self&&V.self.location&&(i=V.self.location.protocol.slice(0,-1)),r=!JP.test(i?i.toLowerCase():"")}n=r}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var o=2<fn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",bw(t)}}finally{Cu(t)}}}}function Cu(t,e){if(t.g){Dw(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function Dw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}b.isActive=function(){return!!this.g};function fn(t){return t.g?t.g.readyState:0}b.da=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}};b.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};b.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XP(e)}};function kv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Iw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function nN(t){let e={};t=(t.g&&2<=fn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(_s(t[r]))continue;var n=AP(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}bP(e,function(r){return r.join(", ")})}b.Ia=function(){return this.m};b.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Tw(t){let e="";return Jf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function fp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):le(t,e,n))}function hs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Aw(t){this.Ga=0,this.j=[],this.l=new yu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hs("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hs("baseRetryDelayMs",5e3,t),this.hb=hs("retryDelaySeedMs",1e4,t),this.eb=hs("forwardChannelMaxRetries",2,t),this.xa=hs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _w(t&&t.concurrentRequestLimit),this.Ja=new QP,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}b=Aw.prototype;b.ra=8;b.H=1;function pp(t){if(Sw(t),t.H==3){var e=t.W++,n=Rn(t.I);if(le(n,"SID",t.K),le(n,"RID",e),le(n,"TYPE","terminate"),Os(t,n),e=new Ss(t,t.l,e),e.L=2,e.A=Iu(Rn(n)),n=!1,V.navigator&&V.navigator.sendBeacon)try{n=V.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&V.Image&&(new Image().src=e.A,n=!0),n||(e.g=Vw(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ms(e)}kw(t)}function Du(t){t.g&&(mp(t),t.g.cancel(),t.g=null)}function Sw(t){Du(t),t.u&&(V.clearTimeout(t.u),t.u=null),uu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function Tu(t){if(!yw(t.i)&&!t.m){t.m=!0;var e=t.Na;xs||Zv(),vs||(xs(),vs=!0),op.add(e,t),t.C=0}}function rN(t,e){return xw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ts(Ye(t.Na,t,e),Rw(t,t.C)),t.C++,!0)}b.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ss(this,this.l,t),o=this.s;if(this.U&&(o?(o=Hv(o),Gv(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Mw(this,i,e),n=Rn(this.I),le(n,"RID",t),le(n,"CVER",22),this.F&&le(n,"X-HTTP-Session-Id",this.F),Os(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Tw(o)))+"&"+e:this.o&&fp(n,this.o,o)),dp(this.i,i),this.bb&&le(n,"TYPE","init"),this.P?(le(n,"$req",e),le(n,"SID","null"),i.aa=!0,qf(i,n,null)):qf(i,n,e),this.H=2}}else this.H==3&&(t?Fv(this,t):this.j.length==0||yw(this.i)||Fv(this))};function Fv(t,e){var n;e?n=e.m:n=t.W++;let r=Rn(t.I);le(r,"SID",t.K),le(r,"RID",n),le(r,"AID",t.V),Os(t,r),t.o&&t.s&&fp(r,t.o,t.s),n=new Ss(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Mw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),dp(t.i,n),qf(n,r,e)}function Os(t,e){t.na&&Jf(t.na,function(n,r){le(e,r,n)}),t.h&&hw({},function(n,r){le(e,r,n)})}function Mw(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ye(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{YP(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Pw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;xs||Zv(),vs||(xs(),vs=!0),op.add(e,t),t.A=0}}function gp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ts(Ye(t.Ma,t),Rw(t,t.A)),t.A++,!0)}b.Ma=function(){if(this.u=null,Nw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ts(Ye(this.jb,this),t)}};b.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,st(10),Du(this),Nw(this))};function mp(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function Nw(t){t.g=new Ss(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rn(t.wa);le(e,"RID","rpc"),le(e,"SID",t.K),le(e,"AID",t.V),le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&le(e,"TO",t.qa),le(e,"TYPE","xmlhttp"),Os(t,e),t.o&&t.s&&fp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Iu(Rn(e)),n.u=null,n.S=!0,cw(n,t)}b.ib=function(){this.v!=null&&(this.v=null,Du(this),gp(this),st(19))};function uu(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function Ow(t,e){var n=null;if(t.g==e){uu(t),mp(t),t.g=null;var r=2}else if(Wf(t.i,e))n=e.F,vw(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=xu(),Ue(r,new rw(r,n)),Tu(t)}else Pw(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&rN(t,e)||r==2&&gp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Vr(t,5);break;case 4:Vr(t,10);break;case 3:Vr(t,6);break;default:Vr(t,2)}}}function Rw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ye(t.pb,t);n||(n=new Lr("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||au(n,"https"),Iu(n)),ZP(n.toString(),r)}else st(2);t.H=0,t.h&&t.h.za(e),kw(t),Sw(t)}b.pb=function(t){t?(this.l.info("Successfully pinged google.com"),st(2)):(this.l.info("Failed to ping google.com"),st(1))};function kw(t){if(t.H=0,t.ma=[],t.h){let e=ww(t.i);(e.length!=0||t.j.length!=0)&&(Tv(t.ma,e),Tv(t.ma,t.j),t.i.i.length=0,Zf(t.j),t.j.length=0),t.h.ya()}}function Fw(t,e,n){var r=n instanceof Lr?Rn(n):new Lr(n);if(r.g!="")e&&(r.g=e+"."+r.g),cu(r,r.m);else{var i=V.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Lr(null);r&&au(o,r),e&&(o.g=e),i&&cu(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&le(r,n,e),le(r,"VER",t.ra),Os(t,r),r}function Vw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new _e(new Ps({ob:n})):new _e(t.va),e.Oa(t.J),e}b.isActive=function(){return!!this.h&&this.h.isActive(this)};function Lw(){}b=Lw.prototype;b.Ba=function(){};b.Aa=function(){};b.za=function(){};b.ya=function(){};b.isActive=function(){return!0};b.Va=function(){};function lu(){if(Fi&&!(10<=Number(vP)))throw Error("Environmental error: no available transport.")}lu.prototype.g=function(t,e){return new yt(t,e)};function yt(t,e){Oe.call(this),this.g=new Aw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!_s(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_s(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Li(this)}Re(yt,Oe);yt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;st(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Fw(t,null,t.Y),Tu(t)};yt.prototype.close=function(){pp(this.g)};yt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ip(t),t=n);e.j.push(new zP(e.fb++,t)),e.H==3&&Tu(e)};yt.prototype.N=function(){this.g.h=null,delete this.j,pp(this.g),delete this.g,yt.$.N.call(this)};function jw(t){up.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Re(jw,up);function Bw(){lp.call(this),this.status=1}Re(Bw,lp);function Li(t){this.g=t}Re(Li,Lw);Li.prototype.Ba=function(){Ue(this.g,"a")};Li.prototype.Aa=function(t){Ue(this.g,new jw(t))};Li.prototype.za=function(t){Ue(this.g,new Bw)};Li.prototype.ya=function(){Ue(this.g,"b")};function iN(){this.blockSize=-1}function qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Re(qt,iN);qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Of(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Of(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Of(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Of(this,r),i=0;break}}this.h=i,this.i+=e};qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function te(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var oN={};function _p(t){return-128<=t&&128>t?_P(t,function(e){return new te([e|0],0>e?-1:0)}):new te([t|0],0>t?-1:0)}function pn(t){if(isNaN(t)||!isFinite(t))return ki;if(0>t)return Be(pn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Kf;return new te(e,0)}function Uw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Be(Uw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=pn(Math.pow(e,8)),r=ki,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=pn(Math.pow(e,o)),r=r.R(o).add(pn(s))):(r=r.R(n),r=r.add(pn(s)))}return r}var Kf=4294967296,ki=_p(0),Qf=_p(1),Vv=_p(16777216);b=te.prototype;b.ea=function(){if(Tt(this))return-Be(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Kf+r)*e,e*=Kf}return t};b.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(On(this))return"0";if(Tt(this))return"-"+Be(this).toString(t);for(var e=pn(Math.pow(t,6)),n=this,r="";;){var i=hu(n,e).g;n=du(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,On(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};b.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function On(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Tt(t){return t.h==-1}b.X=function(t){return t=du(this,t),Tt(t)?-1:On(t)?0:1};function Be(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new te(n,~t.h).add(Qf)}b.abs=function(){return Tt(this)?Be(this):this};b.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new te(n,n[n.length-1]&-2147483648?-1:0)};function du(t,e){return t.add(Be(e))}b.R=function(t){if(On(this)||On(t))return ki;if(Tt(this))return Tt(t)?Be(this).R(Be(t)):Be(Be(this).R(t));if(Tt(t))return Be(this.R(Be(t)));if(0>this.X(Vv)&&0>t.X(Vv))return pn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,su(n,2*r+2*i),n[2*r+2*i+1]+=o*c,su(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,su(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,su(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new te(n,0)};function su(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fs(t,e){this.g=t,this.h=e}function hu(t,e){if(On(e))throw Error("division by zero");if(On(t))return new fs(ki,ki);if(Tt(t))return e=hu(Be(t),e),new fs(Be(e.g),Be(e.h));if(Tt(e))return e=hu(t,Be(e)),new fs(Be(e.g),e.h);if(30<t.g.length){if(Tt(t)||Tt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Qf,r=e;0>=r.X(t);)n=Lv(n),r=Lv(r);var i=Oi(n,1),o=Oi(r,1);for(r=Oi(r,2),n=Oi(n,2);!On(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Oi(r,1),n=Oi(n,1)}return e=du(t,i.R(e)),new fs(i,e)}for(i=ki;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=pn(n),s=o.R(e);Tt(s)||0<s.X(t);)n-=r,o=pn(n),s=o.R(e);On(o)&&(o=Qf),i=i.add(o),t=du(t,s)}return new fs(i,t)}b.gb=function(t){return hu(this,t).h};b.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new te(n,this.h&t.h)};b.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new te(n,this.h|t.h)};b.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new te(n,this.h^t.h)};function Lv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new te(n,t.h)}function Oi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new te(i,t.h)}lu.prototype.createWebChannel=lu.prototype.g;yt.prototype.send=yt.prototype.u;yt.prototype.open=yt.prototype.m;yt.prototype.close=yt.prototype.close;vu.NO_ERROR=0;vu.TIMEOUT=8;vu.HTTP_ERROR=6;iw.COMPLETE="complete";ow.EventType=As;As.OPEN="a";As.CLOSE="b";As.ERROR="c";As.MESSAGE="d";Oe.prototype.listen=Oe.prototype.O;_e.prototype.listenOnce=_e.prototype.P;_e.prototype.getLastError=_e.prototype.Sa;_e.prototype.getLastErrorCode=_e.prototype.Ia;_e.prototype.getStatus=_e.prototype.da;_e.prototype.getResponseJson=_e.prototype.Wa;_e.prototype.getResponseText=_e.prototype.ja;_e.prototype.send=_e.prototype.ha;_e.prototype.setWithCredentials=_e.prototype.Oa;qt.prototype.digest=qt.prototype.l;qt.prototype.reset=qt.prototype.reset;qt.prototype.update=qt.prototype.j;te.prototype.add=te.prototype.add;te.prototype.multiply=te.prototype.R;te.prototype.modulo=te.prototype.gb;te.prototype.compare=te.prototype.X;te.prototype.toNumber=te.prototype.ea;te.prototype.toString=te.prototype.toString;te.prototype.getBits=te.prototype.D;te.fromNumber=pn;te.fromString=Uw;var $w=zt.createWebChannelTransport=function(){return new lu},Hw=zt.getStatEventTarget=function(){return xu()},Au=zt.ErrorCode=vu,Gw=zt.EventType=iw,qw=zt.Event=jr,yp=zt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},W5=zt.FetchXmlHttpFactory=Ps,Rs=zt.WebChannel=ow,zw=zt.XhrIo=_e,Ww=zt.Md5=qt,Br=zt.Integer=te;var Kw="@firebase/firestore";var Ae=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ae.UNAUTHENTICATED=new Ae(null),Ae.GOOGLE_CREDENTIALS=new Ae("google-credentials-uid"),Ae.FIRST_PARTY=new Ae("first-party-uid"),Ae.MOCK_USER=new Ae("mock-user");var go="10.7.2";var sr=new Ca("@firebase/firestore");function Hi(){return sr.logLevel}function WE(t){sr.setLogLevel(t)}function w(t,...e){if(sr.logLevel<=Zt.DEBUG){let n=e.map(vm);sr.debug(`Firestore (${go}): ${t}`,...n)}}function ve(t,...e){if(sr.logLevel<=Zt.ERROR){let n=e.map(vm);sr.error(`Firestore (${go}): ${t}`,...n)}}function St(t,...e){if(sr.logLevel<=Zt.WARN){let n=e.map(vm);sr.warn(`Firestore (${go}): ${t}`,...n)}}function vm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function A(t="Unexpected state"){let e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw ve(e),new Error(e)}function S(t,e){t||A()}function KE(t,e){t||A()}function C(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},v=class extends w0{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Se=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ju=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ip=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ae.UNAUTHENTICATED))}shutdown(){}},bp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Cp=class{constructor(e){this.t=e,this.currentUser=Ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Se;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Se,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>m(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Se)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(S(typeof r.accessToken=="string"),new ju(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return S(e===null||typeof e=="string"),new Ae(e)}},Dp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ae.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Tp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Dp(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ap=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sp=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,w("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(S(typeof n.token=="string"),this.R=n.token,new Ap(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function sN(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=sN(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function j(t,e){return t<e?-1:t>e?1:0}function Xi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function QE(t){return t+"\0"}var me=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?j(this.nanoseconds,e.nanoseconds):j(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var P=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new me(0,0))}static max(){return new t(new me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&A(),r===void 0?r=e.length-n:r>e.length-n&&A(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Y=class t extends Uu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},aN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,we=class t extends Uu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return aN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new v(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new v(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new v(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var E=class t{constructor(e){this.path=e}static fromPath(e){return new t(Y.fromString(e))}static fromName(e){return new t(Y.fromString(e).popFirst(5))}static empty(){return new t(Y.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Y.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Y.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Y(e.slice()))}};var Ji=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Mp(t){return t.fields.find(e=>e.kind===2)}function $r(t){return t.fields.filter(e=>e.kind!==2)}Ji.UNKNOWN_ID=-1;var Qi=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var zs=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Mt.min())}};function YE(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=P.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Mt(i,E.empty(),e)}function ZE(t){return new Mt(t.readTime,t.key,-1)}var Mt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(P.min(),E.empty(),-1)}static max(){return new t(P.max(),E.empty(),-1)}};function wm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=E.comparator(t.documentKey,e.documentKey),n!==0?n:j(t.largestBatchId,e.largestBatchId))}var XE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$u=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mr(t){return m(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==XE)throw t;w("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Hu=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Se,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Kr(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Em(r.target.error);this.V.reject(new Kr(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Kr(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Np(n)}},Vn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Co())===12.2&&ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),Hr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ba())return!1;if(t.C())return!0;let e=Co(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return m(this,null,function*(){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Kr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new v(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new v(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Kr(e,s))},i.onupgradeneeded=o=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return m(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Hu.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(w("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Pp=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Hr(this.k.delete())}},Kr=class extends v{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function _r(t){return t.name==="IndexedDbTransactionError"}var Np=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(w("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hr(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),Hr(this.store.add(e))}get(e){return Hr(this.store.get(e)).next(n=>(n===void 0&&(n=null),w("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),Hr(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),Hr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){w("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Em(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Pp(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Hr(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Em(r.target.error);n(i)}})}var Qw=!1;function Em(t){let e=Vn.S(Co());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new v("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Qw||(Qw=!0,setTimeout(()=>{throw r},0)),r}}return t}var Op=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){w("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{w("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){_r(n)?w("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield mr(n)}yield this.ee(6e4)}))}},Rp=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return w("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(w("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=ZE(o);wm(s,r)>0&&(r=s)}),new Mt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var xt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ga(t){return t==null}function Ws(t){return t===0&&1/t==-1/0}function JE(t){return typeof t=="number"&&Number.isInteger(t)&&!Ws(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function at(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yw(e)),e=cN(t.get(n),e);return Yw(e)}function cN(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Yw(t){return t+""}function gn(t){let e=t.length;if(S(e>=2),e===2)return S(t.charAt(0)===""&&t.charAt(1)===""),Y.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&A(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:A()}o=s+2}return new Y(r)}var Zw=["userId","batchId"];function Ou(t,e){return[t,at(e)]}function eI(t,e,n){return[t,at(e),n]}var uN={},lN=["prefixPath","collectionGroup","readTime","documentId"],dN=["prefixPath","collectionGroup","documentId"],hN=["collectionGroup","readTime","prefixPath","documentId"],fN=["canonicalId","targetId"],pN=["targetId","path"],gN=["path","targetId"],mN=["collectionId","parent"],_N=["indexId","uid"],yN=["uid","sequenceNumber"],xN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vN=["indexId","uid","orderedDocumentKey"],wN=["userId","collectionPath","documentId"],EN=["userId","collectionPath","largestBatchId"],IN=["userId","collectionGroup","largestBatchId"],tI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bN=[...tI,"documentOverlays"],nI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rI=nI,CN=[...rI,"indexConfiguration","indexState","indexEntries"];var Ks=class extends $u{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Fe(t,e){let n=C(t);return Vn.M(n.ae,e)}function Xw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iI(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var de=class t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ki(this.root,e,this.comparator,!0)}},Ki=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();let e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(e,n,r,i,o){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var se=class t{constructor(e){this.comparator=e,this.data=new de(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gu(this.data.getIterator())}getIteratorFrom(e){return new Gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ji(t){return t.hasNext()?t.getNext():void 0}var vt=class t{constructor(e){this.fields=e,e.sort(we.comparator)}static empty(){return new t([])}unionWith(e){let n=new se(we.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var qu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function oI(){return typeof atob<"u"}var ke=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qu("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return j(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ke.EMPTY_BYTE_STRING=new ke("");var DN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(S(!!t),typeof t=="string"){let e=0,n=DN.exec(t);if(S(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ye(t.seconds),nanos:ye(t.nanos)}}function ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cr(t){return typeof t=="string"?ke.fromBase64String(t):ke.fromUint8Array(t)}function kl(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Im(t){let e=t.mapValue.fields.__previous_value__;return kl(e)?Im(e):e}function Qs(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new me(e.seconds,e.nanos)}var kp=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ur=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ru={nullValue:"NULL_VALUE"};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kl(t)?4:sI(t)?9007199254740991:10:A()}function vn(t,e){if(t===e)return!0;let n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qs(t).isEqual(Qs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),a=ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return cr(i.bytesValue).isEqual(cr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ye(i.geoPointValue.latitude)===ye(o.geoPointValue.latitude)&&ye(i.geoPointValue.longitude)===ye(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ye(i.integerValue)===ye(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ye(i.doubleValue),a=ye(o.doubleValue);return s===a?Ws(s)===Ws(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Xi(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Xw(s)!==Xw(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vn(s[c],a[c])))return!1;return!0}(t,e);default:return A()}}function Ys(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function lr(t,e){if(t===e)return 0;let n=Qr(t),r=Qr(e);if(n!==r)return j(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return j(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ye(o.integerValue||o.doubleValue),c=ye(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Jw(t.timestampValue,e.timestampValue);case 4:return Jw(Qs(t),Qs(e));case 5:return j(t.stringValue,e.stringValue);case 6:return function(o,s){let a=cr(o),c=cr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=j(a[u],c[u]);if(l!==0)return l}return j(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=j(ye(o.latitude),ye(s.latitude));return a!==0?a:j(ye(o.longitude),ye(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=lr(a[u],c[u]);if(l)return l}return j(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ir.mapValue&&s===ir.mapValue)return 0;if(o===ir.mapValue)return 1;if(s===ir.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=j(c[d],l[d]);if(h!==0)return h;let f=lr(a[c[d]],u[l[d]]);if(f!==0)return f}return j(c.length,l.length)}(t.mapValue,e.mapValue);default:throw A()}}function Jw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return j(t,e);let n=ar(t),r=ar(e),i=j(n.seconds,r.seconds);return i!==0?i:j(n.nanos,r.nanos)}function eo(t){return Fp(t)}function Fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return E.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Fp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Fp(n.fields[s])}`;return i+"}"}(t.mapValue):A()}function Yr(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vp(t){return!!t&&"integerValue"in t}function Zs(t){return!!t&&"arrayValue"in t}function eE(t){return!!t&&"nullValue"in t}function tE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function Us(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Us(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Us(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function TN(t){return"nullValue"in t?Ru:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Yr(ur.empty(),E.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:A()}function AN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Yr(ur.empty(),E.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ir:A()}function nE(t,e){let n=lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function rE(t,e){let n=lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Je=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Us(n)}setAll(e){let n=we.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Us(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ku(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){si(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Us(this.value))}};function aI(t){let e=[];return si(t.fields,(n,r)=>{let i=new we([n]);if(ku(r)){let o=aI(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new vt(e)}var Me=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,P.min(),P.min(),P.min(),Je.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,P.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,P.min(),P.min(),Je.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,P.min(),P.min(),Je.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(P.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=P.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wn=class{constructor(e,n){this.position=e,this.inclusive=n}};function iE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=E.comparator(E.fromName(s.referenceValue),n.key):r=lr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var Zr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function SN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var zu=class{},q=class t extends zu{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bp(e,n,r):n==="array-contains"?new Hp(e,r):n==="in"?new Wu(e,r):n==="not-in"?new Gp(e,r):n==="array-contains-any"?new qp(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Up(e,r):new $p(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lr(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return A()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ne=class t extends zu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return to(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function to(t){return t.op==="and"}function Lp(t){return t.op==="or"}function bm(t){return cI(t)&&to(t)}function cI(t){for(let e of t.filters)if(e instanceof ne)return!1;return!0}function jp(t){if(t instanceof q)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(bm(t))return t.filters.map(e=>jp(e)).join(",");{let e=t.filters.map(n=>jp(n)).join(",");return`${t.op}(${e})`}}function uI(t,e){return t instanceof q?function(r,i){return i instanceof q&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof ne?function(r,i){return i instanceof ne&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uI(s,i.filters[a]),!0):!1}(t,e):void A()}function lI(t,e){let n=t.filters.concat(e);return ne.create(n,t.op)}function dI(t){return t instanceof q?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof ne?function(n){return n.op.toString()+" {"+n.getFilters().map(dI).join(" ,")+"}"}(t):"Filter"}var Bp=class extends q{constructor(e,n,r){super(e,n,r),this.key=E.fromName(r.referenceValue)}matches(e){let n=E.comparator(e.key,this.key);return this.matchesComparison(n)}},Up=class extends q{constructor(e,n){super(e,"in",n),this.keys=hI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$p=class extends q{constructor(e,n){super(e,"not-in",n),this.keys=hI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function hI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>E.fromName(r.referenceValue))}var Hp=class extends q{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Zs(n)&&Ys(n.arrayValue,this.value)}},Wu=class extends q{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ys(this.value.arrayValue,n)}},Gp=class extends q{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ys(this.value.arrayValue,n)}},qp=class extends q{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Zs(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ys(this.value.arrayValue,r))}};var zp=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Wp(t,e=null,n=[],r=[],i=null,o=null,s=null){return new zp(t,e,n,r,i,o,s)}function Xr(t){let e=C(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ga(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.ce=n}return e.ce}function ma(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oE(t.startAt,e.startAt)&&oE(t.endAt,e.endAt)}function Ku(t){return E.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qu(t,e){return t.filters.filter(n=>n instanceof q&&n.field.isEqual(e))}function sE(t,e,n){let r=Ru,i=!0;for(let o of Qu(t,e)){let s=Ru,a=!0;switch(o.op){case"<":case"<=":s=TN(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ru}nE({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];nE({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function aE(t,e,n){let r=ir,i=!0;for(let o of Qu(t,e)){let s=ir,a=!0;switch(o.op){case">=":case">":s=AN(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ir}rE({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];rE({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Wt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function fI(t,e,n,r,i,o,s,a){return new Wt(t,e,n,r,i,o,s,a)}function mo(t){return new Wt(t)}function cE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cm(t){return t.collectionGroup!==null}function Yi(t){let e=C(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new se(we.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Zr(o,r))}),n.has(we.keyField().canonicalString())||e.le.push(new Zr(we.keyField(),r))}return e.le}function ct(t){let e=C(t);return e.he||(e.he=MN(e,Yi(t))),e.he}function MN(t,e){if(t.limitType==="F")return Wp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zr(i.field,o)});let n=t.endAt?new wn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wn(t.startAt.position,t.startAt.inclusive):null;return Wp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kp(t,e){let n=t.filters.concat([e]);return new Wt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yu(t,e,n){return new Wt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _a(t,e){return ma(ct(t),ct(e))&&t.limitType===e.limitType}function pI(t){return`${Xr(ct(t))}|lt:${t.limitType}`}function Gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>dI(i)).join(", ")}]`),ga(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(ct(t))}; limitType=${t.limitType})`}function ya(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):E.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Yi(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=iE(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Yi(r),i)||r.endAt&&!function(s,a,c){let u=iE(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Yi(r),i))}(t,e)}function gI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mI(t){return(e,n)=>{let r=!1;for(let i of Yi(t)){let o=PN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function PN(t,e,n){let r=t.field.isKeyField()?E.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?lr(c,u):A()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return A()}}var En=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iI(this.inner)}size(){return this.innerSize}};var NN=new de(E.comparator);function pt(){return NN}var _I=new de(E.comparator);function js(...t){let e=_I;for(let n of t)e=e.insert(n.key,n);return e}function yI(t){let e=_I;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mn(){return $s()}function xI(){return $s()}function $s(){return new En(t=>t.toString(),(t,e)=>t.isEqual(e))}var ON=new de(E.comparator),RN=new se(E.comparator);function U(...t){let e=RN;for(let n of t)e=e.add(n);return e}var kN=new se(j);function Dm(){return kN}function vI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(e)?"-0":e}}function wI(t){return{integerValue:""+t}}function EI(t,e){return JE(e)?wI(e):vI(t,e)}var no=class{constructor(){this._=void 0}};function FN(t,e,n){return t instanceof dr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kl(o)&&(o=Im(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Ln?bI(t,e):t instanceof jn?CI(t,e):function(i,o){let s=II(i,o),a=uE(s)+uE(i.Ie);return Vp(s)&&Vp(i.Ie)?wI(a):vI(i.serializer,a)}(t,e)}function VN(t,e,n){return t instanceof Ln?bI(t,e):t instanceof jn?CI(t,e):n}function II(t,e){return t instanceof hr?function(r){return Vp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var dr=class extends no{},Ln=class extends no{constructor(e){super(),this.elements=e}};function bI(t,e){let n=DI(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var jn=class extends no{constructor(e){super(),this.elements=e}};function CI(t,e){let n=DI(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var hr=class extends no{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function uE(t){return ye(t.integerValue||t.doubleValue)}function DI(t){return Zs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jr=class{constructor(e,n){this.field=e,this.transform=n}};function LN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ln&&i instanceof Ln||r instanceof jn&&i instanceof jn?Xi(r.elements,i.elements,vn):r instanceof hr&&i instanceof hr?vn(r.Ie,i.Ie):r instanceof dr&&i instanceof dr}(t.transform,e.transform)}var Qp=class{constructor(e,n){this.version=e,this.transformResults=n}},xe=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ro=class{};function TI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pr(t.key,xe.none()):new fr(t.key,t.data,xe.none());{let n=t.data,r=Je.empty(),i=new se(we.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Kt(t.key,r,new vt(i.toArray()),xe.none())}}function jN(t,e,n){t instanceof fr?function(i,o,s){let a=i.value.clone(),c=dE(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Kt?function(i,o,s){if(!Fu(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=dE(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(AI(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Hs(t,e,n,r){return t instanceof fr?function(o,s,a,c){if(!Fu(o.precondition,s))return a;let u=o.value.clone(),l=hE(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kt?function(o,s,a,c){if(!Fu(o.precondition,s))return a;let u=hE(o.fieldTransforms,c,s),l=s.data;return l.setAll(AI(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Fu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function BN(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=II(r.transform,i||null);o!=null&&(n===null&&(n=Je.empty()),n.set(r.field,o))}return n||null}function lE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xi(r,i,(o,s)=>LN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var fr=class extends ro{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kt=class extends ro{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function AI(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function dE(t,e,n){let r=new Map;S(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,VN(s,a,n[i]))}return r}function hE(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,FN(o,s,e))}return r}var pr=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xs=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Js=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&jN(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Hs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=xI();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=TI(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(P.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),U())}isEqual(e){return this.batchId===e.batchId&&Xi(this.mutations,e.mutations,(n,r)=>lE(n,r))&&Xi(this.baseMutations,e.baseMutations,(n,r)=>lE(n,r))}},Yp=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){S(e.mutations.length===r.length);let i=function(){return ON}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ea=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zp=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var De,Q;function SI(t){switch(t){default:return A();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function MI(t){if(t===void 0)return ve("GRPC error has no .code"),g.UNKNOWN;switch(t){case De.OK:return g.OK;case De.CANCELLED:return g.CANCELLED;case De.UNKNOWN:return g.UNKNOWN;case De.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case De.INTERNAL:return g.INTERNAL;case De.UNAVAILABLE:return g.UNAVAILABLE;case De.UNAUTHENTICATED:return g.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case De.NOT_FOUND:return g.NOT_FOUND;case De.ALREADY_EXISTS:return g.ALREADY_EXISTS;case De.PERMISSION_DENIED:return g.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case De.ABORTED:return g.ABORTED;case De.OUT_OF_RANGE:return g.OUT_OF_RANGE;case De.UNIMPLEMENTED:return g.UNIMPLEMENTED;case De.DATA_LOSS:return g.DATA_LOSS;default:return A()}}(Q=De||(De={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var fE=null;function PI(){return new TextEncoder}var UN=new Br([4294967295,4294967295],0);function pE(t){let e=PI().encode(t),n=new Ww;return n.update(e),new Uint8Array(n.digest())}function gE(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,o],0)]}var Xp=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wr(`Invalid padding: ${n}`);if(r<0)throw new Wr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Br.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(UN)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=pE(e),[r,i]=gE(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=pE(e),[r,i]=gE(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Wr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ta=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(P.min(),i,new de(j),pt(),U())}},na=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,U(),U(),U())}};var Zi=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Zu=class{constructor(e,n){this.targetId=e,this.fe=n}},Xu=class{constructor(e,n,r=ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ju=class{constructor(){this.ge=0,this.pe=_E(),this.ye=ke.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=U(),n=U(),r=U();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:A()}}),new na(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=_E()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,S(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Jp=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=pt(),this.Qe=mE(),this.Ke=new de(j)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:A()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Ku(o))if(r===0){let s=new E(o.path);this.We(n,s,Me.newNoDocument(s,P.min()))}else S(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}fE?.tt(function(l,d,h,f,y){var _,x,I,M,D,N;let O={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},B=d.unchangedNames;return B&&(O.bloomFilter={applied:y===0,hashCount:(_=B?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(M=(I=(x=B?.bits)===null||x===void 0?void 0:x.bitmap)===null||I===void 0?void 0:I.length)!==null&&M!==void 0?M:0,padding:(N=(D=B?.bits)===null||D===void 0?void 0:D.padding)!==null&&N!==void 0?N:0,mightContain:he=>{var wt;return(wt=f?.mightContain(he))!==null&&wt!==void 0&&wt}}),O}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=cr(r).toUint8Array()}catch(c){if(c instanceof qu)return St("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xp(s,i,o)}catch(c){return St(c instanceof Wr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Ku(a.target)){let c=new E(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Me.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=U();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new ta(e,n,this.Ke,this.qe,r);return this.qe=pt(),this.Qe=mE(),this.Ke=new de(j),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ju,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new se(j),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||w("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Ju),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function mE(){return new de(E.comparator)}function _E(){return new de(E.comparator)}var $N={asc:"ASCENDING",desc:"DESCENDING"},HN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GN={and:"AND",or:"OR"},eg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tg(t,e){return t.useProto3Json||ga(e)?e:{value:e}}function io(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qN(t,e){return io(t,e.toTimestamp())}function Ee(t){return S(!!t),P.fromTimestamp(function(n){let r=ar(n);return new me(r.seconds,r.nanos)}(t))}function Tm(t,e){return ng(t,e).canonicalString()}function ng(t,e){let n=function(i){return new Y(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OI(t){let e=Y.fromString(t);return S(HI(e)),e}function ra(t,e){return Tm(t.databaseId,e.path)}function yn(t,e){let n=OI(e);if(n.get(1)!==t.databaseId.projectId)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new E(FI(n))}function RI(t,e){return Tm(t.databaseId,e)}function kI(t){let e=OI(t);return e.length===4?Y.emptyPath():FI(e)}function rg(t){return new Y(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FI(t){return S(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yE(t,e,n){return{name:ra(t,e),fields:n.value.mapValue.fields}}function VI(t,e,n){let r=yn(t,e.name),i=Ee(e.updateTime),o=e.createTime?Ee(e.createTime):P.min(),s=new Je({mapValue:{fields:e.fields}}),a=Me.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zN(t,e){return"found"in e?function(r,i){S(!!i.found),i.found.name,i.found.updateTime;let o=yn(r,i.found.name),s=Ee(i.found.updateTime),a=i.found.createTime?Ee(i.found.createTime):P.min(),c=new Je({mapValue:{fields:i.found.fields}});return Me.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){S(!!i.missing),S(!!i.readTime);let o=yn(r,i.missing),s=Ee(i.readTime);return Me.newNoDocument(o,s)}(t,e):A()}function WN(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:A()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(S(l===void 0||typeof l=="string"),ke.fromBase64String(l||"")):(S(l===void 0||l instanceof Uint8Array),ke.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?g.UNKNOWN:MI(u.code);return new v(l,u.message||"")}(s);n=new Xu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yn(t,r.document.name),o=Ee(r.document.updateTime),s=r.document.createTime?Ee(r.document.createTime):P.min(),a=new Je({mapValue:{fields:r.document.fields}}),c=Me.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Zi(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yn(t,r.document),o=r.readTime?Ee(r.readTime):P.min(),s=Me.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Zi([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yn(t,r.document),o=r.removedTargetIds||[];n=new Zi([],o,i,null)}else{if(!("filter"in e))return A();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Zp(i,o),a=r.targetId;n=new Zu(a,s)}}return n}function ia(t,e){let n;if(e instanceof fr)n={update:yE(t,e.key,e.value)};else if(e instanceof pr)n={delete:ra(t,e.key)};else if(e instanceof Kt)n={update:yE(t,e.key,e.data),updateMask:JN(e.fieldMask)};else{if(!(e instanceof Xs))return A();n={verify:ra(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof dr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ln)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw A()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:A()}(t,e.precondition)),n}function ig(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?xe.updateTime(Ee(o.updateTime)):o.exists!==void 0?xe.exists(o.exists):xe.none()}(e.currentDocument):xe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)S(a.setToServerValue==="REQUEST_TIME"),c=new dr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new Ln(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new jn(l)}else"increment"in a?c=new hr(s,a.increment):A();let u=we.fromServerFormat(a.fieldPath);return new Jr(u,c)}(t,i)):[];if(e.update){e.update.name;let i=yn(t,e.update.name),o=new Je({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new vt(u.map(l=>we.fromServerFormat(l)))}(e.updateMask);return new Kt(i,o,s,n,r)}return new fr(i,o,n,r)}if(e.delete){let i=yn(t,e.delete);return new pr(i,n)}if(e.verify){let i=yn(t,e.verify);return new Xs(i,n)}return A()}function KN(t,e){return t&&t.length>0?(S(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ee(i.updateTime):Ee(o);return s.isEqual(P.min())&&(s=Ee(o)),new Qp(s,i.transformResults||[])}(n,e))):[]}function LI(t,e){return{documents:[RI(t,e.path)]}}function jI(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RI(t,i);let o=function(u){if(u.length!==0)return $I(ne.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:qi(h.field),direction:YN(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=tg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function BI(t){let e=kI(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){S(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=UI(d);return h instanceof ne&&bm(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(y){return new Zr(zi(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ga(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new wn(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new wn(f,h)}(n.endAt)),fI(e,i,s,o,a,"F",c,u)}function QN(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zi(n.unaryFilter.field);return q.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zi(n.unaryFilter.field);return q.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zi(n.unaryFilter.field);return q.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zi(n.unaryFilter.field);return q.create(s,"!=",{nullValue:"NULL_VALUE"});default:return A()}}(t):t.fieldFilter!==void 0?function(n){return q.create(zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ne.create(n.compositeFilter.filters.map(r=>UI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return A()}}(n.compositeFilter.op))}(t):A()}function YN(t){return $N[t]}function ZN(t){return HN[t]}function XN(t){return GN[t]}function qi(t){return{fieldPath:t.canonicalString()}}function zi(t){return we.fromServerFormat(t.fieldPath)}function $I(t){return t instanceof q?function(n){if(n.op==="=="){if(tE(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if(eE(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tE(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if(eE(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:ZN(n.op),value:n.value}}}(t):t instanceof ne?function(n){let r=n.getFilters().map(i=>$I(i));return r.length===1?r[0]:{compositeFilter:{op:XN(n.op),filters:r}}}(t):A()}function JN(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var oo=class t{constructor(e,n,r,i,o=P.min(),s=P.min(),a=ke.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var el=class{constructor(e){this.ct=e}};function eO(t,e){let n;if(e.document)n=VI(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=E.fromSegments(e.noDocument.path),i=ti(e.noDocument.readTime);n=Me.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return A();{let r=E.fromSegments(e.unknownDocument.path),i=ti(e.unknownDocument.version);n=Me.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new me(i[0],i[1]);return P.fromTimestamp(o)}(e.readTime)),n}function xE(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ra(o,s.key),fields:s.data.value.mapValue.fields,updateTime:io(o,s.version.toTimestamp()),createTime:io(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ei(e.version)};else{if(!e.isUnknownDocument())return A();r.unknownDocument={path:n.path.toArray(),version:ei(e.version)}}return r}function tl(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ei(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ti(t){let e=new me(t.seconds,t.nanoseconds);return P.fromTimestamp(e)}function Gr(t,e){let n=(e.baseMutations||[]).map(o=>ig(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ig(t.ct,o)),i=me.fromMillis(e.localWriteTimeMs);return new Js(e.batchId,i,n,r)}function Bs(t){let e=ti(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ti(t.lastLimboFreeSnapshotVersion):P.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return S(o.documents.length===1),ct(mo(kI(o.documents[0])))}(t.query):function(o){return ct(BI(o))}(t.query),new oo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ke.fromBase64String(t.resumeToken))}function GI(t,e){let n=ei(e.snapshotVersion),r=ei(e.lastLimboFreeSnapshotVersion),i;i=Ku(e.target)?LI(t.ct,e.target):jI(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xr(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Am(t){let e=BI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yu(e,e.limit,"L"):e}function xp(t,e){return new ea(e.largestBatchId,ig(t.ct,e.overlayMutation))}function vE(t,e){let n=e.path.lastSegment();return[t,at(e.path.popLast()),n]}function wE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ei(r.readTime),documentKey:at(r.documentKey.path),largestBatchId:r.largestBatchId}}var og=class{getBundleMetadata(e,n){return EE(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ti(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return EE(e).put(function(i){return{bundleId:i.id,createTime:ei(Ee(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return IE(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Am(o.bundledQuery),readTime:ti(o.readTime)}}(r)})}saveNamedQuery(e,n){return IE(e).put(function(i){return{name:i.name,readTime:ei(Ee(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function EE(t){return Fe(t,"bundles")}function IE(t){return Fe(t,"namedQueries")}var nl=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return ks(e).get(vE(this.userId,n)).next(r=>r?xp(this.serializer,r):null)}getOverlays(e,n){let r=mn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new ea(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(at(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ks(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=mn(),o=at(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ks(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=xp(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=mn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ks(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=xp(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return ks(e).put(function(i,o,s){let[a,c,u]=vE(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ia(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function ks(t){return Fe(t,"documentOverlays")}var kn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ye(e.integerValue));else if("doubleValue"in e){let r=ye(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ws(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(cr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?sI(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):A()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),E.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};kn.bt=new kn;function tO(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bE(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=tO(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var sg=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=bE(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=bE(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},ag=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},cg=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},qr=class{constructor(){this.Gt=new sg,this.zt=new ag(this.Gt),this.jt=new cg(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var zr=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function er(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=CE(t.arrayValue,e.arrayValue),n!==0?n:(n=CE(t.directionalValue,e.directionalValue),n!==0?n:E.comparator(t.documentKey,e.documentKey)))}function CE(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var rl=class{constructor(e){this.Yt=new se((n,r)=>we.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(S(e.collectionGroup===this.collectionId),this.en)return!1;let n=Mp(e);if(n!==void 0&&!this.nn(n))return!1;let r=$r(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new se(we.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qi(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qi(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qi(r.field,r.dir==="asc"?0:1)));return new Ji(Ji.UNKNOWN_ID,this.collectionId,n,zs.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function qI(t){var e,n;if(S(t instanceof q||t instanceof ne),t instanceof q){if(t instanceof Wu){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>q.create(t.field,"==",o)))||[];return ne.create(i,"or")}return t}let r=t.filters.map(i=>qI(i));return ne.create(r,t.op)}function nO(t){if(t.getFilters().length===0)return[];let e=dg(qI(t));return S(zI(e)),ug(e)||lg(e)?[e]:e.getFilters()}function ug(t){return t instanceof q}function lg(t){return t instanceof ne&&bm(t)}function zI(t){return ug(t)||lg(t)||function(n){if(n instanceof ne&&Lp(n)){for(let r of n.getFilters())if(!ug(r)&&!lg(r))return!1;return!0}return!1}(t)}function dg(t){if(S(t instanceof q||t instanceof ne),t instanceof q)return t;if(t.filters.length===1)return dg(t.filters[0]);let e=t.filters.map(r=>dg(r)),n=ne.create(e,t.op);return n=il(n),zI(n)?n:(S(n instanceof ne),S(to(n)),S(n.filters.length>1),n.filters.reduce((r,i)=>Sm(r,i)))}function Sm(t,e){let n;return S(t instanceof q||t instanceof ne),S(e instanceof q||e instanceof ne),n=t instanceof q?e instanceof q?function(i,o){return ne.create([i,o],"and")}(t,e):DE(t,e):e instanceof q?DE(e,t):function(i,o){if(S(i.filters.length>0&&o.filters.length>0),to(i)&&to(o))return lI(i,o.getFilters());let s=Lp(i)?i:o,a=Lp(i)?o:i,c=s.filters.map(u=>Sm(u,a));return ne.create(c,"or")}(t,e),il(n)}function DE(t,e){if(to(e))return lI(e,t.getFilters());{let n=e.filters.map(r=>Sm(t,r));return ne.create(n,"or")}}function il(t){if(S(t instanceof q||t instanceof ne),t instanceof q)return t;let e=t.getFilters();if(e.length===1)return il(e[0]);if(cI(t))return t;let n=e.map(i=>il(i)),r=[];return n.forEach(i=>{i instanceof q?r.push(i):i instanceof ne&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ne.create(r,t.op)}var hg=class{constructor(){this._n=new oa}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Mt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Mt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},oa=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new se(Y.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new se(Y.comparator)).toArray()}};var Su=new Uint8Array(0),fg=class{constructor(e,n){this.databaseId=n,this.an=new oa,this.un=new En(r=>Xr(r),(r,i)=>ma(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:at(i)};return TE(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[QE(n),""],!1,!0);return TE(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(gn(s.parent))}return r})}addFieldIndex(e,n){let r=Fs(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Ui(e);return o.next(a=>{s.put(wE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Fs(e),i=Ui(e),o=Bi(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Fs(e),r=Bi(e),i=Ui(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new rl(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Bi(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=U(),a=[];return p.forEach(o,(c,u)=>{w("IndexedDbIndexManager",`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(c)} to execute ${Xr(n)}`);let l=function(D,N){let O=Mp(N);if(O===void 0)return null;for(let B of Qu(D,O.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(u,c),d=function(D,N){let O=new Map;for(let B of $r(N))for(let he of Qu(D,B.fieldPath))switch(he.op){case"==":case"in":O.set(B.fieldPath.canonicalString(),he.value);break;case"not-in":case"!=":return O.set(B.fieldPath.canonicalString(),he.value),Array.from(O.values())}return null}(u,c),h=function(D,N){let O=[],B=!0;for(let he of $r(N)){let wt=he.kind===0?sE(D,he.fieldPath,D.startAt):aE(D,he.fieldPath,D.startAt);O.push(wt.value),B&&(B=wt.inclusive)}return new wn(O,B)}(u,c),f=function(D,N){let O=[],B=!0;for(let he of $r(N)){let wt=he.kind===0?aE(D,he.fieldPath,D.endAt):sE(D,he.fieldPath,D.endAt);O.push(wt.value),B&&(B=wt.inclusive)}return new wn(O,B)}(u,c),y=this.hn(c,u,h),_=this.hn(c,u,f),x=this.Pn(c,u,d),I=this.In(c.indexId,l,y,h.inclusive,_,f.inclusive,x);return p.forEach(I,M=>r.j(M,n.limit).next(D=>{D.forEach(N=>{let O=E.fromSegments(N.documentKey);s.has(O)||(s=s.add(O),a.push(O))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=nO(ne.create(e.filters,"and")).map(r=>Wp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/u]):Su,f=this.En(e,h,r[d%u],i),y=this.dn(e,h,o[d%u],s),_=a.map(x=>this.En(e,h,x,!0));l.push(...this.createRange(f,y,_))}return l}En(e,n,r,i){let o=new zr(e,E.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new zr(e,E.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new rl(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new se(we.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new qr;for(let i of $r(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);kn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new qr;return kn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new qr;return kn.bt.Pt(Yr(this.databaseId,n),r.Ht(function(o){let s=$r(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new qr);let o=0;for(let s of $r(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&Zs(a))i=this.mn(i,s,a);else{let u=c.Ht(s.kind);kn.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new qr;c.seed(a.Wt()),kn.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof q&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Fs(e),i=Ui(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let h=d?new zs(d.sequenceNumber,new Mt(ti(d.readTime),new E(gn(d.documentKey)),d.largestBatchId)):zs.empty(),f=l.fields.map(([y,_])=>new Qi(we.fromServerFormat(y),_));return new Ji(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:j(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Fs(e),o=Ui(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(wE(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.pn(e,i,c).next(u=>{let l=this.yn(o,c);return u.isEqual(l)?p.resolve():this.wn(e,o,c,u,l)}))))})}Sn(e,n,r,i){return Bi(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Bi(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Bi(e),o=new se(er);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new zr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new se(er),i=this.An(n,e);if(i==null)return r;let o=Mp(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Zs(s))for(let a of s.arrayValue.values||[])r=r.add(new zr(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new zr(n.indexId,e.key,Su,i));return r}wn(e,n,r,i,o){w("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,h){let f=c.getIterator(),y=u.getIterator(),_=ji(f),x=ji(y);for(;_||x;){let I=!1,M=!1;if(_&&x){let D=l(_,x);D<0?M=!0:D>0&&(I=!0)}else _!=null?M=!0:I=!0;I?(d(x),x=ji(y)):M?(h(_),_=ji(f)):(_=ji(f),x=ji(y))}}(i,o,er,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return Ui(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>er(s,a)).filter((s,a,c)=>!a||er(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=er(s,e),c=er(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Su,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Su,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return er(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(AE)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||A())).next(AE)}};function TE(t){return Fe(t,"collectionParents")}function Bi(t){return Fe(t,"indexEntries")}function Fs(t){return Fe(t,"indexConfiguration")}function Ui(t){return Fe(t,"indexState")}function AE(t){S(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;wm(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Mt(e.readTime,e.documentKey,n)}var SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},At=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function WI(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{S(a===1)}));let u=[];for(let l of n.mutations){let d=eI(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function ol(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw A();e=t.noDocument}return JSON.stringify(e).length}At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(41943040,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);var sl=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){S(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Wi(e),s=tr(e);return s.add({}).next(a=>{S(typeof a=="number");let c=new Js(a,n,r,i),u=function(f,y,_){let x=_.baseMutations.map(M=>ia(f.ct,M)),I=_.mutations.map(M=>ia(f.ct,M));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:x,mutations:I}}(this.serializer,this.userId,c),l=[],d=new se((h,f)=>j(h.canonicalString(),f.canonicalString()));for(let h of i){let f=eI(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(f,uN))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return tr(e).get(n).next(r=>r?(S(r.userId===this.userId),Gr(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return tr(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(S(a.batchId>=r),o=Gr(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return tr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).W("userMutationsIndex",n).next(r=>r.map(i=>Gr(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Ou(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Wi(e).Y({range:i},(s,a,c)=>{let[u,l,d]=s,h=gn(l);if(u===this.userId&&n.path.isEqual(h))return tr(e).get(d).next(f=>{if(!f)throw A();S(f.userId===this.userId),o.push(Gr(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new se(j),i=[];return n.forEach(o=>{let s=Ou(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wi(e).Y({range:a},(u,l,d)=>{let[h,f,y]=u,_=gn(f);h===this.userId&&o.path.isEqual(_)?r=r.add(y):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Ou(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new se(j);return Wi(e).Y({range:s},(c,u,l)=>{let[d,h,f]=c,y=gn(h);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(tr(e).get(o).next(s=>{if(s===null)throw A();S(s.userId===this.userId),r.push(Gr(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return WI(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wi(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=gn(o[1]);i.push(c)}else a.done()}).next(()=>{S(i.length===0)})})}containsKey(e,n){return KI(e,this.userId,n)}xn(e){return QI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function KI(t,e,n){let r=Ou(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wi(t).Y({range:o,J:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function tr(t){return Fe(t,"mutations")}function Wi(t){return Fe(t,"documentMutations")}function QI(t){return Fe(t,"mutationQueues")}var so=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var pg=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new so(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>P.fromTimestamp(new me(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>$i(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(S(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return $i(e).Y((s,a)=>{let c=Bs(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return $i(e).Y((r,i)=>{let o=Bs(i);n(o)})}Ln(e){return ME(e).get("targetGlobalKey").next(n=>(S(n!==null),n))}kn(e,n){return ME(e).put("targetGlobalKey",n)}qn(e,n){return $i(e).put(GI(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Xr(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $i(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=Bs(a);ma(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=nr(e);return n.forEach(s=>{let a=at(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=nr(e);return p.forEach(n,o=>{let s=at(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=nr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=nr(e),o=U();return i.Y({range:r,J:!0},(s,a,c)=>{let u=gn(s[1]),l=new E(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=at(n.path),i=IDBKeyRange.bound([r],[QE(r)],!1,!0),o=0;return nr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(e,n){return $i(e).get(n).next(r=>r?Bs(r):null)}};function $i(t){return Fe(t,"targets")}function ME(t){return Fe(t,"targetGlobal")}function nr(t){return Fe(t,"targetDocuments")}function PE([t,e],[n,r]){let i=j(t,n);return i===0?j(e,r):i}var gg=class{constructor(e){this.Kn=e,this.buffer=new se(PE),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();PE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},mg=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){w("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){_r(n)?w("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield mr(n)}yield this.zn(3e5)}))}},_g=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(xt._e);let r=new gg(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(w("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(SE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(w("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Hi()<=Zt.DEBUG&&w("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function rO(t,e){return new _g(t,e)}var yg=class{constructor(e,n){this.db=e,this.garbageCollector=rO(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Mu(e,r)}removeReference(e,n,r){return Mu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Mu(e,n)}er(e,n){return function(i,o){let s=!1;return QI(i).Z(a=>KI(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,P.min()),nr(e).delete(function(d){return[0,at(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Mu(e,n)}Xn(e,n){let r=nr(e),i,o=xt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==xt._e&&n(new E(gn(i)),o),o=u,i=c):o=xt._e}).next(()=>{o!==xt._e&&n(new E(gn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Mu(t,e){return nr(t).put(function(r,i){return{targetId:0,path:at(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var al=class{constructor(){this.changes=new En(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xg=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ur(e).put(r)}removeEntry(e,n,r){return Ur(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tl(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Me.newInvalidDocument(n);return Ur(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vs(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Me.newInvalidDocument(n)};return Ur(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vs(n))},(i,o)=>{r={document:this.nr(n,o),size:ol(o)}}).next(()=>r)}getEntries(e,n){let r=pt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=pt(),i=new de(E.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,ol(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new se(RE);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Vs(i.first()),Vs(i.last())),s=i.getIterator(),a=s.getNext();return Ur(e).Y({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=E.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&RE(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.U(Vs(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),tl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ur(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=pt();for(let d of u){let h=this.nr(E.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(ya(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=pt(),s=OE(n,r),a=OE(n,Mt.max());return Ur(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.nr(E.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new vg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return NE(e).get("remoteDocumentGlobalKey").next(n=>(S(!!n),n))}tr(e,n){return NE(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=eO(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(P.min())))return r}return Me.newInvalidDocument(e)}};function YI(t){return new xg(t)}var vg=class extends al{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new En(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new se((o,s)=>j(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=xE(this.ar.serializer,s);i=i.add(o.path.popLast());let u=ol(c);r+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=xE(this.ar.serializer,s.convertToNoDocument(P.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function NE(t){return Fe(t,"remoteDocumentGlobal")}function Ur(t){return Fe(t,"remoteDocumentsV14")}function Vs(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OE(t,e){let n=e.documentKey.path.toArray();return[t,tl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function RE(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=j(n[o],r[o]),i)return i;return i=j(n.length,r.length),i||(i=j(n[n.length-2],r[r.length-2]),i||j(n[n.length-1],r[r.length-1]))}var wg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var cl=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hs(r.mutation,i,vt.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,U()).next(()=>r))}getLocalViewOfDocuments(e,n,r=U()){let i=mn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=js();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=mn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,U()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=pt(),s=$s(),a=function(){return $s()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Kt)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),Hs(l.mutation,u,l.mutation.getFieldMask(),me.now())):s.set(u.key,vt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new wg(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=$s(),i=new de((s,a)=>s-a),o=U();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||vt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||U()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=xI();l.forEach(h=>{if(!o.has(h)){let f=TI(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return E.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(mn()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,U())).next(l=>({batchId:a,changes:yI(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new E(n)).next(r=>{let i=js();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=js();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,h){return new Wt(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Me.newInvalidDocument(l)))});let a=js();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&Hs(l.mutation,u,vt.empty(),me.now()),ya(n,u)&&(a=a.insert(c,u))}),a})}};var Eg=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ee(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Am(i.bundledQuery),readTime:Ee(i.readTime)}}(n)),p.resolve()}};var Ig=class{constructor(){this.overlays=new de(E.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=mn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=mn(),o=n.length+1,s=new E(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new de((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=mn(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=mn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ea(n,r));let o=this.hr.get(n);o===void 0&&(o=U(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var sa=class{constructor(){this.Pr=new se(Te.Ir),this.Tr=new se(Te.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Te(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Te(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new E(new Y([])),r=new Te(n,e),i=new Te(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new E(new Y([])),r=new Te(n,e),i=new Te(n,e+1),o=U();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Te(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Te=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return E.comparator(e.key,n.key)||j(e.pr,n.pr)}static Er(e,n){return j(e.pr,n.pr)||E.comparator(e.key,n.key)}};var bg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new se(Te.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Js(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Te(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Te(n,0),i=new Te(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new se(j);return n.forEach(i=>{let o=new Te(i,0),s=new Te(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;E.isDocumentKey(o)||(o=o.child(""));let s=new Te(new E(o),0),a=new se(j);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){S(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Te(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Te(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Cg=class{constructor(e){this.vr=e,this.docs=function(){return new de(E.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let r=pt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Me.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=pt(),s=n.path,a=new E(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||wm(ZE(l),r)<=0||(i.has(l.key)||ya(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){A()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Dg(this)}getSize(e){return p.resolve(this.size)}},Dg=class extends al{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Tg=class{constructor(e){this.persistence=e,this.Mr=new En(n=>Xr(n),ma),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Or=0,this.Nr=new sa,this.targetCount=0,this.Br=so.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new so(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var ul=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new xt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Tg(this),this.indexManager=new hg,this.remoteDocumentCache=function(i){return new Cg(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new el(n),this.$r=new Eg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ig,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new bg(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);let i=new Ag(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Ag=class extends $u{constructor(e){super(),this.currentSequenceNumber=e}},ll=class t{constructor(e){this.persistence=e,this.zr=new sa,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw A()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=E.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,P.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Sg=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Hu("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0}),c.createObjectStore("documentMutations")}(e),kE(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),kE(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:P.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:wN});u.createIndex("collectionPathOverlayIndex",EN,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",IN,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:lN});u.createIndex("documentKeyIndex",dN),u.createIndex("collectionGroupIndex",hN)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:_N}).createIndex("sequenceNumberIndex",yN,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xN}).createIndex("documentKeyIndex",vN,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=ol(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{S(c.userId===o.userId);let u=Gr(this.serializer,c);return WI(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new Y(s),u=function(d){return[0,at(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:at(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:mN});let r=n.store("collectionParents"),i=new oa,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:at(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new Y(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],u)=>{let l=gn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Bs(i),s=GI(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new E(Y.fromString(d.document.name).popFirst(5)):d.noDocument?E.fromSegments(d.noDocument.path):d.unknownDocument?E.fromSegments(d.unknownDocument.path):A()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=YI(this.serializer),o=new ul(ll.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:U();Gr(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new Ae(u),d=nl.lt(this.serializer,l),h=o.getIndexManager(l),f=sl.lt(l,this.serializer,h,o.referenceDelegate);return new cl(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Ks(n,xt._e),c).next()})})}};function kE(t){t.createObjectStore("targetDocuments",{keyPath:pN}).createIndex("documentTargetsIndex",gN,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fN,{unique:!0}),t.createObjectStore("targetGlobal")}var vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mg=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new v(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yg(this,i),this.Ti=n+"main",this.serializer=new el(c),this.Ei=new Vn(this.Ti,this.ui,new Sg(this.serializer)),this.Qr=new pg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YI(this.serializer),this.$r=new og,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&ve("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,vp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new xt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(_r(e))return w("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ls(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return Pu(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Fe(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):Ls(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pu(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&w("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Ks(e,xt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Pu(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return sl.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fg(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nl.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){w("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?CN:c===14?rI:c===13?nI:c===12?bN:c===11?tI:void A()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Ks(a,this.kr?this.kr.next():xt._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw ve(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new v(g.FAILED_PRECONDITION,XE);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ls(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new v(g.FAILED_PRECONDITION,vp)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ls(e).put("owner",n)}static D(){return Vn.D()}yi(e){let n=Ls(e);return n.get("owner").next(r=>this.Si(r)?(w("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ve(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Xl()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return w("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ve("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ve("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ls(t){return Fe(t,"owner")}function Pu(t){return Fe(t,"clientMetadata")}function Mm(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pg=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=U(),i=U();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Ng=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dl=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Xl()?8:Vn.v(Co())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ng;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Hi()<=Zt.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",Gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Hi()<=Zt.DEBUG&&w("QueryEngine","Query:",Gi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Hi()<=Zt.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",Gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ct(n))):p.resolve())}ji(e,n){if(cE(n))return p.resolve(null);let r=ct(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yu(n,null,"F"),r=ct(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=U(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Yu(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return cE(n)||i.isEqual(P.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Hi()<=Zt.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gi(n)),this.es(e,s,n,YE(i,-1)).next(a=>a))})}Zi(e,n){let r=new se(mI(e));return n.forEach((i,o)=>{ya(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Hi()<=Zt.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",Gi(n)),this.zi.getDocumentsMatchingQuery(e,n,Mt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Og=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new de(j),this.rs=new En(o=>Xr(o),ma),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cl(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function ZI(t,e,n,r){return new Og(t,e,n,r)}function XI(t,e){return m(this,null,function*(){let n=C(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=U();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function iO(t,e){let n=C(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=p.resolve();return h.forEach(y=>{f=f.next(()=>l.getEntry(c,y)).next(_=>{let x=u.docVersions.get(y);S(x!==null),_.version.compareTo(x)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=U();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JI(t){let e=C(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function oO(t,e){let n=C(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ke.EMPTY_BYTE_STRING,P.min()).withLastLimboFreeSnapshotVersion(P.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,x,I){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let c=pt(),u=U();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(eb(o,s,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(P.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function eb(t,e,n){let r=U(),i=U();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=pt();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(P.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function sO(t,e){let n=C(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ao(t,e){let n=C(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new oo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function co(t,e,n){return m(this,null,function*(){let r=C(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_r(s))throw s;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function hl(t,e,n){let r=C(t),i=P.min(),o=U();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=C(c),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,s,ct(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:P.min(),n?o:U())).next(a=>(rb(r,gI(e),a),{documents:a,hs:o})))}function tb(t,e){let n=C(t),r=C(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function nb(t,e){let n=C(t),r=n.ss.get(e)||P.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,YE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rb(n,e,i),i))}function rb(t,e,n){let r=t.ss.get(e)||P.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function aO(t,e,n,r){return m(this,null,function*(){let i=C(t),o=U(),s=pt();for(let u of n){let l=e.Ps(u.metadata.name);u.document&&(o=o.add(l));let d=e.Is(u);d.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield ao(i,function(l){return ct(mo(Y.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>eb(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.cs,l.ls)).next(()=>l.cs)))})}function cO(r,i){return m(this,arguments,function*(t,e,n=U()){let o=yield ao(t,ct(Am(e.bundledQuery))),s=C(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ee(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(ke.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function FE(t,e){return`firestore_clients_${t}_${e}`}function VE(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wp(t,e){return`firestore_targets_${t}_${e}`}var fl=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new v(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(ve("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gs=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new v(r.error.code,r.error.message))),o?new t(e,r.state,i):(ve("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pl=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Dm();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=JE(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ve("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Rg=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ve("SharedClientState",`Failed to parse online state: ${e}`),null)}},aa=class{constructor(){this.activeTargetIds=Dm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},qs=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new de(j),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=FE(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new aa),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(FE(this.persistenceKey,r));if(i){let o=pl.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(wp(this.persistenceKey,e));if(r){let i=Gs.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wp(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return w("SharedClientState","READ",e,n),n}setItem(e,n){w("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){w("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(w("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=xt._e;if(o!=null)try{let a=JSON.parse(o);S(typeof a=="number"),s=a}catch(a){ve("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==xt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new fl(this.currentUser,e,n,r),o=VE(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=VE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=wp(this.persistenceKey,e),o=new Gs(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return pl.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return fl.Es(new Ae(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Gs.Es(i,n)}xs(e){return Rg.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);w("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Dm();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},gl=class{constructor(){this.no=new aa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new aa,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kg=class{io(e){}shutdown(){}};var ml=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nu=null;function Ep(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}var uO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fg=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Xe="WebChannelConnection",Vg=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Ep(),c=this.bo(n,r.toUriEncodedString());w("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,c,u,i).then(l=>(w("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw St("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=uO[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Ep();return new Promise((s,a)=>{let c=new zw;c.setWithCredentials(!0),c.listenOnce(Gw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Au.NO_ERROR:let l=c.getResponseJson();w(Xe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Au.TIMEOUT:w(Xe,`RPC '${e}' ${o} timed out`),a(new v(g.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:let d=c.getStatus();if(w(Xe,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let y=function(x){let I=x.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(I)>=0?I:g.UNKNOWN}(f.status);a(new v(y,f.message))}else a(new v(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new v(g.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{w(Xe,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);w(Xe,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Ep(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$w(),a=Hw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");w(Xe,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,f=!1,y=new Fg({lo:x=>{f?w(Xe,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(h||(w(Xe,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),w(Xe,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},ho:()=>d.close()}),_=(x,I,M)=>{x.listen(I,D=>{try{M(D)}catch(N){setTimeout(()=>{throw N},0)}})};return _(d,Rs.EventType.OPEN,()=>{f||w(Xe,`RPC '${e}' stream ${i} transport opened.`)}),_(d,Rs.EventType.CLOSE,()=>{f||(f=!0,w(Xe,`RPC '${e}' stream ${i} transport closed`),y.Vo())}),_(d,Rs.EventType.ERROR,x=>{f||(f=!0,St(Xe,`RPC '${e}' stream ${i} transport errored:`,x),y.Vo(new v(g.UNAVAILABLE,"The operation could not be completed")))}),_(d,Rs.EventType.MESSAGE,x=>{var I;if(!f){let M=x.data[0];S(!!M);let D=M,N=D.error||((I=D[0])===null||I===void 0?void 0:I.error);if(N){w(Xe,`RPC '${e}' stream ${i} received error:`,N);let O=N.status,B=function(Ql){let g0=De[Ql];if(g0!==void 0)return MI(g0)}(O),he=N.message;B===void 0&&(B=g.INTERNAL,he="Unknown error status: "+O+" with message "+N.message),f=!0,y.Vo(new v(B,he)),d.close()}else w(Xe,`RPC '${e}' stream ${i} received:`,M),y.mo(M)}}),_(a,qw.STAT_EVENT,x=>{x.stat===yp.PROXY?w(Xe,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===yp.NOPROXY&&w(Xe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}};function ib(){return typeof window<"u"?window:null}function Vu(){return typeof document<"u"?document:null}function xa(t){return new eg(t,!0)}var ca=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&w("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var _l=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ca(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(ve(n.toString()),ve("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new v(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lg=class extends _l{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=WN(this.serializer,e),r=function(o){if(!("targetChange"in o))return P.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?P.min():s.readTime?Ee(s.readTime):P.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=rg(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Ku(c)?{documents:LI(o,c)}:{query:jI(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=NI(o,s.resumeToken);let u=tg(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(P.min())>0){a.readTime=io(o,s.snapshotVersion.toTimestamp());let u=tg(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=QN(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=rg(this.serializer),n.removeTarget=e,this.t_(n)}},jg=class extends _l{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(S(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=KN(e.writeResults,e.commitTime),r=Ee(e.commitTime);return this.listener.T_(r,n)}return S(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=rg(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ia(this.serializer,r))};this.t_(n)}};var Bg=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,ng(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new v(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,ng(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new v(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Ug=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ve(n),this.g_=!1):w("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var $g=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>m(this,null,function*(){yr(this)&&(w("RemoteStore","Restarting streams for network reachability change."),yield function(c){return m(this,null,function*(){let u=C(c);u.v_.add(4),yield _o(u),u.x_.set("Unknown"),u.v_.delete(4),yield va(u)})}(this))}))}),this.x_=new Ug(r,i)}};function va(t){return m(this,null,function*(){if(yr(t))for(let e of t.F_)yield e(!0)})}function _o(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Fl(t,e){let n=C(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Om(n)?Nm(n):xo(n).Jo()&&Pm(n,e))}function ua(t,e){let n=C(t),r=xo(n);n.C_.delete(e),r.Jo()&&ob(n,e),n.C_.size===0&&(r.Jo()?r.Xo():yr(n)&&n.x_.set("Unknown"))}function Pm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(P.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).c_(e)}function ob(t,e){t.O_.Oe(e),xo(t).l_(e)}function Nm(t){t.O_=new Jp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.x_.p_()}function Om(t){return yr(t)&&!xo(t).Ho()&&t.C_.size>0}function yr(t){return C(t).v_.size===0}function sb(t){t.O_=void 0}function lO(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{Pm(t,e)})})}function dO(t,e){return m(this,null,function*(){sb(t),Om(t)?(t.x_.S_(e),Nm(t)):t.x_.set("Unknown")})}function hO(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof Xu&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yl(t,r)}else if(e instanceof Zi?t.O_.$e(e):e instanceof Zu?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(P.min()))try{let r=yield JI(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.C_.get(u);l&&o.C_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.C_.get(c);if(!l)return;o.C_.set(c,l.withResumeToken(ke.EMPTY_BYTE_STRING,l.snapshotVersion)),ob(o,c);let d=new oo(l.target,c,u,l.sequenceNumber);Pm(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){w("RemoteStore","Failed to raise snapshot:",r),yield yl(t,r)}})}function yl(t,e,n){return m(this,null,function*(){if(!_r(e))throw e;t.v_.add(1),yield _o(t),t.x_.set("Offline"),n||(n=()=>JI(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){w("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield va(t)}))})}function ab(t,e){return e().catch(n=>yl(t,n,e))}function yo(t){return m(this,null,function*(){let e=C(t),n=gr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;fO(e);)try{let i=yield sO(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,pO(e,i)}catch(i){yield yl(e,i)}cb(e)&&ub(e)})}function fO(t){return yr(t)&&t.D_.length<10}function pO(t,e){t.D_.push(e);let n=gr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function cb(t){return yr(t)&&!gr(t).Ho()&&t.D_.length>0}function ub(t){gr(t).start()}function gO(t){return m(this,null,function*(){gr(t).d_()})}function mO(t){return m(this,null,function*(){let e=gr(t);for(let n of t.D_)e.I_(n.mutations)})}function _O(t,e,n){return m(this,null,function*(){let r=t.D_.shift(),i=Yp.from(r,e,n);yield ab(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yo(t)})}function yO(t,e){return m(this,null,function*(){e&&gr(t).P_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return SI(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();gr(r).Zo(),yield ab(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield yo(r)}})}(t,e)),cb(t)&&ub(t)})}function LE(t,e){return m(this,null,function*(){let n=C(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");let r=yr(n);n.v_.add(3),yield _o(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield va(n)})}function Hg(t,e){return m(this,null,function*(){let n=C(t);e?(n.v_.delete(2),yield va(n)):e||(n.v_.add(2),yield _o(n),n.x_.set("Unknown"))})}function xo(t){return t.N_||(t.N_=function(n,r,i){let o=C(n);return o.R_(),new Lg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:lO.bind(null,t),To:dO.bind(null,t),u_:hO.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),Om(t)?Nm(t):t.x_.set("Unknown")):(yield t.N_.stop(),sb(t))}))),t.N_}function gr(t){return t.B_||(t.B_=function(n,r,i){let o=C(n);return o.R_(),new jg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:gO.bind(null,t),To:yO.bind(null,t),E_:mO.bind(null,t),T_:_O.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield yo(t)):(yield t.B_.stop(),t.D_.length>0&&(w("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var Gg=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Se,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new v(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vo(t,e){if(ve("AsyncQueue",`${e}: ${t}`),_r(t))return new v(g.UNAVAILABLE,`${e}: ${t}`);throw t}var xl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||E.comparator(n.key,r.key):(n,r)=>E.comparator(n.key,r.key),this.keyedMap=js(),this.sortedSet=new de(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var vl=class{constructor(){this.L_=new de(E.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):A():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},uo=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,xl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_a(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var qg=class{constructor(){this.q_=void 0,this.Q_=[]}},zg=class{constructor(){this.queries=new En(e=>pI(e),_a),this.onlineState="Unknown",this.K_=new Set}};function Rm(t,e){return m(this,null,function*(){let n=C(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new qg),i)try{o.q_=yield n.onListen(r)}catch(s){let a=vo(s,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Fm(n)})}function km(t,e){return m(this,null,function*(){let n=C(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function xO(t,e){let n=C(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&Fm(n)}function vO(t,e,n){let r=C(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function Fm(t){t.K_.forEach(e=>{e.next()})}var la=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Wg=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var wl=class{constructor(e){this.serializer=e}Ps(e){return yn(this.serializer,e)}Is(e){return e.metadata.exists?VI(this.serializer,e.document,!1):Me.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ee(e)}},Kg=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lb(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=Y.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new wl(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||U()).add(o);n.set(s,a)}}return n}complete(){return m(this,null,function*(){let e=yield aO(this.localStore,new wl(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield cO(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function lb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var El=class{constructor(e){this.key=e}},Il=class{constructor(e){this.key=e}},bl=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=U(),this.mutatedKeys=U(),this.ua=mI(e),this.ca=new xl(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new vl,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=ya(this.query,d)?d:null,y=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),x=!1;h&&f?h.data.isEqual(f.data)?y!==_&&(r.track({type:3,doc:f}),x=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),x=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),x=!0):h&&!f&&(r.track({type:1,doc:h}),x=!0,(c||u)&&(a=!0)),x&&(f?(s=s.add(f),o=_?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,y){let _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return _(f)-_(y)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,s.length!==0||u?{snapshot:new uo(this.query,e.ca,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new vl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=U(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Il(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new El(r))}),n}Ra(e){this.oa=e.hs,this.aa=U();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return uo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Qg=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Yg=class{constructor(e){this.key=e,this.ma=!1}},Zg=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new En(a=>pI(a),_a),this.pa=new Map,this.ya=new Set,this.wa=new de(E.comparator),this.Sa=new Map,this.ba=new sa,this.Da={},this.Ca=new Map,this.va=so.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function wO(t,e){return m(this,null,function*(){let n=Um(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield ao(n.localStore,ct(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield Vm(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Fl(n.remoteStore,s)}return i})}function Vm(t,e,n,r,i){return m(this,null,function*(){t.Ma=(d,h,f)=>function(_,x,I,M){return m(this,null,function*(){let D=x.view.ha(I);D.Xi&&(D=yield hl(_.localStore,x.query,!1).then(({documents:he})=>x.view.ha(he,D)));let N=M&&M.targetChanges.get(x.targetId),O=M&&M.targetMismatches.get(x.targetId)!=null,B=x.view.applyChanges(D,_.isPrimaryClient,N,O);return Xg(_,x.targetId,B.da),B.snapshot})}(t,d,h,f);let o=yield hl(t.localStore,e,!0),s=new bl(e,o.hs),a=s.ha(o.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);Xg(t,n,u.da);let l=new Qg(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function EO(t,e){return m(this,null,function*(){let n=C(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!_a(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield co(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ua(n.remoteStore,r.targetId),lo(n,r.targetId)}).catch(mr))):(lo(n,r.targetId),yield co(n.localStore,r.targetId,!0))})}function IO(t,e,n){return m(this,null,function*(){let r=$m(t);try{let i=yield function(s,a){let c=C(s),u=me.now(),l=a.reduce((f,y)=>f.add(y.key),U()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=pt(),_=U();return c.os.getEntries(f,l).next(x=>{y=x,y.forEach((I,M)=>{M.isValidDocument()||(_=_.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,y)).next(x=>{d=x;let I=[];for(let M of a){let D=BN(M,d.get(M.key).overlayedDocument);D!=null&&I.push(new Kt(M.key,D,aI(D.value.mapValue),xe.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,I,a)}).next(x=>{h=x;let I=x.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,x.batchId,I)})}).then(()=>({batchId:h.batchId,changes:yI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Da[s.currentUser.toKey()];u||(u=new de(j)),u=u.insert(a,c),s.Da[s.currentUser.toKey()]=u}(r,i.batchId,n),yield $n(r,i.changes),yield yo(r.remoteStore)}catch(i){let o=vo(i,"Failed to persist write");n.reject(o)}})}function db(t,e){return m(this,null,function*(){let n=C(t);try{let r=yield oO(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(S(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?S(s.ma):i.removedDocuments.size>0&&(S(s.ma),s.ma=!1))}),yield $n(n,r,e)}catch(r){yield mr(r)}})}function jE(t,e,n){let r=C(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=C(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&Fm(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bO(t,e,n){return m(this,null,function*(){let r=C(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new de(E.comparator);s=s.insert(o,Me.newNoDocument(o,P.min()));let a=U().add(o),c=new ta(P.min(),new Map,new de(j),s,a);yield db(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),Bm(r)}else yield co(r.localStore,e,!1).then(()=>lo(r,e,n)).catch(mr)})}function CO(t,e){return m(this,null,function*(){let n=C(t),r=e.batch.batchId;try{let i=yield iO(n.localStore,e);jm(n,r,null),Lm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $n(n,i)}catch(i){yield mr(i)}})}function DO(t,e,n){return m(this,null,function*(){let r=C(t);try{let i=yield function(s,a){let c=C(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(S(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);jm(r,e,n),Lm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $n(r,i)}catch(i){yield mr(i)}})}function TO(t,e){return m(this,null,function*(){let n=C(t);yr(n.remoteStore)||w("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=C(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=vo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Lm(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function jm(t,e,n){let r=C(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function lo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||hb(t,r)})}function hb(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(ua(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Bm(t))}function Xg(t,e,n){for(let r of n)r instanceof El?(t.ba.addReference(r.key,e),AO(t,r)):r instanceof Il?(w("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||hb(t,r.key)):A()}function AO(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(w("SyncEngine","New document in limbo: "+n),t.ya.add(r),Bm(t))}function Bm(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new E(Y.fromString(e)),r=t.va.next();t.Sa.set(r,new Yg(n)),t.wa=t.wa.insert(n,r),Fl(t.remoteStore,new oo(ct(mo(n.path)),r,"TargetPurposeLimboResolution",xt._e))}}function $n(t,e,n){return m(this,null,function*(){let r=C(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Pg.Ki(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,u){return m(this,null,function*(){let l=C(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!_r(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),y=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(y);l.ns=l.ns.insert(h,_)}}})}(r.localStore,o))})}function SO(t,e){return m(this,null,function*(){let n=C(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());let r=yield XI(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new v(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $n(n,r.us)}})}function MO(t,e){let n=C(t),r=n.Sa.get(e);if(r&&r.ma)return U().add(r.key);{let i=U(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function PO(t,e){return m(this,null,function*(){let n=C(t),r=yield hl(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Xg(n,e.targetId,i.da),i})}function NO(t,e){return m(this,null,function*(){let n=C(t);return nb(n.localStore,e).then(r=>$n(n,r))})}function OO(t,e,n,r){return m(this,null,function*(){let i=C(t),o=yield function(a,c){let u=C(a),l=C(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield yo(i.remoteStore):n==="acknowledged"||n==="rejected"?(jm(i,e,r||null),Lm(i,e),function(a,c){C(C(a).mutationQueue).Mn(c)}(i.localStore,e)):A(),yield $n(i,o)):w("SyncEngine","Cannot apply mutation batch with id: "+e)})}function RO(t,e){return m(this,null,function*(){let n=C(t);if(Um(n),$m(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield BE(n,r.toArray());n.Fa=!0,yield Hg(n.remoteStore,!0);for(let o of i)Fl(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(lo(n,s),co(n.localStore,s,!0))),ua(n.remoteStore,s)}),yield i,yield BE(n,r),function(s){let a=C(s);a.Sa.forEach((c,u)=>{ua(a.remoteStore,u)}),a.ba.mr(),a.Sa=new Map,a.wa=new de(E.comparator)}(n),n.Fa=!1,yield Hg(n.remoteStore,!1)}})}function BE(t,e,n){return m(this,null,function*(){let r=C(t),i=[],o=[];for(let s of e){let a,c=r.pa.get(s);if(c&&c.length!==0){a=yield ao(r.localStore,ct(c[0]));for(let u of c){let l=r.ga.get(u),d=yield PO(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield tb(r.localStore,s);a=yield ao(r.localStore,u),yield Vm(r,fb(u),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function fb(t){return fI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kO(t){return function(n){return C(C(n).persistence).Li()}(C(t).localStore)}function FO(t,e,n,r){return m(this,null,function*(){let i=C(t);if(i.Fa)return void w("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield nb(i.localStore,gI(o[0])),a=ta.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ke.EMPTY_BYTE_STRING);yield $n(i,s,a);break}case"rejected":yield co(i.localStore,e,!0),lo(i,e,r);break;default:A()}})}function VO(t,e,n){return m(this,null,function*(){let r=Um(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){w("SyncEngine","Adding an already active target "+i);continue}let o=yield tb(r.localStore,i),s=yield ao(r.localStore,o);yield Vm(r,fb(o),s.targetId,!1,s.resumeToken),Fl(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield co(r.localStore,i,!1).then(()=>{ua(r.remoteStore,i),lo(r,i)}).catch(mr))}})}function Um(t){let e=C(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=db.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bO.bind(null,e),e.fa.u_=xO.bind(null,e.eventManager),e.fa.xa=vO.bind(null,e.eventManager),e}function $m(t){let e=C(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DO.bind(null,e),e}function LO(t,e,n){let r=C(t);(function(o,s,a){return m(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,y){let _=C(f),x=Ee(y.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",I=>_.$r.getBundleMetadata(I,y.id)).then(I=>!!I&&I.createTime.compareTo(x)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(lb(c));let u=new Kg(c,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield u.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield u.complete();return yield $n(o,d.sa,void 0),yield function(f,y){let _=C(f);return _.persistence.runTransaction("Save bundle","readwrite",x=>_.$r.saveBundleMetadata(x,y))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(c){return St("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var da=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=xa(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ZI(this.persistence,new dl,e.initialUser,this.serializer)}createPersistence(e){return new ul(ll.Hr,this.serializer)}createSharedClientState(e){return new gl}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Cl=class t extends da{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield Yl(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield $m(this.Na.syncEngine),yield yo(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return ZI(this.persistence,new dl,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new mg(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Rp(n,this.persistence);return new Op(e.asyncQueue,r)}createPersistence(e){let n=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new Mg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ib(),Vu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gl}},Jg=class t extends Cl{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield Yl(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof qs&&(this.sharedClientState.syncEngine={Zs:OO.bind(null,n),Xs:FO.bind(null,n),eo:VO.bind(null,n),Li:kO.bind(null,n),Ys:NO.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>m(this,null,function*(){yield RO(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=ib();if(!qs.D(n))throw new v(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qs(n,e.asyncQueue,r,e.clientId,e.initialUser)}},ha=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SO.bind(null,this.syncEngine),yield Hg(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new zg}()}createDatastore(e){let n=xa(e.databaseInfo.databaseId),r=function(o){return new Vg(o)}(e.databaseInfo);return function(o,s,a,c){return new Bg(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new $g(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>jE(this.syncEngine,n,0),function(){return ml.D()?new ml:new kg}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new Zg(i,o,s,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(r){return m(this,null,function*(){let i=C(r);w("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield _o(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function UE(t,e=10240){let n=0;return{read(){return m(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return m(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ho=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ve("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var em=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Se,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return m(this,null,function*(){return this.metadata.promise})}Oa(){return m(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return m(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new Wg(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return m(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return m(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return m(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var tm=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new v(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return m(this,null,function*(){let s=C(i),a={documents:o.map(d=>ra(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,Y.emptyPath(),a,o.length),u=new Map;c.forEach(d=>{let h=zN(s.serializer,d);u.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=u.get(d.toString());S(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=E.fromPath(r);this.mutations.push(new Xs(i,this.precondition(i)))}),yield function(r,i){return m(this,null,function*(){let o=C(r),s={writes:i.map(a=>ia(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,Y.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw A();n=P.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new v(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(P.min())?xe.exists(!1):xe.updateTime(n):xe.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(P.min()))throw new v(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xe.updateTime(n)}return xe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var nm=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new ca(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>m(this,null,function*(){let e=new tm(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!ga(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!SI(n)}return!1}};var rm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ae.UNAUTHENTICATED,this.clientId=Bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>m(this,null,function*(){w("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(w("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Se;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Lu(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield XI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function im(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Hm(t);w("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>LE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>LE(e.remoteStore,i)),t._onlineComponents=e})}function pb(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Hm(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lu(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!pb(n))throw n;St("Error using user provided cache. Falling back to memory cache: "+n),yield Lu(t,new da)}}else w("FirestoreClient","Using default OfflineComponentProvider"),yield Lu(t,new da);return t._offlineComponents})}function Vl(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),yield im(t,t._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),yield im(t,new ha))),t._onlineComponents})}function gb(t){return Hm(t).then(e=>e.persistence)}function Gm(t){return Hm(t).then(e=>e.localStore)}function mb(t){return Vl(t).then(e=>e.remoteStore)}function qm(t){return Vl(t).then(e=>e.syncEngine)}function jO(t){return Vl(t).then(e=>e.datastore)}function fo(t){return m(this,null,function*(){let e=yield Vl(t),n=e.eventManager;return n.onListen=wO.bind(null,e.syncEngine),n.onUnlisten=EO.bind(null,e.syncEngine),n})}function BO(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield gb(t),n=yield mb(t);return e.setNetworkEnabled(!0),function(i){let o=C(i);return o.v_.delete(0),va(o)}(n)}))}function UO(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield gb(t),n=yield mb(t);return e.setNetworkEnabled(!1),function(i){return m(this,null,function*(){let o=C(i);o.v_.add(0),yield _o(o),o.x_.set("Offline")})}(n)}))}function $O(t,e){let n=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield function(u,l){let d=C(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new v(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=vo(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Gm(t),e,n)})),n.promise}function _b(t,e,n={}){let r=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,c,u){let l=new ho({next:h=>{s.enqueueAndForget(()=>km(o,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new v(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new v(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new la(mo(a.path),l,{includeMetadataChanges:!0,Z_:!0});return Rm(o,d)}(yield fo(t),t.asyncQueue,e,n,r)})),r.promise}function HO(t,e){let n=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield hl(i,o,!0),c=new bl(o,a.hs),u=c.ha(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=vo(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Gm(t),e,n)})),n.promise}function yb(t,e,n={}){let r=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,c,u){let l=new ho({next:h=>{s.enqueueAndForget(()=>km(o,d)),h.fromCache&&c.source==="server"?u.reject(new v(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new la(a,l,{includeMetadataChanges:!0,Z_:!0});return Rm(o,d)}(yield fo(t),t.asyncQueue,e,n,r)})),r.promise}function GO(t,e){let n=new ho(e);return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){C(i).K_.add(o),o.next()}(yield fo(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){C(i).K_.delete(o)}(yield fo(t),n)}))}}function qO(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?PI().encode(s):s,function(l,d){return new em(l,d)}(function(l,d){if(l instanceof Uint8Array)return UE(l,d);if(l instanceof ArrayBuffer)return UE(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,xa(e));t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){LO(yield qm(t),i,r)}))}function zO(t,e){return t.asyncQueue.enqueue(()=>m(this,null,function*(){return function(r,i){let o=C(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Gm(t),e)}))}function xb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var $E=new Map;function zm(t,e,n){if(!n)throw new v(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Wm(t,e,n,r){if(e===!0&&r===!0)throw new v(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HE(t){if(!E.isDocumentKey(t))throw new v(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){if(E.isDocumentKey(t))throw new v(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ll(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":A()}function Z(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new v(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ll(t);throw new v(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vb(t,e){if(e<=0)throw new v(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Dl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new v(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new v(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ni=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new v(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ip;switch(r.type){case"firstParty":return new Tp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new v(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=$E.get(n);r&&(w("ComponentProvider","Removing Datastore"),$E.delete(n),r.terminate())}(this),Promise.resolve()}};function wb(t,e,n,r={}){var i;let o=(t=Z(t,ni))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&St("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ae.MOCK_USER;else{a=v0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new v(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ae(u)}t._authCredentials=new bp(new ju(a,c))}}var $e=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ce=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},xn=class t extends $e{constructor(e,n,r){super(e,n,mo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ce(this.firestore,null,new E(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Km(t,e,...n){if(t=ge(t),zm("collection","path",e),t instanceof ni){let r=Y.fromString(e,...n);return GE(r),new xn(t,null,r)}{if(!(t instanceof ce||t instanceof xn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Y.fromString(e,...n));return GE(r),new xn(t.firestore,null,r)}}function Eb(t,e){if(t=Z(t,ni),zm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $e(t,null,function(r){return new Wt(Y.emptyPath(),r)}(e))}function wa(t,e,...n){if(t=ge(t),arguments.length===1&&(e=Bu.newId()),zm("doc","path",e),t instanceof ni){let r=Y.fromString(e,...n);return HE(r),new ce(t,null,new E(r))}{if(!(t instanceof ce||t instanceof xn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Y.fromString(e,...n));return HE(r),new ce(t.firestore,t instanceof xn?t.converter:null,new E(r))}}function Qm(t,e){return t=ge(t),e=ge(e),(t instanceof ce||t instanceof xn)&&(e instanceof ce||e instanceof xn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ym(t,e){return t=ge(t),e=ge(e),t instanceof $e&&e instanceof $e&&t.firestore===e.firestore&&_a(t._query,e._query)&&t.converter===e.converter}var om=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ca(this,"async_queue_retry"),this._u=()=>{let n=Vu();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Vu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Vu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Se;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!_r(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ve("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=Gg.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&A()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function sm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var am=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Se,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Ib=-1,pe=class extends ni{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new om}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bb(this),this._firestoreClient.terminate()}};function Pe(t){return t._firestoreClient||bb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bb(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new kp(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,xb(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new rm(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Cb(t,e){Rb(t=Z(t,pe));let n=Pe(t);if(n._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");St("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new ha;return Tb(n,i,new Cl(i,r.cacheSizeBytes,e?.forceOwnership))}function Db(t){Rb(t=Z(t,pe));let e=Pe(t);if(e._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");St("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new ha;return Tb(e,r,new Jg(r,n.cacheSizeBytes))}function Tb(t,e,n){let r=new Se;return t.asyncQueue.enqueue(()=>m(this,null,function*(){try{yield Lu(t,n),yield im(t,e),r.resolve()}catch(i){let o=i;if(!pb(o))throw o;St("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function Ab(t){if(t._initialized&&!t._terminated)throw new v(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Se;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{yield function(r){return m(this,null,function*(){if(!Vn.D())return Promise.resolve();let i=r+"main";yield Vn.delete(i)})}(Mm(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Sb(t){return function(n){let r=new Se;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return TO(yield qm(n),r)})),r.promise}(Pe(t=Z(t,pe)))}function Mb(t){return BO(Pe(t=Z(t,pe)))}function Pb(t){return UO(Pe(t=Z(t,pe)))}function Nb(t,e){let n=Pe(t=Z(t,pe)),r=new am;return qO(n,t._databaseId,e,r),r}function Ob(t,e){return zO(Pe(t=Z(t,pe)),e).then(n=>n?new $e(t,null,n.query):null)}function Rb(t){if(t._initialized||t._terminated)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var In=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ke.fromBase64String(e))}catch(n){throw new v(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new v(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new we(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bn=class{constructor(e){this._methodName=e}};var ri=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new v(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new v(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return j(this._lat,e._lat)||j(this._long,e._long)}};var WO=/^__.*__$/,cm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms):new fr(e,this.data,n,this.fieldTransforms)}},Tl=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function kb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}var Al=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Sl(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(kb(this.du)&&WO.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},um=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xa(e)}Su(e,n,r,i=!1){return new Al({du:e,methodName:n,wu:r,path:we.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ai(t){let e=t._freezeSettings(),n=xa(t._databaseId);return new um(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jl(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);Jm("Data must be an object, but it was:",s,r);let a=Lb(r,s),c,u;if(o.merge)c=new vt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=pm(e,d,n);if(!s.contains(h))throw new v(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Bb(l,h)||l.push(h)}c=new vt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new cm(new Je(a),c,u)}var fa=class t extends Bn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Fb(t,e,n){return new Al({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var lm=class t extends Bn{_toFieldTransform(e){return new Jr(e.path,new dr)}isEqual(e){return e instanceof t}},dm=class t extends Bn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=Fb(this,e,!0),r=this.bu.map(o=>ci(o,n)),i=new Ln(r);return new Jr(e.path,i)}isEqual(e){return e instanceof t&&Jl(this.bu,e.bu)}},hm=class t extends Bn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=Fb(this,e,!0),r=this.bu.map(o=>ci(o,n)),i=new jn(r);return new Jr(e.path,i)}isEqual(e){return e instanceof t&&Jl(this.bu,e.bu)}},fm=class t extends Bn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new hr(e.serializer,EI(e.serializer,this.Du));return new Jr(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function Zm(t,e,n,r){let i=t.Su(1,e,n);Jm("Data must be an object, but it was:",i,r);let o=[],s=Je.empty();si(r,(c,u)=>{let l=e0(e,c,n);u=ge(u);let d=i.fu(l);if(u instanceof fa)o.push(l);else{let h=ci(u,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new vt(o);return new Tl(s,a,i.fieldTransforms)}function Xm(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[pm(e,r,n)],c=[i];if(o.length%2!=0)throw new v(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(pm(e,o[h])),c.push(o[h+1]);let u=[],l=Je.empty();for(let h=a.length-1;h>=0;--h)if(!Bb(u,a[h])){let f=a[h],y=c[h];y=ge(y);let _=s.fu(f);if(y instanceof fa)u.push(f);else{let x=ci(y,_);x!=null&&(u.push(f),l.set(f,x))}}let d=new vt(u);return new Tl(l,d,s.fieldTransforms)}function Vb(t,e,n,r=!1){return ci(n,t.Su(r?4:3,e))}function ci(t,e){if(jb(t=ge(t)))return Jm("Unsupported field value:",e,t),Lb(t,e);if(t instanceof Bn)return function(r,i){if(!kb(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=ci(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=me.fromDate(r);return{timestampValue:io(i.serializer,o)}}if(r instanceof me){let o=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:io(i.serializer,o)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof In)return{bytesValue:NI(i.serializer,r._byteString)};if(r instanceof ce){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Ll(r)}`)}(t,e)}function Lb(t,e){let n={};return iI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,i)=>{let o=ci(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function jb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof ri||t instanceof In||t instanceof ce||t instanceof Bn)}function Jm(t,e,n){if(!jb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ll(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function pm(t,e,n){if((e=ge(e))instanceof Qt)return e._internalPath;if(typeof e=="string")return e0(t,e);throw Sl("Field path arguments must be of type string or ",t,!1,void 0,n)}var KO=new RegExp("[~\\*/\\[\\]]");function e0(t,e,n){if(e.search(KO)>=0)throw Sl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qt(...e.split("."))._internalPath}catch{throw Sl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sl(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new v(g.INVALID_ARGUMENT,a+t+c)}function Bb(t,e){return t.some(n=>n.isEqual(e))}var ii=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Bl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gm=class extends ii{data(){return super.data()}};function Bl(t,e){return typeof e=="string"?e0(t,e):e instanceof Qt?e._internalPath:e._delegate._internalPath}function Ub(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new v(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pa=class{},oi=class extends pa{};function Hn(t,e,...n){let r=[];e instanceof pa&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof mm).length,a=o.filter(c=>c instanceof Ml).length;if(s>1||s>0&&a>0)throw new v(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Ml=class t extends oi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Zb(e._query,n),new $e(e.firestore,e.converter,Kp(e._query,n))}_parse(e){let n=ai(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new v(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){zE(d,l);let f=[];for(let y of d)f.push(qE(c,o,y));h={arrayValue:{values:f}}}else h=qE(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||zE(d,l),h=Vb(a,s,d,l==="in"||l==="not-in");return q.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function $b(t,e,n){let r=e,i=Bl("where",t);return Ml._create(i,r,n)}var mm=class t extends pa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ne.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Zb(s,c),s=Kp(s,c)}(e._query,n),new $e(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _m=class t extends oi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zr(o,s)}(e._query,this._field,this._direction);return new $e(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Hb(t,e="asc"){let n=e,r=Bl("orderBy",t);return _m._create(r,n)}var Pl=class t extends oi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new $e(e.firestore,e.converter,Yu(e._query,this._limit,this._limitType))}};function Gb(t){return vb("limit",t),Pl._create("limit",t,"F")}function qb(t){return vb("limitToLast",t),Pl._create("limitToLast",t,"L")}var Nl=class t extends oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Yb(e,this.type,this._docOrFields,this._inclusive);return new $e(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function zb(...t){return Nl._create("startAt",t,!0)}function Wb(...t){return Nl._create("startAfter",t,!1)}var Ol=class t extends oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Yb(e,this.type,this._docOrFields,this._inclusive);return new $e(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function Kb(...t){return Ol._create("endBefore",t,!1)}function Qb(...t){return Ol._create("endAt",t,!0)}function Yb(t,e,n,r){if(n[0]=ge(n[0]),n[0]instanceof ii)return function(o,s,a,c,u){if(!c)throw new v(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Yi(o))if(d.field.isKeyField())l.push(Yr(s,c.key));else{let h=c.data.field(d.field);if(kl(h))throw new v(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new v(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new wn(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ai(t.firestore);return function(s,a,c,u,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new v(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let y=0;y<l.length;y++){let _=l[y];if(h[y].field.isKeyField()){if(typeof _!="string")throw new v(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!Cm(s)&&_.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);let x=s.path.child(Y.fromString(_));if(!E.isDocumentKey(x))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let I=new E(x);f.push(Yr(a,I))}else{let x=Vb(c,u,_);f.push(x)}}return new wn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function qE(t,e,n){if(typeof(n=ge(n))=="string"){if(n==="")throw new v(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cm(e)&&n.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Y.fromString(n));if(!E.isDocumentKey(r))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yr(t,new E(r))}if(n instanceof ce)return Yr(t,n._key);throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ll(n)}.`)}function zE(t,e){if(!Array.isArray(t)||t.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zb(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var po=class{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw A()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return si(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ri(ye(e.latitude),ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Im(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}convertTimestamp(e){let n=ar(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Y.fromString(e);S(HI(r));let i=new ur(r.get(1),r.get(3)),o=new E(r.popFirst(5));return i.isEqual(n)||ve(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Ul(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ym=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ce(this.firestore,null,n)}};var Fn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pt=class extends ii{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new or(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Bl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},or=class extends Pt{data(e={}){return super.data(e)}},Yt=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new or(this._firestore,this._userDataWriter,r.key,r,new Fn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new v(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:QO(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function QO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}function t0(t,e){return t instanceof Pt&&e instanceof Pt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Yt&&e instanceof Yt&&t._firestore===e._firestore&&Ym(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Xb(t){t=Z(t,ce);let e=Z(t.firestore,pe);return _b(Pe(e),t._key).then(n=>o0(e,t,n))}var Un=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ce(this.firestore,null,n)}};function Jb(t){t=Z(t,ce);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return $O(n,t._key).then(i=>new Pt(e,r,t._key,i,new Fn(i!==null&&i.hasLocalMutations,!0),t.converter))}function eC(t){t=Z(t,ce);let e=Z(t.firestore,pe);return _b(Pe(e),t._key,{source:"server"}).then(n=>o0(e,t,n))}function tC(t){t=Z(t,$e);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return Ub(t._query),yb(n,t._query).then(i=>new Yt(e,r,t,i))}function nC(t){t=Z(t,$e);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return HO(n,t._query).then(i=>new Yt(e,r,t,i))}function rC(t){t=Z(t,$e);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return yb(n,t._query,{source:"server"}).then(i=>new Yt(e,r,t,i))}function n0(t,e,n){t=Z(t,ce);let r=Z(t.firestore,pe),i=Ul(t.converter,e,n);return wo(r,[jl(ai(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xe.none())])}function r0(t,e,n,...r){t=Z(t,ce);let i=Z(t.firestore,pe),o=ai(i),s;return s=typeof(e=ge(e))=="string"||e instanceof Qt?Xm(o,"updateDoc",t._key,e,n,r):Zm(o,"updateDoc",t._key,e),wo(i,[s.toMutation(t._key,xe.exists(!0))])}function iC(t){return wo(Z(t.firestore,pe),[new pr(t._key,xe.none())])}function oC(t,e){let n=Z(t.firestore,pe),r=wa(t),i=Ul(t.converter,e);return wo(n,[jl(ai(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,xe.exists(!1))]).then(()=>r)}function i0(t,...e){var n,r,i;t=ge(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||sm(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(sm(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof ce)u=Z(t.firestore,pe),l=mo(t._key.path),c={next:d=>{e[s]&&e[s](o0(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=Z(t,$e);u=Z(d.firestore,pe),l=d._query;let h=new Un(u);c={next:f=>{e[s]&&e[s](new Yt(u,h,d,f))},error:e[s+1],complete:e[s+2]},Ub(t._query)}return function(h,f,y,_){let x=new ho(_),I=new la(f,x,y);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Rm(yield fo(h),I)})),()=>{x.La(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return km(yield fo(h),I)}))}}(Pe(u),l,a,c)}function sC(t,e){return GO(Pe(t=Z(t,pe)),sm(e)?e:{next:e})}function wo(t,e){return function(r,i){let o=new Se;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return IO(yield qm(r),i,o)})),o.promise}(Pe(t),e)}function o0(t,e,n){let r=n.docs.get(e._key),i=new Un(t);return new Pt(t,i,e._key,r,new Fn(n.hasPendingWrites,n.fromCache),e.converter)}var YO={maxAttempts:5};var Rl=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ai(e)}set(e,n,r){this._verifyNotCommitted();let i=rr(e,this._firestore),o=Ul(i.converter,n,r),s=jl(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,xe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=rr(e,this._firestore),s;return s=typeof(n=ge(n))=="string"||n instanceof Qt?Xm(this._dataReader,"WriteBatch.update",o._key,n,r,i):Zm(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,xe.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=rr(e,this._firestore);return this._mutations=this._mutations.concat(new pr(n._key,xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new v(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rr(t,e){if((t=ge(t)).firestore!==e)throw new v(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var xm=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ai(n)}get(n){let r=rr(n,this._firestore),i=new ym(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return A();let s=o[0];if(s.isFoundDocument())return new ii(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ii(this._firestore,i,r._key,null,r.converter);throw A()})}set(n,r,i){let o=rr(n,this._firestore),s=Ul(o.converter,r,i),a=jl(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=rr(n,this._firestore),a;return a=typeof(r=ge(r))=="string"||r instanceof Qt?Xm(this._dataReader,"Transaction.update",s._key,r,i,o):Zm(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=rr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=rr(e,this._firestore),r=new Un(this._firestore);return super.get(e).then(i=>new Pt(this._firestore,r,n._key,i._document,new Fn(!1,!1),n.converter))}};function aC(t,e,n){t=Z(t,pe);let r=Object.assign(Object.assign({},YO),n);return function(o){if(o.maxAttempts<1)throw new v(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Se;return o.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){let u=yield jO(o);new nm(o.asyncQueue,u,a,s,c).ja()})),c.promise}(Pe(t),i=>e(new xm(t,i)),r)}function cC(){return new fa("deleteField")}function uC(){return new lm("serverTimestamp")}function lC(...t){return new dm("arrayUnion",t)}function dC(...t){return new hm("arrayRemove",t)}function hC(t){return new fm("increment",t)}(function(e,n=!0){(function(i){go=i})(I0),Do(new xr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new pe(new Cp(r.getProvider("auth-internal")),new Sp(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new v(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ur(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gn(Kw,"4.4.1",e),Gn(Kw,"4.4.1","esm2017")})();var ZO="@firebase/firestore-compat",XO="0.3.24";function d0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new v("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function fC(){if(typeof Uint8Array>"u")throw new v("unimplemented","Uint8Arrays are not available in this environment.")}function pC(){if(!oI())throw new v("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $l=class t{constructor(e){this._delegate=e}static fromBase64String(e){return pC(),new t(In.fromBase64String(e))}static fromUint8Array(e){return fC(),new t(In.fromUint8Array(e))}toBase64(){return pC(),this._delegate.toBase64()}toUint8Array(){return fC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function s0(t){return JO(t,["next","error","complete"])}function JO(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var a0=class{enableIndexedDbPersistence(e,n){return Cb(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Db(e._delegate)}clearIndexedDbPersistence(e){return Ab(e._delegate)}},Hl=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ur||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&St("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){wb(this._delegate,e,n,r)}enableNetwork(){return Mb(this._delegate)}disableNetwork(){return Pb(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Wm("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Sb(this._delegate)}onSnapshotsInSync(e){return sC(this._delegate,e)}get app(){if(!this._appCompat)throw new v("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bo(this,Km(this._delegate,e))}catch(n){throw ut(n,"collection()","Firestore.collection()")}}doc(e){try{return new bn(this,wa(this._delegate,e))}catch(n){throw ut(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hi(this,Eb(this._delegate,e))}catch(n){throw ut(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return aC(this._delegate,n=>e(new Gl(this,n)))}batch(){return Pe(this._delegate),new ql(new Rl(this._delegate,e=>wo(this._delegate,e)))}loadBundle(e){return Nb(this._delegate,e)}namedQuery(e){return Ob(this._delegate,e).then(n=>n?new hi(this,n):null)}},Eo=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new $l(new In(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return bn.forKey(n,this.firestore,null)}};function eR(t){WE(t)}var Gl=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}get(e){let n=ui(e);return this._delegate.get(n).then(r=>new li(this._firestore,new Pt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ui(e);return r?(d0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ui(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ui(e);return this._delegate.delete(n),this}},ql=class{constructor(e){this._delegate=e}set(e,n,r){let i=ui(e);return r?(d0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ui(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ui(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Io=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new or(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new di(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Eo(e),n),i.set(n,o)),o}};Io.INSTANCES=new WeakMap;var bn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}static forPath(e,n,r){if(e.length%2!==0)throw new v("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ce(n._delegate,r,new E(e)))}static forKey(e,n,r){return new t(n,new ce(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bo(this.firestore,Km(this._delegate,e))}catch(n){throw ut(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ge(e),e instanceof ce?Qm(this._delegate,e):!1}set(e,n){n=d0("DocumentReference.set",n);try{return n?n0(this._delegate,e,n):n0(this._delegate,e)}catch(r){throw ut(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?r0(this._delegate,e):r0(this._delegate,e,n,...r)}catch(i){throw ut(i,"updateDoc()","DocumentReference.update()")}}delete(){return iC(this._delegate)}onSnapshot(...e){let n=gC(e),r=mC(e,i=>new li(this.firestore,new Pt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return i0(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=Jb(this._delegate):e?.source==="server"?n=eC(this._delegate):n=Xb(this._delegate),n.then(r=>new li(this.firestore,new Pt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ut(t,e,n){return t.message=t.message.replace(e,n),t}function gC(t){for(let e of t)if(typeof e=="object"&&!s0(e))return e;return{}}function mC(t,e){var n,r;let i;return s0(t[0])?i=t[0]:s0(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var li=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return t0(this._delegate,e._delegate)}},di=class extends li{data(e){let n=this._delegate.data(e);return this._delegate._converter||KE(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},hi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}where(e,n,r){try{return new t(this.firestore,Hn(this._delegate,$b(e,n,r)))}catch(i){throw ut(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Hn(this._delegate,Hb(e,n)))}catch(r){throw ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Hn(this._delegate,Gb(e)))}catch(n){throw ut(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Hn(this._delegate,qb(e)))}catch(n){throw ut(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Hn(this._delegate,zb(...e)))}catch(n){throw ut(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Hn(this._delegate,Wb(...e)))}catch(n){throw ut(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Hn(this._delegate,Kb(...e)))}catch(n){throw ut(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Hn(this._delegate,Qb(...e)))}catch(n){throw ut(n,"endAt()","Query.endAt()")}}isEqual(e){return Ym(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=nC(this._delegate):e?.source==="server"?n=rC(this._delegate):n=tC(this._delegate),n.then(r=>new Ea(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=gC(e),r=mC(e,i=>new Ea(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return i0(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},c0=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new di(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ea=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new hi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new di(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new c0(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new di(this._firestore,r))})}isEqual(e){return t0(this._delegate,e._delegate)}},bo=class t extends hi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new bn(this.firestore,e):null}doc(e){try{return e===void 0?new bn(this.firestore,wa(this._delegate)):new bn(this.firestore,wa(this._delegate,e))}catch(n){throw ut(n,"doc()","CollectionReference.doc()")}}add(e){return oC(this._delegate,e).then(n=>new bn(this.firestore,n))}isEqual(e){return Qm(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ui(t){return Z(t,ce)}var u0=class t{constructor(...e){this._delegate=new Qt(...e)}static documentId(){return new t(we.keyField().canonicalString())}isEqual(e){return e=ge(e),e instanceof Qt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var l0=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=uC();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=cC();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=lC(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=dC(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=hC(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var tR={Firestore:Hl,GeoPoint:ri,Timestamp:me,Blob:$l,Transaction:Gl,WriteBatch:ql,DocumentReference:bn,DocumentSnapshot:li,Query:hi,QueryDocumentSnapshot:di,QuerySnapshot:Ea,CollectionReference:bo,FieldPath:u0,FieldValue:l0,setLogLevel:eR,CACHE_SIZE_UNLIMITED:Ib};function nR(t,e){t.INTERNAL.registerComponent(new xr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},tR)))}function rR(t){nR(t,(e,n)=>new Hl(e,n,new a0)),t.registerVersion(ZO,XO)}rR(lt);function iR(t,e=Mo){return new ue(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function _C(t,e){return iR(t,e)}function oR(t,e){return _C(t,e).pipe(Oo(void 0),Po(),Ie(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function p0(t,e){return _C(t,e).pipe(Ie(n=>({payload:n,type:"query"})))}var zl=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=EC(r,n);return new Kl(i,o,this.afs)}snapshotChanges(){return oR(this.ref,this.afs.schedulers.outsideAngular).pipe(ft)}valueChanges(e={}){return this.snapshotChanges().pipe(Ie(({payload:n})=>e.idField?Et(et({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return tt(this.ref.get(e)).pipe(ft)}};function Wl(t,e){return p0(t,e).pipe(Oo(void 0),Po(),Ie(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function yC(t,e,n){return Wl(t,n).pipe(No((r,i)=>sR(r,i.map(o=>o.payload),e),[]),gd(),Ie(r=>r.map(i=>({type:i.type,payload:i}))))}function sR(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=aR(t,r))}),t}function h0(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function aR(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return h0(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return h0(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return h0(t,e.oldIndex,1);break}return t}function xC(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Kl=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Wl(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ie(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Oo(void 0),Po(),zn(([r,i])=>i.length>0||!r),Ie(([,r])=>r),ft)}auditTrail(e){return this.stateChanges(e).pipe(No((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xC(e);return yC(this.query,n,this.afs.schedulers.outsideAngular).pipe(ft)}valueChanges(e={}){return p0(this.query,this.afs.schedulers.outsideAngular).pipe(Ie(n=>n.payload.docs.map(r=>e.idField?Et(et({},r.data()),{[e.idField]:r.id}):r.data())),ft)}get(e){return tt(this.query.get(e)).pipe(ft)}add(e){return this.ref.add(e)}doc(e){return new zl(this.ref.doc(e),this.afs)}},f0=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Wl(this.query,this.afs.schedulers.outsideAngular).pipe(ft):Wl(this.query,this.afs.schedulers.outsideAngular).pipe(Ie(n=>n.filter(r=>e.indexOf(r.type)>-1)),zn(n=>n.length>0),ft)}auditTrail(e){return this.stateChanges(e).pipe(No((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xC(e);return yC(this.query,n,this.afs.schedulers.outsideAngular).pipe(ft)}valueChanges(e={}){return p0(this.query,this.afs.schedulers.outsideAngular).pipe(Ie(r=>r.payload.docs.map(i=>e.idField?et({[e.idField]:i.id},i.data()):i.data())),ft)}get(e){return tt(this.query.get(e)).pipe(ft)}},vC=new k("angularfire2.enableFirestorePersistence"),wC=new k("angularfire2.firestore.persistenceSettings"),cR=new k("angularfire2.firestore.settings"),uR=new k("angularfire2.firestore.use-emulator");function EC(t,e=n=>n){return{query:e(t),ref:t}}var lR=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,h,f,y,_,x,I,M){this.schedulers=c;let D=ls(n,a,r),N=l;d&&Af(D,a,h,y,_,x,f,I),[this.firestore,this.persistenceEnabled$]=Xc(`${D.name}.firestore`,"AngularFirestore",D.name,()=>{let O=a.runOutsideAngular(()=>D.firestore());if(o&&O.settings(o),N&&O.useEmulator(...N),i&&!Rr(s)){let B=()=>{try{return tt(O.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(he){return typeof console<"u"&&console.warn(he),Dn(!1)}};return[O,a.runOutsideAngular(B)]}else return[O,Dn(!1)]},[o,N,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=EC(i,r),a=this.schedulers.ngZone.run(()=>o);return new Kl(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new f0(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new zl(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(T(Pi),T(Ni,8),T(vC,8),T(cR,8),T(Dt),T(re),T(Yc),T(wC,8),T(uR,8),T(Dv,8),T(Ef,8),T(If,8),T(bf,8),T(Cf,8),T(Df,8),T(Tf,8),T(kr,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),IC=(()=>{class t{constructor(){lt.registerVersion("angularfire",Mi.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:vC,useValue:!0},{provide:wC,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ke({type:t});static \u0275inj=We({providers:[lR]})}return t})();var bC={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var CC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e,bootstrap:[uv]}),e.\u0275inj=We({imports:[tv,fv.initializeApp(bC.firebaseConfig),IC,rv]});let t=e;return t})();ev().bootstrapModule(CC).catch(t=>console.error(t));
