import{A as rd,B as dt,a as rt,b as Et,c as Xl,d as m,e as E_,f as ba,g as b_,h as I_,i as C_,j as Jl,k as D_,l as Co,m as ed,n as Ia,o as T_,p as A_,q as td,r as ge,s as xr,t as Zt,u as Ca,v as Do,w as S_,x as M_,y as Gn,z as nd}from"./chunk-YBIQVCEK.js";var P_=null;var id=1,N_=Symbol("SIGNAL");function je(t){let e=P_;return P_=t,e}var O_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function SC(t){if(!(ad(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===id)){if(!t.producerMustRecompute(t)&&!od(t)){t.dirty=!1,t.lastCleanEpoch=id;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=id}}function R_(t){return t&&(t.nextProducerIndex=0),je(t)}function k_(t,e){if(je(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ad(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)sd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function od(t){Da(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(SC(n),r!==n.version))return!0}return!1}function F_(t){if(Da(t),ad(t))for(let e=0;e<t.producerNode.length;e++)sd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function sd(t,e){if(MC(t),Da(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)sd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Da(i),i.producerIndexOfThis[r]=e}}function ad(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Da(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function MC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function PC(){throw new Error}var NC=PC;function V_(t){NC=t}function G(t){return typeof t=="function"}function hi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ta=hi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ge=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(o){e=o instanceof Ta?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{L_(o)}catch(s){e=e??[],s instanceof Ta?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ta(e)}}add(e){var n;if(e&&e!==this)if(this.closed)L_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vr(n,e)}remove(e){let{_finalizers:n}=this;n&&vr(n,e),e instanceof t&&e._removeParent(this)}};Ge.EMPTY=(()=>{let t=new Ge;return t.closed=!0,t})();var cd=Ge.EMPTY;function Aa(t){return t instanceof Ge||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function L_(t){G(t)?t():t.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pi={setTimeout(t,e,...n){let{delegate:r}=pi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=pi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Sa(t){pi.setTimeout(()=>{let{onUnhandledError:e}=kt;if(e)e(t);else throw t})}function ud(){}var j_=ld("C",void 0,void 0);function B_(t){return ld("E",void 0,t)}function U_(t){return ld("N",t,void 0)}function ld(t,e,n){return{kind:t,value:e,error:n}}var wr=null;function gi(t){if(kt.useDeprecatedSynchronousErrorHandling){let e=!wr;if(e&&(wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wr;if(wr=null,n)throw r}}else t()}function $_(t){kt.useDeprecatedSynchronousErrorHandling&&wr&&(wr.errorThrown=!0,wr.error=t)}var Er=class extends Ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Aa(e)&&e.add(this)):this.destination=kC}static create(e,n,r){return new Dn(e,n,r)}next(e){this.isStopped?fd(U_(e),this):this._next(e)}error(e){this.isStopped?fd(B_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fd(j_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OC=Function.prototype.bind;function dd(t,e){return OC.call(t,e)}var hd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ma(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ma(r)}else Ma(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ma(n)}}},Dn=class extends Er{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&kt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dd(e.next,o),error:e.error&&dd(e.error,o),complete:e.complete&&dd(e.complete,o)}):i=e}this.destination=new hd(i)}};function Ma(t){kt.useDeprecatedSynchronousErrorHandling?$_(t):Sa(t)}function RC(t){throw t}function fd(t,e){let{onStoppedNotification:n}=kt;n&&pi.setTimeout(()=>n(t,e))}var kC={closed:!0,next:ud,error:RC,complete:ud};var mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(t){return t}function H_(t){return t.length===0?Xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=VC(n)?n:new Dn(n,r,i);return gi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=G_(r),new r((i,o)=>{let s=new Dn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mi](){return this}pipe(...n){return H_(n)(this)}toPromise(n){return n=G_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function G_(t){var e;return(e=t??kt.Promise)!==null&&e!==void 0?e:Promise}function FC(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function VC(t){return t&&t instanceof Er||FC(t)&&Aa(t)}function LC(t){return G(t?.lift)}function X(t){return e=>{if(LC(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new pd(t,e,n,r,i)}var pd=class extends Er{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var q_=hi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var bt=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new q_}next(n){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cd:(this.currentObservers=null,o.push(n),new Ge(()=>{this.currentObservers=null,vr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new Pa(e,n),t})(),Pa=class extends bt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:cd}};var To=class extends bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ao={now(){return(Ao.delegate||Date).now()},delegate:void 0};var Na=class extends bt{constructor(e=1/0,n=1/0,r=Ao){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Oa=class extends Ge{constructor(e,n){super()}schedule(e,n=0){return this}};var So={setInterval(t,e,...n){let{delegate:r}=So;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=So;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _i=class extends Oa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return So.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&So.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var yi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};yi.now=Ao.now;var xi=class extends yi{constructor(e,n=yi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Mo=new xi(_i);var Ra=class extends _i{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ka=class extends xi{};var gd=new ka(Ra);var Fa=new ue(t=>t.complete());function z_(t){return t&&G(t.schedule)}function W_(t){return t[t.length-1]}function qn(t){return z_(W_(t))?t.pop():void 0}function K_(t,e){return typeof W_(t)=="number"?t.pop():e}var Va=t=>t&&typeof t.length=="number"&&typeof t!="function";function La(t){return G(t?.then)}function ja(t){return G(t[mi])}function Ba(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function Ua(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $a=jC();function Ha(t){return G(t?.[$a])}function Ga(t){return b_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ba(n.read());if(i)return yield ba(void 0);yield yield ba(r)}}finally{n.releaseLock()}})}function qa(t){return G(t?.getReader)}function Be(t){if(t instanceof ue)return t;if(t!=null){if(ja(t))return BC(t);if(Va(t))return UC(t);if(La(t))return $C(t);if(Ba(t))return Q_(t);if(Ha(t))return HC(t);if(qa(t))return GC(t)}throw Ua(t)}function BC(t){return new ue(e=>{let n=t[mi]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UC(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $C(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Sa)})}function HC(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Q_(t){return new ue(e=>{qC(t,e).catch(n=>e.error(n))})}function GC(t){return Q_(Ga(t))}function qC(t,e){var n,r,i,o;return E_(this,void 0,void 0,function*(){try{for(n=I_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function It(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ct(t,e=0){return X((n,r)=>{n.subscribe(ae(r,i=>It(r,t,()=>r.next(i),e),()=>It(r,t,()=>r.complete(),e),i=>It(r,t,()=>r.error(i),e)))})}function Ft(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Y_(t,e){return Be(t).pipe(Ft(e),Ct(e))}function Z_(t,e){return Be(t).pipe(Ft(e),Ct(e))}function X_(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function J_(t,e){return new ue(n=>{let r;return It(n,e,()=>{r=t[$a](),It(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function za(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{It(n,e,()=>{let r=t[Symbol.asyncIterator]();It(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function e0(t,e){return za(Ga(t),e)}function t0(t,e){if(t!=null){if(ja(t))return Y_(t,e);if(Va(t))return X_(t,e);if(La(t))return Z_(t,e);if(Ba(t))return za(t,e);if(Ha(t))return J_(t,e);if(qa(t))return e0(t,e)}throw Ua(t)}function it(t,e){return e?t0(t,e):Be(t)}function Tn(...t){let e=qn(t);return it(t,e)}var Wa=hi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(t,e){return X((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}function n0(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,f=()=>{d&&!c.length&&!u&&e.complete()},h=_=>u<r?y(_):c.push(_),y=_=>{o&&e.next(_),u++;let x=!1;Be(n(_,l++)).subscribe(ae(e,b=>{i?.(b),o?h(b):e.next(b)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){let b=c.shift();s?It(e,s,()=>y(b)):y(b)}f()}catch(b){e.error(b)}}))};return t.subscribe(ae(e,h,()=>{d=!0,f()})),()=>{a?.()}}function md(t,e,n=1/0){return G(e)?md((r,i)=>Ce((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),X((r,i)=>n0(r,i,t,n)))}function Ka(t=1/0){return md(Xt,t)}function r0(){return Ka(1)}function _d(...t){return r0()(it(t,qn(t)))}function yd(...t){let e=qn(t),n=K_(t,1/0),r=t;return r.length?r.length===1?Be(r[0]):Ka(n)(it(r,e)):Fa}function zn(t,e){return X((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function i0(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(ae(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function o0(t){return X((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function s0(t){return t<=0?()=>Fa:X((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function xd(t,e=Xt){return t=t??zC,X((n,r)=>{let i,o=!0;n.subscribe(ae(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function zC(t,e){return t===e}function a0(t=WC){return X((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function WC(){return new Wa}function Qa(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zn((i,o)=>t(i,o,r)):Xt,s0(1),n?o0(e):a0(()=>new Wa))}function Po(){return X((t,e)=>{let n,r=!1;t.subscribe(ae(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function No(t,e){return X(i0(t,e,arguments.length>=2,!0))}function c0(t={}){let{connector:e=()=>new bt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,l=d=!1},y=()=>{let _=s;h(),_?.unsubscribe()};return X((_,x)=>{u++,!d&&!l&&f();let b=c=c??e();x.add(()=>{u--,u===0&&!d&&!l&&(a=vd(y,i))}),b.subscribe(x),!s&&u>0&&(s=new Dn({next:M=>b.next(M),error:M=>{d=!0,f(),a=vd(h,n,M),b.error(M)},complete:()=>{l=!0,f(),a=vd(h,r),b.complete()}}),Be(_).subscribe(s))})(o)}}function vd(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Dn({next:()=>{r.unsubscribe(),t()}});return Be(e(...n)).subscribe(r)}function Ya(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,c0({connector:()=>new Na(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Oo(...t){let e=qn(t);return X((n,r)=>{(e?_d(t,n,e):_d(t,n)).subscribe(r)})}function Vt(t,e){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ae(r,c=>{i?.unsubscribe();let u=0,l=o++;Be(t(c,l)).subscribe(i=ae(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Za(t,e){return G(e)?Vt(()=>t,e):Vt(()=>t)}function wd(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Xt}var G0="https://g.co/ng/security#xss",K=class extends Error{constructor(e,n){super(mf(e,n)),this.code=e}};function mf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oe(t){for(let e in t)if(t[e]===oe)return e;throw Error("Could not find renamed property on target object.")}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function u0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var KC=oe({__forward_ref__:oe});function _f(t){return t.__forward_ref__=_f,t.toString=function(){return ft(this())},t}function jt(t){return QC(t)?t():t}function QC(t){return typeof t=="function"&&t.hasOwnProperty(KC)&&t.__forward_ref__===_f}function q0(t){return t&&!!t.\u0275providers}var YC=oe({\u0275cmp:oe}),ZC=oe({\u0275dir:oe}),XC=oe({\u0275pipe:oe}),JC=oe({\u0275mod:oe}),l0=oe({\u0275fac:oe}),Ro=oe({__NG_ELEMENT_ID__:oe}),d0=oe({__NG_ENV_ID__:oe});function yf(t){return typeof t=="string"?t:t==null?"":String(t)}function eD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():yf(t)}function tD(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new K(-200,`Circular dependency in DI detected for ${t}${n}`)}function xf(t,e){throw new K(-201,!1)}function nD(t,e){t==null&&rD(e,t,null,"!=")}function rD(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ke(t){return{providers:t.providers||[],imports:t.imports||[]}}function vf(t){return f0(t,z0)||f0(t,W0)}function f0(t,e){return t.hasOwnProperty(e)?t[e]:null}function iD(t){let e=t&&(t[z0]||t[W0]);return e||null}function h0(t){return t&&(t.hasOwnProperty(p0)||t.hasOwnProperty(oD))?t[p0]:null}var z0=oe({\u0275prov:oe}),p0=oe({\u0275inj:oe}),W0=oe({ngInjectableDef:oe}),oD=oe({ngInjectorDef:oe}),z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(z||{}),Nd;function sD(){return Nd}function Jt(t){let e=Nd;return Nd=t,e}function K0(t,e,n){let r=vf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&z.Optional)return null;if(e!==void 0)return e;xf(t,"Injector")}var _t=globalThis;var F=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var aD={},Lo=aD,Od="__NG_DI_FLAG__",oc="ngTempTokenPath",cD="ngTokenPath",uD=/\n/gm,lD="\u0275",g0="__source",ko;function vi(t){let e=ko;return ko=t,e}function dD(t,e=z.Default){if(ko===void 0)throw new K(-203,!1);return ko===null?K0(t,void 0,e):ko.get(t,e&z.Optional?null:void 0,e)}function T(t,e=z.Default){return(sD()||dD)(jt(t),e)}function Ne(t,e=z.Default){return T(t,Ec(e))}function Ec(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Rd(t){let e=[];for(let n=0;n<t.length;n++){let r=jt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=z.Default;for(let s=0;s<r.length;s++){let a=r[s],c=hD(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(T(i,o))}else e.push(T(r))}return e}function fD(t,e){return t[Od]=e,t.prototype[Od]=e,t}function hD(t){return t[Od]}function pD(t,e,n,r){let i=t[oc];throw e[g0]&&i.unshift(e[g0]),t.message=gD(`
`+t.message,i,n,r),t[cD]=i,t[oc]=null,t}function gD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==lD?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(uD,`
  `)}`}function bc(t){return{toString:t}.toString()}var Q0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Q0||{}),on=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(on||{}),jo={},en=[],An=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(An||{});function Y0(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function kd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];_D(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function mD(t){return t===3||t===4||t===6}function _D(t){return t.charCodeAt(0)===64}function wf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?m0(t,n,i,null,e[++r]):m0(t,n,i,null,null))}}return t}function m0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Z0="ng-template";function yD(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Y0(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function X0(t){return t.type===4&&t.value!==Z0}function xD(t,e,n){let r=t.type===4&&!n?Z0:t.value;return e===r}function vD(t,e,n){let r=4,i=t.attrs||[],o=bD(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Lt(r)&&!Lt(c))return!1;if(s&&Lt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!xD(t,c,n)||c===""&&e.length===1){if(Lt(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!yD(t.attrs,u,n)){if(Lt(r))return!1;s=!0}continue}let l=r&8?"class":c,d=wD(l,i,X0(t),n);if(d===-1){if(Lt(r))return!1;s=!0;continue}if(u!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Y0(h,u,0)!==-1||r&2&&u!==f){if(Lt(r))return!1;s=!0}}}}return Lt(r)||s}function Lt(t){return(t&1)===0}function wD(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ID(e,t)}function ED(t,e,n=!1){for(let r=0;r<e.length;r++)if(vD(t,e[r],n))return!0;return!1}function bD(t){for(let e=0;e<t.length;e++){let n=t[e];if(mD(n))return e}return t.length}function ID(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function _0(t,e){return t?":not("+e.trim()+")":e}function CD(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Lt(s)&&(e+=_0(o,i),i=""),r=s,o=o||!Lt(r);n++}return i!==""&&(e+=_0(o,i)),e}function DD(t){return t.map(CD).join(",")}function TD(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Lt(i))break;i=o}r++}return{attrs:e,classes:n}}function un(t){return bc(()=>{let e=ty(t),n=Et(rt({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Q0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||on.Emulated,styles:t.styles||en,_:null,schemas:t.schemas||null,tView:null,id:""});ny(n);let r=t.dependencies;return n.directiveDefs=x0(r,!1),n.pipeDefs=x0(r,!0),n.id=ND(n),n})}function AD(t){return Ci(t)||J0(t)}function SD(t){return t!==null}function Qe(t){return bc(()=>({type:t.type,bootstrap:t.bootstrap||en,declarations:t.declarations||en,imports:t.imports||en,exports:t.exports||en,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function y0(t,e){if(t==null)return jo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=An.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==An.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ic(t){return bc(()=>{let e=ty(t);return ny(e),e})}function Ci(t){return t[YC]||null}function J0(t){return t[ZC]||null}function ey(t){return t[XC]||null}function MD(t){let e=Ci(t)||J0(t)||ey(t);return e!==null?e.standalone:!1}function PD(t,e){let n=t[JC]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function ty(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||jo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||en,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:y0(t.inputs,e),outputs:y0(t.outputs),debugInfo:null}}function ny(t){t.features?.forEach(e=>e(t))}function x0(t,e){if(!t)return null;let n=e?ey:AD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(SD)}function ND(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Mn=0,H=1,L=2,ze=3,Bt=4,$t=5,Bo=6,Uo=7,qe=8,Di=9,sn=10,We=11,$o=12,v0=13,Ai=14,an=15,Cc=16,wi=17,Ho=18,Dc=19,ry=20,Fo=21,Ed=22,Cr=23,Ut=25,iy=1;var Dr=7,sc=8,ac=9,ot=10,Ef=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ef||{});function br(t){return Array.isArray(t)&&typeof t[iy]=="object"}function Pn(t){return Array.isArray(t)&&t[iy]===!0}function oy(t){return(t.flags&4)!==0}function bf(t){return t.componentOffset>-1}function If(t){return(t.flags&1)===1}function ts(t){return!!t.template}function OD(t){return(t[L]&512)!==0}function Go(t,e){let n=t.hasOwnProperty(l0);return n?t[l0]:null}var Fd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sy(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Cf(){return ay}function ay(t){return t.type.prototype.ngOnChanges&&(t.setInput=kD),RD}Cf.ngInherit=!0;function RD(){let t=uy(this),e=t?.current;if(e){let n=t.previous;if(n===jo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kD(t,e,n,r,i){let o=this.declaredInputs[r],s=uy(t)||FD(t,{previous:jo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Fd(u&&u.currentValue,n,c===jo),sy(t,e,i,n)}var cy="__ngSimpleChanges__";function uy(t){return t[cy]||null}function FD(t,e){return t[cy]=e}var w0=null;var tn=function(t,e,n){w0?.(t,e,n)},VD="svg",LD="math",jD=!1;function BD(){return jD}function cn(t){for(;Array.isArray(t);)t=t[Mn];return t}function UD(t,e){return cn(e[t])}function Ht(t,e){return cn(e[t.index])}function Df(t,e){return t.data[e]}function Pr(t,e){let n=e[t];return br(n)?n:n[Mn]}function Tf(t){return(t[L]&128)===128}function $D(t){return Pn(t[ze])}function cc(t,e){return e==null?null:t[e]}function ly(t){t[wi]=0}function HD(t){t[L]&1024||(t[L]|=1024,Tf(t)&&qo(t))}function GD(t,e){for(;t>0;)e=e[Ai],t--;return e}function dy(t){return t[L]&9216||t[Cr]?.dirty}function Vd(t){dy(t)?qo(t):t[L]&64&&(BD()?(t[L]|=1024,qo(t)):t[sn].changeDetectionScheduler?.notify())}function qo(t){t[sn].changeDetectionScheduler?.notify();let e=zo(t);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!Tf(e)));)e=zo(e)}function qD(t,e){if((t[L]&256)===256)throw new K(911,!1);t[Fo]===null&&(t[Fo]=[]),t[Fo].push(e)}function zo(t){let e=t[ze];return Pn(e)?e[ze]:e}var W={lFrame:xy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zD(){return W.lFrame.elementDepthCount}function WD(){W.lFrame.elementDepthCount++}function KD(){W.lFrame.elementDepthCount--}function fy(){return W.bindingsEnabled}function QD(){return W.skipHydrationRootTNode!==null}function YD(t){return W.skipHydrationRootTNode===t}function ZD(){W.skipHydrationRootTNode=null}function he(){return W.lFrame.lView}function Kn(){return W.lFrame.tView}function Ye(t){return W.lFrame.contextLView=t,t[qe]}function Ze(t){return W.lFrame.contextLView=null,t}function ln(){let t=hy();for(;t!==null&&t.type===64;)t=t.parent;return t}function hy(){return W.lFrame.currentTNode}function XD(){let t=W.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ns(t,e){let n=W.lFrame;n.currentTNode=t,n.isParent=e}function py(){return W.lFrame.isParent}function JD(){W.lFrame.isParent=!1}function gy(){let t=W.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function e1(t){return W.lFrame.bindingIndex=t}function Tc(){return W.lFrame.bindingIndex++}function t1(){return W.lFrame.inI18n}function n1(t,e){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ld(e)}function r1(){return W.lFrame.currentDirectiveIndex}function Ld(t){W.lFrame.currentDirectiveIndex=t}function my(t){W.lFrame.currentQueryIndex=t}function i1(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function _y(t,e,n){if(n&z.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&z.Host);)if(i=i1(o),i===null||(o=o[Ai],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=W.lFrame=yy();return r.currentTNode=e,r.lView=t,!0}function Af(t){let e=yy(),n=t[H];W.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yy(){let t=W.lFrame,e=t===null?null:t.child;return e===null?xy(t):e}function xy(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function vy(){let t=W.lFrame;return W.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wy=vy;function Sf(){let t=vy();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function o1(t){return(W.lFrame.contextLView=GD(t,W.lFrame.contextLView))[qe]}function Ac(){return W.lFrame.selectedIndex}function Tr(t){W.lFrame.selectedIndex=t}function Ey(){let t=W.lFrame;return Df(t.tView,t.selectedIndex)}function s1(){return W.lFrame.currentNamespace}var by=!0;function Mf(){return by}function Pf(t){by=t}function a1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ay(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Nf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function ec(t,e,n){Iy(t,e,3,n)}function tc(t,e,n,r){(t[L]&3)===n&&Iy(t,e,n,r)}function bd(t,e){let n=t[L];(n&3)===e&&(n&=16383,n+=1,t[L]=n)}function Iy(t,e,n,r){let i=r!==void 0?t[wi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[wi]+=65536),(a<o||o==-1)&&(c1(t,n,e,c),t[wi]=(t[wi]&4294901760)+c+2),c++}function E0(t,e){tn(4,t,e);let n=je(null);try{e.call(t)}finally{je(n),tn(5,t,e)}}function c1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[L]>>14<t[wi]>>16&&(t[L]&3)===e&&(t[L]+=16384,E0(a,o)):E0(a,o)}var Ii=-1,Wo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function u1(t){return t instanceof Wo}function l1(t){return(t.flags&8)!==0}function d1(t){return(t.flags&16)!==0}function Cy(t){return t!==Ii}function uc(t){return t&32767}function f1(t){return t>>16}function lc(t,e){let n=f1(t),r=e;for(;n>0;)r=r[Ai],n--;return r}var jd=!0;function b0(t){let e=jd;return jd=t,e}var h1=256,Dy=h1-1,Ty=5,p1=0,nn={};function g1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ro)&&(r=n[Ro]),r==null&&(r=n[Ro]=p1++);let i=r&Dy,o=1<<i;e.data[t+(i>>Ty)]|=o}function Ay(t,e){let n=Sy(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,Id(r.data,t),Id(e,null),Id(r.blueprint,null));let i=Of(t,e),o=t.injectorIndex;if(Cy(i)){let s=uc(i),a=lc(i,e),c=a[H].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Id(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Sy(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Of(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ry(i),r===null)return Ii;if(n++,i=i[Ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ii}function m1(t,e,n){g1(t,e,n)}function My(t,e,n){if(n&z.Optional||t!==void 0)return t;xf(e,"NodeInjector")}function Py(t,e,n,r){if(n&z.Optional&&r===void 0&&(r=null),!(n&(z.Self|z.Host))){let i=t[Di],o=Jt(void 0);try{return i?i.get(e,r,n&z.Optional):K0(e,r,n&z.Optional)}finally{Jt(o)}}return My(r,e,n)}function Ny(t,e,n,r=z.Default,i){if(t!==null){if(e[L]&2048&&!(r&z.Self)){let s=w1(t,e,n,r,nn);if(s!==nn)return s}let o=Oy(t,e,n,r,nn);if(o!==nn)return o}return Py(e,n,r,i)}function Oy(t,e,n,r,i){let o=x1(n);if(typeof o=="function"){if(!_y(e,t,r))return r&z.Host?My(i,n,r):Py(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&z.Optional))xf(n);else return s}finally{wy()}}else if(typeof o=="number"){let s=null,a=Sy(t,e),c=Ii,u=r&z.Host?e[an][$t]:null;for((a===-1||r&z.SkipSelf)&&(c=a===-1?Of(t,e):e[a+8],c===Ii||!C0(r,!1)?a=-1:(s=e[H],a=uc(c),e=lc(c,e)));a!==-1;){let l=e[H];if(I0(o,a,l.data)){let d=_1(a,e,n,s,r,u);if(d!==nn)return d}c=e[a+8],c!==Ii&&C0(r,e[H].data[a+8]===u)&&I0(o,a,e)?(s=l,a=uc(c),e=lc(c,e)):a=-1}}return i}function _1(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],c=r==null?bf(a)&&jd:r!=s&&(a.type&3)!==0,u=i&z.Host&&o===a,l=y1(a,s,n,c,u);return l!==null?Ko(e,s,l,a):nn}function y1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,f=i?a+l:u;for(let h=d;h<f;h++){let y=s[h];if(h<c&&n===y||h>=c&&y.type===n)return h}if(i){let h=s[c];if(h&&ts(h)&&h.type===n)return c}return null}function Ko(t,e,n,r){let i=t[n],o=e.data;if(u1(i)){let s=i;s.resolving&&tD(eD(o[n]));let a=b0(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Jt(s.injectImpl):null,l=_y(t,r,z.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&a1(n,o[n],e)}finally{u!==null&&Jt(u),b0(a),s.resolving=!1,wy()}}return i}function x1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ro)?t[Ro]:void 0;return typeof e=="number"?e>=0?e&Dy:v1:e}function I0(t,e,n){let r=1<<t;return!!(n[e+(t>>Ty)]&r)}function C0(t,e){return!(t&z.Self)&&!(t&z.Host&&e)}var Ir=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ny(this._tNode,this._lView,e,Ec(r),n)}};function v1(){return new Ir(ln(),he())}function w1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[L]&2048&&!(s[L]&512);){let a=Oy(o,s,n,r|z.Self,nn);if(a!==nn)return a;let c=o.parent;if(!c){let u=s[ry];if(u){let l=u.get(n,nn,r);if(l!==nn)return l}c=Ry(s),s=s[Ai]}o=c}return i}function Ry(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}var Xa="__parameters__";function E1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function b1(t,e,n){return bc(()=>{let r=E1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Xa)?c[Xa]:Object.defineProperty(c,Xa,{value:[]})[Xa];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function I1(t){let e=_t.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function C1(t){return typeof t=="function"}function Rf(t,e){t.forEach(n=>Array.isArray(n)?Rf(n,e):e(n))}function ky(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var kf=fD(b1("Optional"),8);function D1(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(M1))}return o}return fc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,f)=>{a.push(""),s.push(r(d).then(h=>{a[u+f]=h,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>P1(o));e.push(c)}),A1(),Promise.all(e).then(()=>{})}var fc=new Map,T1=new Set;function A1(){let t=fc;return fc=new Map,t}function S1(){return fc.size===0}function M1(t){return typeof t=="string"?t:t.text()}function P1(t){T1.delete(t)}var Qo=new F("ENVIRONMENT_INITIALIZER"),Fy=new F("INJECTOR",-1),Vy=new F("INJECTOR_DEF_TYPES"),hc=class{get(e,n=Lo){if(n===Lo){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}};function N1(...t){return{\u0275providers:O1(!0,t),\u0275fromNgModule:!0}}function O1(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Rf(e,s=>{let a=s;Bd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ly(i,o),n}function Ly(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ff(i,o=>{e(o,r)})}}function Bd(t,e,n,r){if(t=jt(t),!t)return!1;let i=null,o=h0(t),s=!o&&Ci(t);if(!o&&!s){let c=t.ngModule;if(o=h0(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Bd(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Rf(o.imports,l=>{Bd(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Ly(u,e)}if(!a){let u=Go(i)||(()=>new i);e({provide:i,useFactory:u,deps:en},i),e({provide:Vy,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>T(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Ff(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Ff(t,e){for(let n of t)q0(n)&&(n=n.\u0275providers),Array.isArray(n)?Ff(n,e):e(n)}var R1=oe({provide:String,useValue:oe});function jy(t){return t!==null&&typeof t=="object"&&R1 in t}function k1(t){return!!(t&&t.useExisting)}function F1(t){return!!(t&&t.useFactory)}function Ud(t){return typeof t=="function"}var Sc=new F("Set Injector scope."),nc={},V1={},Cd;function By(){return Cd===void 0&&(Cd=new hc),Cd}var Ar=class{},$d=class extends Ar{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gd(e,s=>this.processProvider(s)),this.records.set(Fy,Ei(void 0,this)),i.has("environment")&&this.records.set(Ar,Ei(void 0,this));let o=this.records.get(Sc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vy,en,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vi(this),r=Jt(void 0),i;try{return e()}finally{vi(n),Jt(r)}}get(e,n=Lo,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(d0))return e[d0](this);r=Ec(r);let i,o=vi(this),s=Jt(void 0);try{if(!(r&z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=H1(e)&&vf(e);u&&this.injectableDefInScope(u)?c=Ei(Hd(e),nc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&z.Self?By():this.parent;return n=r&z.Optional&&n===Lo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[oc]=a[oc]||[]).unshift(ft(e)),o)throw a;return pD(a,e,"R3InjectorError",this.source)}else throw a}finally{Jt(s),vi(o)}}resolveInjectorInitializers(){let e=vi(this),n=Jt(void 0),r;try{let i=this.get(Qo,en,z.Self);for(let o of i)o()}finally{vi(e),Jt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=jt(e);let n=Ud(e)?e:jt(e&&e.provide),r=j1(e);if(!Ud(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ei(void 0,nc,!0),i.factory=()=>Rd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===nc&&(n.value=V1,n.value=n.factory()),typeof n.value=="object"&&n.value&&$1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=jt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hd(t){let e=vf(t),n=e!==null?e.factory:Go(t);if(n!==null)return n;if(t instanceof F)throw new K(204,!1);if(t instanceof Function)return L1(t);throw new K(204,!1)}function L1(t){if(t.length>0)throw new K(204,!1);let n=iD(t);return n!==null?()=>n.factory(t):()=>new t}function j1(t){if(jy(t))return Ei(void 0,t.useValue);{let e=B1(t);return Ei(e,nc)}}function B1(t,e,n){let r;if(Ud(t)){let i=jt(t);return Go(i)||Hd(i)}else if(jy(t))r=()=>jt(t.useValue);else if(F1(t))r=()=>t.useFactory(...Rd(t.deps||[]));else if(k1(t))r=()=>T(jt(t.useExisting));else{let i=jt(t&&(t.useClass||t.provide));if(U1(t))r=()=>new i(...Rd(t.deps));else return Go(i)||Hd(i)}return r}function Ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function U1(t){return!!t.deps}function $1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function H1(t){return typeof t=="function"||typeof t=="object"&&t instanceof F}function Gd(t,e){for(let n of t)Array.isArray(n)?Gd(n,e):n&&q0(n)?Gd(n.\u0275providers,e):e(n)}function D0(t,e=null,n=null,r){let i=Uy(t,e,n,r);return i.resolveInjectorInitializers(),i}function Uy(t,e=null,n=null,r,i=new Set){let o=[n||en,N1(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new $d(o,e||By(),r||null,i)}var Nr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return D0({name:""},i,r,"");{let o=r.name??"";return D0({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Lo,e.NULL=new hc,e.\u0275prov=J({token:e,providedIn:"any",factory:()=>T(Fy)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var qd;function $y(t){qd=t}function G1(){if(qd!==void 0)return qd;if(typeof document<"u")return document;throw new K(210,!1)}var Mc=new F("AppId",{providedIn:"root",factory:()=>q1}),q1="ng",Vf=new F("Platform Initializer"),Dt=new F("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Lf=new F("CSP nonce",{providedIn:"root",factory:()=>G1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function z1(t){return t instanceof Function?t():t}function Hy(t){return(t.flags&128)===128}var Or=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Or||{});var Gy=new Map,W1=0;function K1(){return W1++}function Q1(t){Gy.set(t[Dc],t)}function Y1(t){Gy.delete(t[Dc])}var T0="__ngContext__";function Sr(t,e){br(e)?(t[T0]=e[Dc],Q1(e)):t[T0]=e}var Z1;function jf(t,e){return Z1(t,e)}function bi(t,e,n,r,i){if(r!=null){let o,s=!1;Pn(r)?o=r:br(r)&&(s=!0,r=r[Mn]);let a=cn(r);t===0&&n!==null?i==null?Ky(e,n,a):pc(e,n,a,i||null,!0):t===1&&n!==null?pc(e,n,a,i||null,!0):t===2?pT(e,a,s):t===3&&e.destroyNode(a),o!=null&&mT(e,t,o,n,i)}}function X1(t,e){return t.createText(e)}function J1(t,e,n){t.setValue(e,n)}function qy(t,e,n){return t.createElement(e,n)}function eT(t,e){zy(t,e),e[Mn]=null,e[$t]=null}function tT(t,e,n,r,i,o){r[Mn]=i,r[$t]=e,Nc(t,r,n,1,i,o)}function zy(t,e){e[sn].changeDetectionScheduler?.notify(),Nc(t,e,e[We],2,null,null)}function nT(t){let e=t[$o];if(!e)return Dd(t[H],t);for(;e;){let n=null;if(br(e))n=e[$o];else{let r=e[ot];r&&(n=r)}if(!n){for(;e&&!e[Bt]&&e!==t;)br(e)&&Dd(e[H],e),e=e[ze];e===null&&(e=t),br(e)&&Dd(e[H],e),n=e&&e[Bt]}e=n}}function rT(t,e,n,r){let i=ot+r,o=n.length;r>0&&(n[i-1][Bt]=e),r<o-ot?(e[Bt]=n[i],ky(n,ot+r,e)):(n.push(e),e[Bt]=null),e[ze]=n;let s=e[Cc];s!==null&&n!==s&&iT(s,e);let a=e[Ho];a!==null&&a.insertView(t),Vd(e),e[L]|=128}function iT(t,e){let n=t[ac],i=e[ze][ze][an];e[an]!==i&&(t[L]|=Ef.HasTransplantedViews),n===null?t[ac]=[e]:n.push(e)}function Wy(t,e){let n=t[ac],r=n.indexOf(e);n.splice(r,1)}function Yo(t,e){if(t.length<=ot)return;let n=ot+e,r=t[n];if(r){let i=r[Cc];i!==null&&i!==t&&Wy(i,r),e>0&&(t[n-1][Bt]=r[Bt]);let o=dc(t,ot+e);eT(r[H],r);let s=o[Ho];s!==null&&s.detachView(o[H]),r[ze]=null,r[Bt]=null,r[L]&=-129}return r}function Pc(t,e){if(!(e[L]&256)){let n=e[We];n.destroyNode&&Nc(t,e,n,3,null,null),nT(e)}}function Dd(t,e){if(!(e[L]&256)){e[L]&=-129,e[L]|=256,e[Cr]&&F_(e[Cr]),sT(t,e),oT(t,e),e[H].type===1&&e[We].destroy();let n=e[Cc];if(n!==null&&Pn(e[ze])){n!==e[ze]&&Wy(n,e);let r=e[Ho];r!==null&&r.detachView(t)}Y1(e)}}function oT(t,e){let n=t.cleanup,r=e[Uo];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Uo]=null);let i=e[Fo];if(i!==null){e[Fo]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function sT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Wo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];tn(4,a,c);try{c.call(a)}finally{tn(5,a,c)}}else{tn(4,i,o);try{o.call(i)}finally{tn(5,i,o)}}}}}function aT(t,e,n){return cT(t,e.parent,n)}function cT(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Mn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===on.None||o===on.Emulated)return null}return Ht(r,n)}}function pc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ky(t,e,n){t.appendChild(e,n)}function A0(t,e,n,r,i){r!==null?pc(t,e,n,r,i):Ky(t,e,n)}function uT(t,e,n,r){t.removeChild(e,n,r)}function Bf(t,e){return t.parentNode(e)}function lT(t,e){return t.nextSibling(e)}function dT(t,e,n){return hT(t,e,n)}function fT(t,e,n){return t.type&40?Ht(t,n):null}var hT=fT,S0;function Uf(t,e,n,r){let i=aT(t,r,e),o=e[We],s=r.parent||e[$t],a=dT(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)A0(o,i,n[c],a,!1);else A0(o,i,n,a,!1);S0!==void 0&&S0(o,r,e,n,i)}function rc(t,e){if(e!==null){let n=e.type;if(n&3)return Ht(e,t);if(n&4)return zd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return rc(t,r);{let i=t[e.index];return Pn(i)?zd(-1,i):cn(i)}}else{if(n&32)return jf(e,t)()||cn(t[e.index]);{let r=Qy(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(t[an]);return rc(i,r)}else return rc(t,e.next)}}}return null}function Qy(t,e){if(e!==null){let r=t[an][$t],i=e.projection;return r.projection[i]}return null}function zd(t,e){let n=ot+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return rc(r,i)}return e[Dr]}function pT(t,e,n){let r=Bf(t,e);r&&uT(t,r,e,n)}function $f(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Sr(cn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)$f(t,e,n.child,r,i,o,!1),bi(e,t,i,a,o);else if(c&32){let u=jf(n,r),l;for(;l=u();)bi(e,t,i,l,o);bi(e,t,i,a,o)}else c&16?gT(t,e,r,n,i,o):bi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Nc(t,e,n,r,i,o){$f(n,r,t.firstChild,e,i,o,!1)}function gT(t,e,n,r,i,o){let s=n[an],c=s[$t].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];bi(e,t,i,l,o)}else{let u=c,l=s[ze];Hy(r)&&(u.flags|=128),$f(t,e,u,l,i,o,!0)}}function mT(t,e,n,r,i){let o=n[Dr],s=cn(n);o!==s&&bi(e,t,r,o,i);for(let a=ot;a<n.length;a++){let c=n[a];Nc(c[H],c,t,e,r,o)}}function _T(t,e,n){t.setAttribute(e,"style",n)}function Yy(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Zy(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&kd(t,e,r),i!==null&&Yy(t,e,i),o!==null&&_T(t,e,o)}var gc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${G0})`}};function Hf(t){return t instanceof gc?t.changingThisBreaksApplicationSecurity:t}function Xy(t,e){let n=yT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${G0})`)}return n===e}function yT(t){return t instanceof gc&&t.getTypeName()||null}var xT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Jy(t){return t=String(t),t.match(xT)?t:"unsafe:"+t}var Gf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Gf||{});function Nn(t){let e=vT();return e?e.sanitize(Gf.URL,t)||"":Xy(t,"URL")?Hf(t):Jy(yf(t))}function vT(){let t=he();return t&&t[sn].sanitizer}var Wd=class{};var wT="h",ET="b";var bT=()=>null;function qf(t,e,n=!1){return bT(t,e,n)}var Kd=class{},mc=class{};function IT(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[CT]=t,e}var CT="ngComponent";var Qd=class{resolveComponentFactory(e){throw IT(e)}},zf=(()=>{let e=class e{};e.NULL=new Qd;let t=e;return t})();function DT(){return Oc(ln(),he())}function Oc(t,e){return new rs(Ht(t,e))}var rs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=DT;let t=e;return t})();var Zo=class{},Rc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>TT();let t=e;return t})();function TT(){let t=he(),e=ln(),n=Pr(e.index,t);return(br(n)?n:t)[We]}var AT=(()=>{let e=class e{};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Td={};function _c(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(cn(o)),Pn(o)&&ST(o,r);let s=n.type;if(s&8)_c(t,e,n.child,r);else if(s&32){let a=jf(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Qy(e,n);if(Array.isArray(a))r.push(...a);else{let c=zo(e[an]);_c(c[H],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ST(t,e){for(let n=ot;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&_c(r[H],r,i,e)}t[Dr]!==t[Mn]&&e.push(t[Dr])}var ex=[];function MT(t){return t[Cr]??PT(t)}function PT(t){let e=ex.pop()??Object.create(OT);return e.lView=t,e}function NT(t){t.lView[Cr]!==t&&(t.lView=null,ex.push(t))}var OT=Et(rt({},O_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qo(t.lView)},consumerOnSignalRead(){this.lView[Cr]=this}});function tx(t){return rx(t[$o])}function nx(t){return rx(t[Bt])}function rx(t){for(;t!==null&&!Pn(t);)t=t[Bt];return t}var RT="ngOriginalError";function Ad(t){return t[RT]}var Sn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ad(e);for(;n&&Ad(n);)n=Ad(n);return n||null}},ix=new F("",{providedIn:"root",factory:()=>Ne(Sn).handleError.bind(void 0)});var ox=!1,kT=new F("",{providedIn:"root",factory:()=>ox});var Si={};function j(t=1){sx(Kn(),he(),Ac()+t,!1)}function sx(t,e,n,r){if(!r)if((e[L]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ec(e,o,n)}else{let o=t.preOrderHooks;o!==null&&tc(e,o,0,n)}Tr(n)}function Oe(t,e=z.Default){let n=he();if(n===null)return T(t,e);let r=ln();return Ny(r,n,jt(t),e)}function ax(t,e,n,r,i,o){let s=je(null);try{let a=null;i&An.SignalBased&&(a=e[r][N_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&An.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):sy(e,a,r,o)}finally{je(s)}}function FT(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Tr(~i);else{let o=i,s=n[++r],a=n[++r];n1(s,o);let c=e[o];a(2,c)}}}finally{Tr(-1)}}function kc(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Mn]=i,d[L]=r|4|128|8|64,(u!==null||t&&t[L]&2048)&&(d[L]|=2048),ly(d),d[ze]=d[Ai]=t,d[qe]=n,d[sn]=s||t&&t[sn],d[We]=a||t&&t[We],d[Di]=c||t&&t[Di]||null,d[$t]=o,d[Dc]=K1(),d[Bo]=l,d[ry]=u,d[an]=e.type==2?t[an]:d,d}function Fc(t,e,n,r,i){let o=t.data[e];if(o===null)o=VT(t,e,n,r,i),t1()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=XD();o.injectorIndex=s===null?-1:s.injectorIndex}return ns(o,!0),o}function VT(t,e,n,r,i){let o=hy(),s=py(),a=s?o:o&&o.parent,c=t.data[e]=$T(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function cx(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ux(t,e,n,r,i){let o=Ac(),s=r&2;try{Tr(-1),s&&e.length>Ut&&sx(t,e,Ut,!1),tn(s?2:0,i),n(r,i)}finally{Tr(o),tn(s?3:1,i)}}function lx(t,e,n){if(oy(e)){let r=je(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{je(r)}}}function dx(t,e,n){fy()&&(KT(t,e,n,Ht(n,e)),(n.flags&64)===64&&_x(t,e,n))}function fx(t,e,n=Ht){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function hx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Wf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Wf(t,e,n,r,i,o,s,a,c,u,l){let d=Ut+r,f=d+i,h=LT(d,f),y=typeof u=="function"?u():u;return h[H]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:l}}function LT(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Si);return n}function jT(t,e,n,r){let o=r.get(kT,ox)||n===on.ShadowDom,s=t.selectRootElement(e,o);return BT(s),s}function BT(t){UT(t)}var UT=()=>null;function $T(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return QD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function M0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=An.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?P0(r,n,u,a,c):P0(r,n,u,a)}return r}function P0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function HT(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],f=n?n.get(d):null,h=f?f.inputs:null,y=f?f.outputs:null;c=M0(0,d.inputs,l,c,h),u=M0(1,d.outputs,l,u,y);let _=c!==null&&s!==null&&!X0(e)?rA(c,l,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function GT(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function px(t,e,n,r,i,o,s,a){let c=Ht(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Kf(t,n,l,r,i),bf(e)&&qT(n,e.index)):e.type&3?(r=GT(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function qT(t,e){let n=Pr(e,t);n[L]&16||(n[L]|=64)}function gx(t,e,n,r){if(fy()){let i=r===null?null:{"":-1},o=YT(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&mx(t,e,n,s,i,a),i&&ZT(n,r,i)}n.mergedAttrs=wf(n.mergedAttrs,n.attrs)}function mx(t,e,n,r,i,o){for(let u=0;u<r.length;u++)m1(Ay(n,e),t,r[u].type);JT(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=cx(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=wf(n.mergedAttrs,l.hostAttrs),eA(t,n,e,c,l),XT(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}HT(t,n,o)}function zT(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;WT(s)!=a&&s.push(a),s.push(n,r,o)}}function WT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function KT(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;bf(n)&&tA(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ay(n,e),Sr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Ko(e,t,a,n);if(Sr(u,e),s!==null&&nA(e,a-i,u,c,n,s),ts(c)){let l=Pr(n.index,e);l[qe]=Ko(e,t,a,n)}}}function _x(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=r1();try{Tr(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Ld(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QT(c,u)}}finally{Tr(-1),Ld(s)}}function QT(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YT(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(ED(e,s.selectors,!1))if(r||(r=[]),ts(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Yd(t,e,c)}else r.unshift(s),Yd(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Yd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ZT(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function XT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ts(e)&&(n[""]=t)}}function JT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function eA(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Go(i.type,!0)),s=new Wo(o,ts(i),Oe);t.blueprint[r]=s,n[r]=s,zT(t,e,r,cx(t,n,i.hostVars,Si),i)}function tA(t,e,n){let r=Ht(e,t),i=hx(n),o=t[sn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vc(t,kc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function nA(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];ax(r,n,c,u,l,d)}}function rA(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function yx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function xx(t,e){let n=t.contentQueries;if(n!==null){let r=je(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];my(o),a.contentQueries(2,e[s],s)}}}finally{je(r)}}}function Vc(t,e){return t[$o]?t[v0][Bt]=e:t[$o]=e,t[v0]=e,e}function Zd(t,e,n){my(0);let r=je(null);try{e(t,n)}finally{je(r)}}function iA(t){return t[Uo]||(t[Uo]=[])}function oA(t){return t.cleanup||(t.cleanup=[])}function vx(t,e){let n=t[Di],r=n?n.get(Sn,null):null;r&&r.handleError(e)}function Kf(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];ax(l,u,r,a,c,i)}}function sA(t,e,n){let r=UD(e,t);J1(t[We],r,n)}var aA=100;function cA(t,e=!0){let n=t[sn],r=n.rendererFactory,i=!1;i||r.begin?.();try{uA(t)}catch(o){throw e&&vx(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function uA(t){Xd(t,0);let e=0;for(;dy(t);){if(e===aA)throw new K(103,!1);e++,Xd(t,1)}}function lA(t,e,n,r){let i=e[L];if((i&256)===256)return;let o=!1;!o&&e[sn].inlineEffectRunner?.flush(),Af(e);let s=null,a=null;!o&&dA(t)&&(a=MT(e),s=R_(a));try{ly(e),e1(t.bindingStartIndex),n!==null&&ux(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&ec(e,d,null)}else{let d=t.preOrderHooks;d!==null&&tc(e,d,0,null),bd(e,0)}if(fA(e),wx(e,0),t.contentQueries!==null&&xx(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&ec(e,d)}else{let d=t.contentHooks;d!==null&&tc(e,d,1),bd(e,1)}FT(t,e);let u=t.components;u!==null&&bx(e,u,0);let l=t.viewQuery;if(l!==null&&Zd(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&ec(e,d)}else{let d=t.viewHooks;d!==null&&tc(e,d,2),bd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ed]){for(let d of e[Ed])d();e[Ed]=null}o||(e[L]&=-73)}catch(c){throw qo(e),c}finally{a!==null&&(k_(a,s),NT(a)),Sf()}}function dA(t){return t.type!==2}function wx(t,e){for(let n=tx(t);n!==null;n=nx(n))for(let r=ot;r<n.length;r++){let i=n[r];Ex(i,e)}}function fA(t){for(let e=tx(t);e!==null;e=nx(e)){if(!(e[L]&Ef.HasTransplantedViews))continue;let n=e[ac];for(let r=0;r<n.length;r++){let i=n[r],o=i[ze];HD(i)}}}function hA(t,e,n){let r=Pr(e,t);Ex(r,n)}function Ex(t,e){Tf(t)&&Xd(t,e)}function Xd(t,e){let r=t[H],i=t[L],o=t[Cr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&od(o)),o&&(o.dirty=!1),t[L]&=-9217,s)lA(r,t,r.template,t[qe]);else if(i&8192){wx(t,1);let a=r.components;a!==null&&bx(t,a,1)}}function bx(t,e,n){for(let r=0;r<e.length;r++)hA(t,e[r],n)}function Qf(t){for(t[sn].changeDetectionScheduler?.notify();t;){t[L]|=64;let e=zo(t);if(OD(t)&&!e)return t;t=e}return null}var Xo=class{get rootNodes(){let e=this._lView,n=e[H];return _c(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qe]}set context(e){this._lView[qe]=e}get destroyed(){return(this._lView[L]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ze];if(Pn(e)){let n=e[sc],r=n?n.indexOf(this):-1;r>-1&&(Yo(e,r),dc(n,r))}this._attachedToViewContainer=!1}Pc(this._lView[H],this._lView)}onDestroy(e){qD(this._lView,e)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[L]&=-129}reattach(){Vd(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,cA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,zy(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e,Vd(this._lView)}};var N0=new Set;function Yf(t){N0.has(t)||(N0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Jd=class extends bt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Sd(o),i&&(i=Sd(i)),s&&(s=Sd(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ge&&e.add(a),a}};function Sd(t){return e=>{setTimeout(t,void 0,e)}}var rn=Jd;function O0(...t){}function pA(){let t=typeof _t.requestAnimationFrame=="function",e=_t[t?"requestAnimationFrame":"setTimeout"],n=_t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=pA().nativeRequestAnimationFrame,_A(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gA,O0,O0);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gA={};function Zf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mA(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ef(t),t.isCheckStableRunning=!0,Zf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ef(t))}function _A(t){let e=()=>{mA(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(yA(a))return n.invokeTask(i,o,s,a);try{return R0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),k0(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return R0(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),k0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,ef(t),Zf(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function ef(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function R0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function k0(t){t._nesting--,Zf(t)}var tf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function yA(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function xA(t="zone.js",e){return t==="noop"?new tf:t==="zone.js"?new ie(e):t}var Ix=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function vA(t,e){let n=Pr(e,t),r=n[H];wA(r,n);let i=n[Mn];i!==null&&n[Bo]===null&&(n[Bo]=qf(i,n[Di])),Xf(r,n,n[qe])}function wA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Xf(t,e,n){Af(e);try{let r=t.viewQuery;r!==null&&Zd(1,r,n);let i=t.template;i!==null&&ux(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&xx(t,e),t.staticViewQueries&&Zd(2,t.viewQuery,n);let o=t.components;o!==null&&EA(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[L]&=-5,Sf()}}function EA(t,e){for(let n=0;n<e.length;n++)vA(t,e[n])}function nf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=u0(i,a);else if(o==2){let c=a,u=e[++s];r=u0(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var rf=class extends zf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ci(e);return new yc(n,this.ngModule)}};function F0(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function bA(t){let e=t.toLowerCase();return e==="svg"?VD:e==="math"?LD:null}var of=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ec(r);let i=this.injector.get(e,Td,r);return i!==Td||n===Td?i:this.parentInjector.get(e,n,r)}},yc=class extends mc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=F0(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return F0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=DD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof Ar?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new of(e,o):e,a=s.get(Zo,null);if(a===null)throw new K(407,!1);let c=s.get(AT,null),u=s.get(Ix,null),l=s.get(Wd,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",y=r?jT(f,r,this.componentDef.encapsulation,s):qy(f,h,bA(h)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let x=null;y!==null&&(x=qf(y,s,!0));let b=Wf(0,null,null,1,0,null,null,null,null,null,null),M=kc(null,b,null,_,null,null,d,f,s,null,x);Af(M);let D,N;try{let R=this.componentDef,U,fe=null;R.findHostDirectiveDefs?(U=[],fe=new Map,R.findHostDirectiveDefs(R,U,fe),U.push(R)):U=[R];let wt=IA(M,y),Zl=CA(wt,y,R,U,M,d,f);N=Df(b,Ut),y&&AA(f,R,y,r),n!==void 0&&SA(N,this.ngContentSelectors,n),D=TA(Zl,R,U,fe,M,[MA]),Xf(b,M,null)}finally{Sf()}return new sf(this.componentType,D,Oc(N,M),M,N)}},sf=class extends Kd{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Xo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Kf(o[H],o,i,e,n),this.previousInputValues.set(e,n);let s=Pr(this._tNode.index,o);Qf(s)}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IA(t,e){let n=t[H],r=Ut;return t[r]=e,Fc(n,r,2,"#host",null)}function CA(t,e,n,r,i,o,s){let a=i[H];DA(r,t,e,s);let c=null;e!==null&&(c=qf(e,i[Di]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=kc(i,hx(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Yd(a,t,r.length-1),Vc(i,d),i[t.index]=d}function DA(t,e,n,r){for(let i of t)e.mergedAttrs=wf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nf(e,e.mergedAttrs,!0),n!==null&&Zy(r,n,e))}function TA(t,e,n,r,i,o){let s=ln(),a=i[H],c=Ht(s,i);mx(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,f=Ko(i,a,d,s);Sr(f,i)}_x(a,i,s),c&&Sr(c,i);let u=Ko(i,a,s.directiveStart+s.componentOffset,s);if(t[qe]=i[qe]=u,o!==null)for(let l of o)l(u,e);return lx(a,s,t),u}function AA(t,e,n,r){if(r)kd(t,n,["ng-version","17.1.0"]);else{let{attrs:i,classes:o}=TD(e.selectors[0]);i&&kd(t,n,i),o&&o.length>0&&Yy(t,n,o.join(" "))}}function SA(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function MA(){let t=ln();Nf(he()[H],t)}var F4=new RegExp(`^(\\d+)*(${ET}|${wT})*(.*)`);var PA=()=>null;function Jo(t,e){return PA(t,e)}function Lc(t,e,n,r){let i=e.tView,s=t[L]&4096?4096:16,a=kc(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Cc]=c;let u=t[Ho];return u!==null&&(a[Ho]=u.createEmbeddedView(i)),Xf(i,a,n),a}function Cx(t,e){let n=ot+e;if(n<t.length)return t[n]}function es(t,e){return!e||e.firstChild===null||Hy(t)}function jc(t,e,n,r=!0){let i=e[H];if(rT(i,e,t,n),r){let s=zd(n,t),a=e[We],c=Bf(a,t[Dr]);c!==null&&tT(i,t[$t],a,e,c,s)}let o=e[Bo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Dx(t,e){let n=Yo(t,e);return n!==void 0&&Pc(n[H],n),n}var Jf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NA;let t=e;return t})();function NA(){let t=ln();return RA(t,he())}var OA=Jf,Tx=class extends OA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Oc(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let e=Of(this._hostTNode,this._hostLView);if(Cy(e)){let n=lc(e,this._hostLView),r=uc(e),i=n[H].data[r+8];return new Ir(i,n)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=V0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jo(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,es(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!C1(e),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new yc(Ci(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?u:this.parentInjector).get(Ar,null);_&&(o=_)}let l=Ci(c.componentType??{}),d=Jo(this._lContainer,l?.id??null),f=d?.firstChild??null,h=c.create(u,i,f,o);return this.insertImpl(h.hostView,a,es(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if($D(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ze],u=new Tx(c,c[$t],c[ze]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return jc(s,i,o,r),e.attachToViewContainerRef(),ky(Md(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=V0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yo(this._lContainer,n);r&&(dc(Md(this._lContainer),n),Pc(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yo(this._lContainer,n);return r&&dc(Md(this._lContainer),n)!=null?new Xo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function V0(t){return t[sc]}function Md(t){return t[sc]||(t[sc]=[])}function RA(t,e){let n,r=e[t.index];return Pn(r)?n=r:(n=yx(r,e,null,t),e[t.index]=n,Vc(e,n)),FA(n,e,t,r),new Tx(n,t,e)}function kA(t,e){let n=t[We],r=n.createComment(""),i=Ht(e,t),o=Bf(n,i);return pc(n,o,r,lT(n,i),!1),r}var FA=jA,VA=()=>!1;function LA(t,e,n){return VA(t,e,n)}function jA(t,e,n,r){if(t[Dr])return;let i;n.type&8?i=cn(r):i=kA(e,n),t[Dr]=i}function Ax(t,e,n){return t[e]=n}function Mr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function BA(t,e,n,r){let i=Mr(t,e,n);return Mr(t,e+1,r)||i}function UA(t,e,n,r,i,o,s,a,c){let u=e.consts,l=Fc(e,t,4,s||null,cc(u,a));gx(e,n,l,cc(u,c)),Nf(e,l);let d=l.tView=Wf(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function ht(t,e,n,r,i,o,s,a){let c=he(),u=Kn(),l=t+Ut,d=u.firstCreatePass?UA(l,u,c,e,n,r,i,o,s):u.data[l];ns(d,!1);let f=$A(u,c,d,t);Mf()&&Uf(u,c,f,d),Sr(f,c);let h=yx(f,c,f,d);return c[l]=h,Vc(c,h),LA(h,d,c),If(d)&&dx(u,c,d),s!=null&&fx(c,d,a),ht}var $A=HA;function HA(t,e,n,r){return Pf(!0),e[We].createComment("")}function Sx(t,e,n,r){return Mr(t,Tc(),n)?e+yf(n)+r:Si}function st(t,e,n){let r=he(),i=Tc();if(Mr(r,i,e)){let o=Kn(),s=Ey();px(o,s,r,t,e,r[We],n,!1)}return st}function L0(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Kf(t,n,o[s],s,r)}var af=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Pd(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function GA(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),u=e[o],l=Pd(o,c,o,u,n);if(l!==0){l<0&&t.updateValue(o,u),o++;continue}let d=t.at(s),f=e[a],h=Pd(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let y=n(o,c),_=n(s,d),x=n(o,u);if(Object.is(x,_)){let b=n(a,f);Object.is(b,y)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new xc,i??=B0(t,o,s,n),cf(t,r,o,x))t.updateValue(o,u),o++,s++;else if(i.has(x))r.set(y,t.detach(o)),s--;else{let b=t.create(o,e[o]);t.attach(o,b),o++,s++}}for(;o<=a;)j0(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let u=t.at(o),l=c.value,d=Pd(o,u,o,l,n);if(d!==0)d<0&&t.updateValue(o,l),o++,c=a.next();else{r??=new xc,i??=B0(t,o,s,n);let f=n(o,l);if(cf(t,r,o,f))t.updateValue(o,l),o++,s++,c=a.next();else if(!i.has(f))t.attach(o,t.create(o,l)),o++,s++,c=a.next();else{let h=n(o,u);r.set(h,t.detach(o)),s--}}}for(;!c.done;)j0(t,r,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function cf(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function j0(t,e,n,r,i){if(cf(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function B0(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var xc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function dn(t,e,n){Yf("NgControlFlow");let r=he(),i=Tc(),o=ff(r,Ut+t),s=0;if(Mr(r,i,e)){let a=je(null);try{if(Dx(o,s),e!==-1){let c=hf(r[H],Ut+e),u=Jo(o,c.tView.ssrId),l=Lc(r,c,n,{dehydratedView:u});jc(o,l,s,es(c,u))}}finally{je(a)}}else{let a=Cx(o,s);a!==void 0&&(a[qe]=n)}}var uf=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ot}};function Tt(t){return t}var lf=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function At(t,e,n,r,i,o,s,a,c,u,l,d,f){Yf("NgControlFlow");let h=c!==void 0,y=he(),_=a?s.bind(y[an][qe]):s,x=new lf(h,_);y[Ut+t]=x,ht(t+1,e,n,r,i,o),h&&ht(t+2,c,u,l,d,f)}var df=class extends af{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ot}at(e){return this.getLView(e)[qe].$implicit}attach(e,n){let r=n[Bo];this.needsIndexUpdate||=e!==this.length,jc(this.lContainer,n,e,es(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,qA(this.lContainer,e)}create(e,n){let r=Jo(this.lContainer,this.templateTNode.tView.ssrId);return Lc(this.hostLView,this.templateTNode,new uf(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Pc(e[H],e)}updateValue(e,n){this.getLView(e)[qe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[qe].$index=e}getLView(e){return zA(this.lContainer,e)}};function St(t){let e=je(null),n=Ac();try{let r=he(),i=r[H],o=r[n];if(o.liveCollection===void 0){let a=n+1,c=ff(r,a),u=hf(i,a);o.liveCollection=new df(c,r,u)}else o.liveCollection.reset();let s=o.liveCollection;if(GA(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Tc(),c=s.length===0;if(Mr(r,a,c)){let u=n+2,l=ff(r,u);if(c){let d=hf(i,u),f=Jo(l,d.tView.ssrId),h=Lc(r,d,void 0,{dehydratedView:f});jc(l,h,0,es(d,f))}else Dx(l,0)}}}finally{je(e)}}function ff(t,e){return t[e]}function qA(t,e){return Yo(t,e)}function zA(t,e){return Cx(t,e)}function hf(t,e){return Df(t,e)}function WA(t,e,n,r,i,o){let s=e.consts,a=cc(s,i),c=Fc(e,t,2,r,a);return gx(e,n,c,cc(s,o)),c.attrs!==null&&nf(c,c.attrs,!1),c.mergedAttrs!==null&&nf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function k(t,e,n,r){let i=he(),o=Kn(),s=Ut+t,a=i[We],c=o.firstCreatePass?WA(s,o,i,e,n,r):o.data[s],u=KA(o,i,c,a,e,t);i[s]=u;let l=If(c);return ns(c,!0),Zy(a,u,c),(c.flags&32)!==32&&Mf()&&Uf(o,i,u,c),zD()===0&&Sr(u,i),WD(),l&&(dx(o,i,c),lx(o,c,i)),r!==null&&fx(i,c),k}function O(){let t=ln();py()?JD():(t=t.parent,ns(t,!1));let e=t;YD(e)&&ZD(),KD();let n=Kn();return n.firstCreatePass&&(Nf(n,t),oy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&l1(e)&&L0(n,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&d1(e)&&L0(n,e,he(),e.stylesWithoutHost,!1),O}function _e(t,e,n,r){return k(t,e,n,r),O(),_e}var KA=(t,e,n,r,i,o)=>(Pf(!0),qy(r,i,s1()));function Xe(){return he()}var vc="en-US";var QA=vc;function YA(t){nD(t,"Expected localeId to be defined"),typeof t=="string"&&(QA=t.toLowerCase().replace(/_/g,"-"))}function Bc(t){return!!t&&typeof t.then=="function"}function Mx(t){return!!t&&typeof t.subscribe=="function"}function ye(t,e,n,r){let i=he(),o=Kn(),s=ln();return XA(o,i,i[We],s,t,e,r),ye}function ZA(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Uo],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function XA(t,e,n,r,i,o,s){let a=If(r),u=t.firstCreatePass&&oA(t),l=e[qe],d=iA(e),f=!0;if(r.type&3||s){let _=Ht(r,e),x=s?s(_):_,b=d.length,M=s?N=>s(cn(N[r.index])):r.index,D=null;if(!s&&a&&(D=ZA(t,e,i,r.index)),D!==null){let N=D.__ngLastListenerFn__||D;N.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,f=!1}else{o=$0(r,e,l,o,!1);let N=n.listen(x,i,o);d.push(o,N),u&&u.push(i,M,b,b+1)}}else o=$0(r,e,l,o,!1);let h=r.outputs,y;if(f&&h!==null&&(y=h[i])){let _=y.length;if(_)for(let x=0;x<_;x+=2){let b=y[x],M=y[x+1],R=e[b][M].subscribe(o),U=d.length;d.push(o,R),u&&u.push(i,r.index,U,-(U+1))}}}function U0(t,e,n,r){try{return tn(6,e,n),n(r)!==!1}catch(i){return vx(t,i),!1}finally{tn(7,e,n)}}function $0(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Pr(t.index,e):e;Qf(a);let c=U0(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=U0(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ee(t=1){return o1(t)}function is(t,e,n){return Px(t,"",e,"",n),is}function Px(t,e,n,r,i){let o=he(),s=Sx(o,e,n,r);if(s!==Si){let a=Kn(),c=Ey();px(a,c,o,t,s,o[We],i,!1)}return Px}var eh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tS;let t=e;return t})(),JA=eh,eS=class extends JA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Lc(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Xo(i)}};function tS(){return nS(ln(),he())}function nS(t,e){return t.type&4?new eS(e,t,Oc(t,e)):null}function te(t,e=""){let n=he(),r=Kn(),i=t+Ut,o=r.firstCreatePass?Fc(r,i,1,e,null):r.data[i],s=rS(r,n,o,e,t);n[i]=s,Mf()&&Uf(r,n,s,o),ns(o,!1)}var rS=(t,e,n,r,i)=>(Pf(!0),X1(e[We],r));function Qn(t){return Re("",t,""),Qn}function Re(t,e,n){let r=he(),i=Sx(r,t,e,n);return i!==Si&&sA(r,Ac(),i),Re}var Ti=class{},pf=class{};var wc=class extends Ti{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rf(this);let i=PD(e);this._bootstrapComponents=z1(i.bootstrap),this._r3Injector=Uy(e,n,[{provide:Ti,useValue:this},{provide:zf,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gf=class extends pf{constructor(e){super(),this.moduleType=e}create(e){return new wc(this.moduleType,e,[])}};function iS(t,e,n){return new wc(t,e,n)}function th(t,e,n,r){return oS(he(),gy(),t,e,n,r)}function Uc(t,e,n,r,i){return sS(he(),gy(),t,e,n,r,i)}function Nx(t,e){let n=t[e];return n===Si?void 0:n}function oS(t,e,n,r,i,o){let s=e+n;return Mr(t,s,i)?Ax(t,s+1,o?r.call(o,i):r(i)):Nx(t,s+1)}function sS(t,e,n,r,i,o,s){let a=e+n;return BA(t,a,i,o)?Ax(t,a+2,s?r.call(s,i,o):r(i,o)):Nx(t,a+2)}var Ja=null;function aS(t){Ja!==null&&(t.defaultEncapsulation!==Ja.defaultEncapsulation||t.preserveWhitespaces!==Ja.preserveWhitespaces)||(Ja=t)}var Wn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Ox=new Wn("17.1.0");var cS=new F("compilerOptions");var Rx=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new To(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nh=new F(""),os=new F(""),$c=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,rh||(uS(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(T(ie),T(Hc),T(os))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Hc=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return rh?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function uS(t){rh=t}var rh,lS=new F("Application Initializer"),kx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Ne(lS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Bc(s))r.push(s);else if(Mx(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dS=new F("appBootstrapListener");function fS(t,e,n){let r=new gf(n);return Promise.resolve(r)}function hS(){V_(()=>{throw new K(600,!1)})}function pS(t){return t.isBoundToModule}function gS(t,e,n){try{let r=n();return Bc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Fx(t,e){return Array.isArray(e)?e.reduce(Fx,t):rt(rt({},t),e)}var Gc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ne(ix),this.afterRenderEffectManager=Ne(Ix),this.componentTypes=[],this.components=[],this.isStable=Ne(Rx).hasPendingTasks.pipe(Ce(r=>!r)),this._injector=Ne(Ar)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof mc;if(!this._injector.get(kx).done){let h=!o&&MD(r),y=!1;throw new K(405,y)}let a;o?a=r:a=this._injector.get(zf).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=pS(a)?void 0:this._injector.get(Ti),u=i||a.selector,l=a.create(Nr.NULL,[],u,c),d=l.location.nativeElement,f=l.injector.get(nh,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ic(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;ic(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(dS,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ic(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new K(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ic(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function H0(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var mS=(()=>{let e=class e{constructor(){this.zone=Ne(ie),this.applicationRef=Ne(Gc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _S(t){return[{provide:ie,useFactory:t},{provide:Qo,multi:!0,useFactory:()=>{let e=Ne(mS,{optional:!0});return()=>e.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let e=Ne(vS);return()=>{e.initialize()}}},{provide:ix,useFactory:yS}]}function yS(){let t=Ne(ie),e=Ne(Sn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function xS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var vS=(()=>{let e=class e{constructor(){this.subscription=new Ge,this.initialized=!1,this.zone=Ne(ie),this.pendingTasks=Ne(Rx)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wS(){return typeof $localize<"u"&&$localize.locale||vc}var ih=new F("LocaleId",{providedIn:"root",factory:()=>Ne(ih,z.Optional|z.SkipSelf)||wS()});var Vx=new F("PlatformDestroyListeners"),Lx=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=xA(i?.ngZone,xS({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=iS(r.moduleType,this.injector,_S(()=>o)),a=s.injector.get(Sn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{ic(this._modules,s),c.unsubscribe()})}),gS(a,o,()=>{let c=s.injector.get(kx);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(ih,vc);return YA(u||vc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=Fx({},i);return fS(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Gc);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new K(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Vx,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(T(Nr))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Vo=null,jx=new F("AllowMultipleToken");function ES(t){if(Vo&&!Vo.get(jx,!1))throw new K(400,!1);hS(),Vo=t;let e=t.get(Lx);return CS(t),e}function oh(t,e,n=[]){let r=`Platform: ${e}`,i=new F(r);return(o=[])=>{let s=Bx();if(!s||s.injector.get(jx,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):ES(bS(a,r))}return IS(i)}}function bS(t=[],e){return Nr.create({name:e,providers:[{provide:Sc,useValue:"platform"},{provide:Vx,useValue:new Set([()=>Vo=null])},...t]})}function IS(t){let e=Bx();if(!e)throw new K(401,!1);return e}function Bx(){return Vo?.get(Lx)??null}function CS(t){t.get(Vf,null)?.forEach(n=>n())}function sh(){return!1}var Ux=oh(null,"core",[]),$x=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(T(Gc))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})();var ch=null;function Wc(){return ch}function qx(t){ch||(ch=t)}var qc=class{},Yn=new F("DocumentToken");function zx(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ah=/\s+/,Hx=[],Kc=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Hx,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(ah):Hx}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(ah):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(ah).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Oe(rs),Oe(Rc))},e.\u0275dir=Ic({type:e,selectors:[["","ngClass",""]],inputs:{klass:[An.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Wx=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new uh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Gx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Gx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Oe(Jf),Oe(eh))},e.\u0275dir=Ic({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),uh=class{constructor(){this.$implicit=null,this.ngIf=null}};function Gx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}var Kx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})(),Qx="browser",AS="server";function Rr(t){return t===AS}var zc=class{};var hh=class extends qc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ph=class t extends hh{static makeCurrent(){qx(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=MS();return n==null?null:PS(n)}resetBaseElement(){ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zx(document.cookie,e)}},ss=null;function MS(){return ss=ss||document.querySelector("base"),ss?ss.getAttribute("href"):null}function PS(t){return new URL(t,document.baseURI).pathname}var gh=class{addToWindow(e){_t.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new K(5103,!1);return o},_t.getAllAngularTestabilities=()=>e.getAllTestabilities(),_t.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=_t.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Wc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},NS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),mh=new F("EventManagerPlugins"),Jx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new K(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(T(mh),T(ie))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Qc=class{constructor(e){this._doc=e}},dh="ng-app-id",ev=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${dh}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(dh),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(dh,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(T(Yn),T(Mc),T(Lf,8),T(Dt))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),fh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yh=/%COMP%/g,tv="%COMP%",OS=`_nghost-${tv}`,RS=`_ngcontent-${tv}`,kS=!0,FS=new F("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>kS});function VS(t){return RS.replace(yh,t)}function LS(t){return OS.replace(yh,t)}function nv(t,e){return e.map(n=>n.replace(yh,t))}var Yx=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Rr(c),this.defaultRenderer=new as(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===on.ShadowDom&&(i=Et(rt({},i),{encapsulation:on.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Yc?o.applyToHost(r):o instanceof cs&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case on.Emulated:s=new Yc(u,l,i,this.appId,d,a,c,f);break;case on.ShadowDom:return new _h(u,l,r,i,a,c,this.nonce,f);default:s=new cs(u,l,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(T(Jx),T(ev),T(Mc),T(FS),T(Yn),T(Dt),T(ie),T(Lf))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),as=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(fh[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Zx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Zx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=fh[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=fh[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Or.DashCase|Or.Important)?e.style.setProperty(n,r,i&Or.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Or.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Wc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Zx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _h=class extends as{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=nv(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cs=class extends as{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?nv(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Yc=class extends cs{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=VS(u),this.hostAttr=LS(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},jS=(()=>{let e=class e extends Qc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(T(Yn))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Xx=["alt","control","meta","shift"],BS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},US={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},$S=(()=>{let e=class e extends Qc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wc().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Xx.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=BS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Xx.forEach(a=>{if(a!==o){let c=US[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(T(Yn))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})();function HS(){ph.makeCurrent()}function GS(){return new Sn}function qS(){return $y(document),document}var zS=[{provide:Dt,useValue:Qx},{provide:Vf,useValue:HS,multi:!0},{provide:Yn,useFactory:qS,deps:[]}],rv=oh(Ux,"browser",zS),WS=new F(""),KS=[{provide:os,useClass:gh,deps:[]},{provide:nh,useClass:$c,deps:[ie,Hc,os]},{provide:$c,useClass:$c,deps:[ie,Hc,os]}],QS=[{provide:Sc,useValue:"root"},{provide:Sn,useFactory:GS,deps:[]},{provide:mh,useClass:jS,multi:!0,deps:[Yn,ie,Dt]},{provide:mh,useClass:$S,multi:!0,deps:[Yn]},Yx,ev,Jx,{provide:Zo,useExisting:Yx},{provide:zc,useClass:NS,deps:[]},[]],iv=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Mc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(T(WS,12))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({providers:[...QS,...KS],imports:[Kx,$x]});let t=e;return t})();var ZS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Z3=Et(rt({},ZS),{"[class.ng-submitted]":"isSubmitted"});var XS=new F("CallSetDisabledState",{providedIn:"root",factory:()=>ov}),ov="always";var JS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})();var eM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({imports:[JS]});let t=e;return t})();var sv=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:XS,useValue:r.callSetDisabledState??ov}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({imports:[eM]});let t=e;return t})();var tM="firebase",nM="10.7.2";Gn(tM,nM,"app");var Mi=new Wn("ANGULARFIRE2_VERSION");var rM=(t,e)=>{let n=e?[e]:M_(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},kr=class{constructor(){return rM(iM)}},iM="app-check";function xh(){}var Zc=class{zone;delegate;constructor(e,n=gd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},vh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xh,{},xh,xh)),n.pipe(wd({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xc=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Zc(Zone.current)),this.insideAngular=n.run(()=>new Zc(Zone.current,Mo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(T(ie))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oM(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function gt(t){return sM(oM())(t)}function sM(t){return function(n){return n=n.lift(new vh(t.ngZone)),n.pipe(Ft(t.outsideAngular),Ct(t.insideAngular))}}var uM=new Map,lM={activated:!1,tokenObservers:[]},dM={initialized:!1,enabled:!1};function Gt(t){return uM.get(t)||Object.assign({},lM)}function fv(){return dM}var fM="https://content-firebaseappcheck.googleapis.com/v1";var hM="exchangeDebugToken",cv={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},X5=24*60*60*1e3;var Eh=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return m(this,null,function*(){this.stop();try{this.pending=new Jl,this.pending.promise.catch(n=>{}),yield pM(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Jl,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function pM(t){return new Promise(e=>{setTimeout(e,t)})}var gM={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Zn=new A_("appCheck","AppCheck",gM);function hv(t){if(!Gt(t).activated)throw Zn.create("use-before-activation",{appName:t.name})}function pv(r,i){return m(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(h){throw Zn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw Zn.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(h){throw Zn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Zn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,f=Date.now();return{token:u.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function gv(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${fM}/projects/${n}/apps/${r}:${hM}?key=${i}`,body:{debug_token:e}}}var mM="firebase-app-check-database",_M=1,bh="firebase-app-check-store";var Jc=null;function yM(){return Jc||(Jc=new Promise((t,e)=>{try{let n=indexedDB.open(mM,_M);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Zn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(bh,{keyPath:"compositeKey"})}}}catch(n){e(Zn.create("storage-open",{originalErrorMessage:n?.message}))}}),Jc)}function xM(t,e){return vM(wM(t),e)}function vM(t,e){return m(this,null,function*(){let r=(yield yM()).transaction(bh,"readwrite"),o=r.objectStore(bh).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Zn.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function wM(t){return`${t.options.appId}-${t.name}`}var Ih=new Ca("@firebase/app-check");function wh(t,e){return Ia()?xM(t,e).catch(n=>{Ih.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function mv(){return fv().enabled}function _v(){return m(this,null,function*(){let t=fv();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var EM={error:"UNKNOWN_ERROR"};function bM(t){return C_.encodeString(JSON.stringify(t),!1)}function Ch(t,e=!1){return m(this,null,function*(){let n=t.app;hv(n);let r=Gt(n),i=r.token,o;if(i&&!us(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(us(c)?i=c:yield wh(n,void 0))}if(!e&&i&&us(i))return{token:i.token};let s=!1;if(mv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pv(gv(n,yield _v()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield wh(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Gt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ih.warn(c.message):Ih.error(c),o=c}let a;return i?o?us(i)?a={token:i.token,internalError:o}:a=lv(o):(a={token:i.token},r.token=i,yield wh(n,i)):a=lv(o),s&&TM(n,a),a})}function IM(t){return m(this,null,function*(){let e=t.app;hv(e);let{provider:n}=Gt(e);if(mv()){let r=yield _v(),{token:i}=yield pv(gv(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function CM(t,e,n,r){let{app:i}=t,o=Gt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&us(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),uv(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uv(t))}function yv(t,e){let n=Gt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function uv(t){let{app:e}=t,n=Gt(e),r=n.tokenRefresher;r||(r=DM(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function DM(t){let{app:e}=t;return new Eh(()=>m(this,null,function*(){let n=Gt(e),r;if(n.token?r=yield Ch(t,!0):r=yield Ch(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Gt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cv.RETRIAL_MIN_WAIT,cv.RETRIAL_MAX_WAIT)}function TM(t,e){let n=Gt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function us(t){return t.expireTimeMillis-Date.now()>0}function lv(t){return{token:bM(EM),error:t}}var Dh=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Gt(this.app);for(let n of e)yv(this.app,n.next);return Promise.resolve()}};function AM(t,e){return new Dh(t,e)}function SM(t){return{getToken:e=>Ch(t,e),getLimitedUseToken:()=>IM(t),addTokenListener:e=>CM(t,"INTERNAL",e),removeTokenListener:e=>yv(t.app,e)}}var MM="@firebase/app-check",PM="0.8.1";var NM="app-check",dv="app-check-internal";function OM(){Do(new xr(NM,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return AM(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(dv).initialize()})),Do(new xr(dv,t=>{let e=t.getProvider("app-check").getImmediate();return SM(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(MM,PM)}OM();var RM=["localhost","0.0.0.0","127.0.0.1"],l6=typeof window<"u"&&RM.includes(window.location.hostname);var kM="firebase",FM="10.7.2";dt.registerVersion(kM,FM,"app-compat");var VM=["ngOnDestroy"],wv=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(VM.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var eu=class{constructor(e){return e}},Pi=new F("angularfire2.app.options"),Ni=new F("angularfire2.app.name");function ls(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=dt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>dt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;LM("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new eu(s)}var LM=(t,...e)=>{sh()&&typeof console<"u"&&console[t](...e)},jM={provide:eu,useFactory:ls,deps:[Pi,ie,[new kf,Ni]]},Ev=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Pi,useValue:n},{provide:Ni,useValue:r}]}}constructor(n){dt.registerVersion("angularfire",Mi.full,"core"),dt.registerVersion("angularfire",Mi.full,"app-compat"),dt.registerVersion("angular",Ox.full,n.toString())}static \u0275fac=function(r){return new(r||t)(T(Dt))};static \u0275mod=Qe({type:t});static \u0275inj=Ke({providers:[jM]})}return t})();function tu(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return BM(i,s)||(vv("error",`${e} was already initialized on the ${n} Firebase App with different settings.${UM?" You may need to reload as Firebase is not HMR aware.":""}`),vv("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function BM(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var UM=typeof module<"u"&&!!module.hot,vv=(t,...e)=>{sh()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Th=new F("angularfire2.auth.use-emulator"),Ah=new F("angularfire2.auth.settings"),Sh=new F("angularfire2.auth.tenant-id"),Mh=new F("angularfire2.auth.langugage-code"),Ph=new F("angularfire2.auth.use-device-language"),Nh=new F("angularfire.auth.persistence"),Oh=(t,e,n,r,i,o,s,a)=>tu(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),bv=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,f,h){let y=new bt,_=Tn(void 0).pipe(Ct(s.outsideAngular),Vt(()=>o.runOutsideAngular(()=>import("./chunk-M273J2F4.js"))),Ce(()=>ls(n,o,r)),Ce(x=>Oh(x,o,a,u,l,d,c,f)),Ya({bufferSize:1,refCount:!1}));if(Rr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tn(null);else{_.pipe(Qa()).subscribe();let x=_.pipe(Vt(D=>D.getRedirectResult().then(N=>N,()=>null)),gt,Ya({bufferSize:1,refCount:!1})),b=_.pipe(Vt(D=>new ue(N=>({unsubscribe:o.runOutsideAngular(()=>D.onAuthStateChanged(R=>N.next(R),R=>N.error(R),()=>N.complete()))})))),M=_.pipe(Vt(D=>new ue(N=>({unsubscribe:o.runOutsideAngular(()=>D.onIdTokenChanged(R=>N.next(R),R=>N.error(R),()=>N.complete()))}))));this.authState=x.pipe(Za(b),Ft(s.outsideAngular),Ct(s.insideAngular)),this.user=x.pipe(Za(M),Ft(s.outsideAngular),Ct(s.insideAngular)),this.idToken=this.user.pipe(Vt(D=>D?it(D.getIdToken()):Tn(null))),this.idTokenResult=this.user.pipe(Vt(D=>D?it(D.getIdTokenResult()):Tn(null))),this.credential=yd(x,y,this.authState.pipe(zn(D=>!D))).pipe(Ce(D=>D?.user?D:null),Ft(s.outsideAngular),Ct(s.insideAngular))}return wv(this,_,o,{spy:{apply:(x,b,M)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&M.then(D=>y.next(D))}}})}static \u0275fac=function(r){return new(r||t)(T(Pi),T(Ni,8),T(Dt),T(ie),T(Xc),T(Th,8),T(Ah,8),T(Sh,8),T(Mh,8),T(Ph,8),T(Nh,8),T(kr,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var HM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zt={},I,tp=tp||{},V=HM||self;function gu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Is(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function GM(t){return Object.prototype.hasOwnProperty.call(t,Rh)&&t[Rh]||(t[Rh]=++qM)}var Rh="closure_uid_"+(1e9*Math.random()>>>0),qM=0;function zM(t,e,n){return t.call.apply(t.bind,arguments)}function WM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Je(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Je=zM:Je=WM,Je.apply(null,arguments)}function nu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Fe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Xn(){this.s=this.s,this.o=this.o}var KM=0;Xn.prototype.s=!1;Xn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),KM!=0)&&GM(this)};Xn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fv=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function np(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Iv(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(gu(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var QM=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};V.addEventListener("test",n,e),V.removeEventListener("test",n,e)}catch{}return t}();function ms(t){return/^[\s\xa0]*$/.test(t)}function mu(){var t=V.navigator;return t&&(t=t.userAgent)?t:""}function fn(t){return mu().indexOf(t)!=-1}function rp(t){return rp[" "](t),t}rp[" "]=function(){};function YM(t,e){var n=LP;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var ZM=fn("Opera"),Fi=fn("Trident")||fn("MSIE"),Vv=fn("Edge"),jh=Vv||Fi,Lv=fn("Gecko")&&!(mu().toLowerCase().indexOf("webkit")!=-1&&!fn("Edge"))&&!(fn("Trident")||fn("MSIE"))&&!fn("Edge"),XM=mu().toLowerCase().indexOf("webkit")!=-1&&!fn("Edge");function jv(){var t=V.document;return t?t.documentMode:void 0}var Bh;e:{if(ru="",iu=function(){var t=mu();if(Lv)return/rv:([^\);]+)(\)|;)/.exec(t);if(Vv)return/Edge\/([\d\.]+)/.exec(t);if(Fi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(XM)return/WebKit\/(\S+)/.exec(t);if(ZM)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),iu&&(ru=iu?iu[1]:""),Fi&&(ou=jv(),ou!=null&&ou>parseFloat(ru))){Bh=String(ou);break e}Bh=ru}var ru,iu,ou,Uh;V.document&&Fi?(kh=jv(),Uh=kh||parseInt(Bh,10)||void 0):Uh=void 0;var kh,JM=Uh;function _s(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Lv){e:{try{rp(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:eP[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&_s.$.h.call(this)}}Fe(_s,et);var eP={2:"touch",3:"pen",4:"mouse"};_s.prototype.h=function(){_s.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),tP=0;function nP(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++tP,this.fa=this.ia=!1}function _u(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ip(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function rP(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Bv(t){let e={};for(let n in t)e[n]=t[n];return e}var Cv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Uv(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<Cv.length;o++)n=Cv[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yu(t){this.src=t,this.g={},this.h=0}yu.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Hh(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new nP(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function $h(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Fv(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(_u(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hh(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var op="closure_lm_"+(1e6*Math.random()|0),Fh={};function $v(t,e,n,r,i){if(r&&r.once)return Gv(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$v(t,e[o],n,r,i);return null}return n=cp(n),t&&t[Cs]?t.O(e,n,Is(r)?!!r.capture:!!r,i):Hv(t,e,n,!1,r,i)}function Hv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Is(i)?!!i.capture:!!i,a=ap(t);if(a||(t[op]=a=new yu(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=iP(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)QM||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(zv(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function iP(){function t(n){return e.call(t.src,t.listener,n)}let e=oP;return t}function Gv(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Gv(t,e[o],n,r,i);return null}return n=cp(n),t&&t[Cs]?t.P(e,n,Is(r)?!!r.capture:!!r,i):Hv(t,e,n,!0,r,i)}function qv(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)qv(t,e[o],n,r,i);else r=Is(r)?!!r.capture:!!r,n=cp(n),t&&t[Cs]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Hh(o,n,r,i),-1<n&&(_u(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=ap(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hh(e,n,r,i)),(n=-1<t?e[t]:null)&&sp(n))}function sp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cs])$h(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ap(e))?($h(n,t),n.h==0&&(n.src=null,e[op]=null)):_u(t)}}}function zv(t){return t in Fh?Fh[t]:Fh[t]="on"+t}function oP(t,e){if(t.fa)t=!0;else{e=new _s(e,this);var n=t.listener,r=t.la||t.src;t.ia&&sp(t),t=n.call(r,e)}return t}function ap(t){return t=t[op],t instanceof yu?t:null}var Vh="__closure_events_fn_"+(1e9*Math.random()>>>0);function cp(t){return typeof t=="function"?t:(t[Vh]||(t[Vh]=function(e){return t.handleEvent(e)}),t[Vh])}function ke(){Xn.call(this),this.i=new yu(this),this.S=this,this.J=null}Fe(ke,Xn);ke.prototype[Cs]=!0;ke.prototype.removeEventListener=function(t,e,n,r){qv(this,t,e,n,r)};function $e(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new et(e,t);else if(e instanceof et)e.target=e.target||t;else{var i=e;e=new et(r,t),Uv(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=su(s,r,!0,e)&&i}if(s=e.g=t,i=su(s,r,!0,e)&&i,i=su(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=su(s,r,!1,e)&&i}ke.prototype.N=function(){if(ke.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_u(n[r]);delete t.g[e],t.h--}}this.J=null};ke.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ke.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function su(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&$h(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var up=V.JSON.stringify,Gh=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function sP(){var t=lp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var qh=class{constructor(){this.h=this.g=null}add(e,n){let r=Wv.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Wv=new Gh(()=>new zh,t=>t.reset()),zh=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function aP(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function cP(t){V.setTimeout(()=>{throw t},0)}var ys,xs=!1,lp=new qh,Kv=()=>{let t=V.Promise.resolve(void 0);ys=()=>{t.then(uP)}},uP=()=>{for(var t;t=sP();){try{t.h.call(t.g)}catch(n){cP(n)}var e=Wv;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xs=!1};function xu(t,e){ke.call(this),this.h=t||1,this.g=e||V,this.j=Je(this.qb,this),this.l=Date.now()}Fe(xu,ke);I=xu.prototype;I.ga=!1;I.T=null;I.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$e(this,"tick"),this.ga&&(dp(this),this.start()))}};I.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function dp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}I.N=function(){xu.$.N.call(this),dp(this),delete this.g};function fp(t,e,n){if(typeof t=="function")n&&(t=Je(t,n));else if(t&&typeof t.handleEvent=="function")t=Je(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function Qv(t){t.g=fp(()=>{t.g=null,t.i&&(t.i=!1,Qv(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Wh=class extends Xn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qv(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function vs(t){Xn.call(this),this.h=t,this.g={}}Fe(vs,Xn);var Dv=[];function Yv(t,e,n,r){Array.isArray(n)||(n&&(Dv[0]=n.toString()),n=Dv);for(var i=0;i<n.length;i++){var o=$v(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Zv(t){ip(t.g,function(e,n){this.g.hasOwnProperty(n)&&sp(e)},t),t.g={}}vs.prototype.N=function(){vs.$.N.call(this),Zv(this)};vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vu(){this.g=!0}vu.prototype.Ea=function(){this.g=!1};function lP(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function dP(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ri(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hP(t,n)+(r?" "+r:"")})}function fP(t,e){t.info(function(){return"TIMEOUT: "+e})}vu.prototype.info=function(){};function hP(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return up(n)}catch{return e}}var jr={},Tv=null;function wu(){return Tv=Tv||new ke}jr.Ta="serverreachability";function Xv(t){et.call(this,jr.Ta,t)}Fe(Xv,et);function ws(t){let e=wu();$e(e,new Xv(e))}jr.STAT_EVENT="statevent";function Jv(t,e){et.call(this,jr.STAT_EVENT,t),this.stat=e}Fe(Jv,et);function at(t){let e=wu();$e(e,new Jv(e,t))}jr.Ua="timingevent";function ew(t,e){et.call(this,jr.Ua,t),this.size=e}Fe(ew,et);function Ds(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var Eu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hp(){}hp.prototype.h=null;function Av(t){return t.h||(t.h=t.i())}function nw(){}var Ts={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pp(){et.call(this,"d")}Fe(pp,et);function gp(){et.call(this,"c")}Fe(gp,et);var Kh;function bu(){}Fe(bu,hp);bu.prototype.g=function(){return new XMLHttpRequest};bu.prototype.i=function(){return{}};Kh=new bu;function As(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new vs(this),this.P=pP,t=jh?125:void 0,this.V=new xu(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rw}function rw(){this.i=null,this.g="",this.h=!1}var pP=45e3,iw={},Qh={};I=As.prototype;I.setTimeout=function(t){this.P=t};function Yh(t,e,n){t.L=1,t.A=Cu(Rn(e)),t.u=n,t.S=!0,ow(t,null)}function ow(t,e){t.G=Date.now(),Ss(t),t.B=Rn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),hw(n.i,"t",r),t.o=0,n=t.l.J,t.h=new rw,t.g=Rw(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Wh(Je(t.Pa,t,t.g),t.O)),Yv(t.U,t.g,"readystatechange",t.nb),e=t.I?Bv(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ws(),lP(t.j,t.v,t.B,t.m,t.W,t.u)}I.nb=function(t){t=t.target;let e=this.M;e&&hn(t)==3?e.l():this.Pa(t)};I.Pa=function(t){try{if(t==this.g)e:{let l=hn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||jh||this.g&&(this.h.h||this.g.ja()||Nv(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ws(3):ws(2)),Iu(this);var n=this.g.da();this.ca=n;t:if(sw(this)){var r=Nv(this.g);t="";var i=r.length,o=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),gs(this);var s="";break t}this.h.i=new V.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,dP(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ms(a)){var u=a;break t}}u=null}if(n=u)Ri(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,n);else{this.i=!1,this.s=3,at(12),Fr(this),gs(this);break e}}this.S?(aw(this,l,s),jh&&this.i&&l==3&&(Yv(this.U,this.V,"tick",this.mb),this.V.start())):(Ri(this.j,this.m,s,null),Zh(this,s)),l==4&&Fr(this),this.i&&!this.J&&(l==4?Mw(this.l,this):(this.i=!1,Ss(this)))}else kP(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Fr(this),gs(this)}}}catch{}finally{}};function sw(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function aw(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=gP(t,n),i==Qh){e==4&&(t.s=4,at(14),r=!1),Ri(t.j,t.m,null,"[Incomplete Response]");break}else if(i==iw){t.s=4,at(15),Ri(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ri(t.j,t.m,i,null),Zh(t,i);sw(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,at(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wp(e),e.M=!0,at(11))):(Ri(t.j,t.m,n,"[Invalid Chunked Response]"),Fr(t),gs(t))}I.mb=function(){if(this.g){var t=hn(this.g),e=this.g.ja();this.o<e.length&&(Iu(this),aw(this,t,e),this.i&&t!=4&&Ss(this))}};function gP(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Qh:(n=Number(e.substring(n,r)),isNaN(n)?iw:(r+=1,r+n>e.length?Qh:(e=e.slice(r,r+n),t.o=r+n,e)))}I.cancel=function(){this.J=!0,Fr(this)};function Ss(t){t.Y=Date.now()+t.P,cw(t,t.P)}function cw(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ds(Je(t.lb,t),e)}function Iu(t){t.C&&(V.clearTimeout(t.C),t.C=null)}I.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(fP(this.j,this.B),this.L!=2&&(ws(),at(17)),Fr(this),this.s=2,gs(this)):cw(this,this.Y-t)};function gs(t){t.l.H==0||t.J||Mw(t.l,t)}function Fr(t){Iu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,dp(t.V),Zv(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Zh(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Xh(n.i,t))){if(!t.K&&Xh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)du(n),Au(n);else break e;vp(n),at(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ds(Je(n.ib,n),6e3));if(1>=mw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vr(n,11)}else if((t.K||n.g==t)&&du(n),!ms(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let h=t.g;if(h){let y=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=r.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(mp(o,o.h),o.h=null))}if(r.F){let _=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,le(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=Ow(r,r.J?r.pa:null,r.Y),s.K){_w(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Iu(a),Ss(a)),r.g=s}else Aw(r);0<n.j.length&&Su(n)}else u[0]!="stop"&&u[0]!="close"||Vr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Vr(n,7):xp(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ws(4)}catch{}}function mP(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function _P(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function uw(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=_P(t),r=mP(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var lw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yP(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Lr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Lr){this.h=t.h,uu(this,t.j),this.s=t.s,this.g=t.g,lu(this,t.m),this.l=t.l;var e=t.i,n=new Es;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Sv(this,n),this.o=t.o}else t&&(e=String(t).match(lw))?(this.h=!1,uu(this,e[1]||"",!0),this.s=hs(e[2]||""),this.g=hs(e[3]||"",!0),lu(this,e[4]),this.l=hs(e[5]||"",!0),Sv(this,e[6]||"",!0),this.o=hs(e[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}Lr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ps(e,Mv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ps(e,Mv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ps(n,n.charAt(0)=="/"?wP:vP,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ps(n,bP)),t.join("")};function Rn(t){return new Lr(t)}function uu(t,e,n){t.j=n?hs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Sv(t,e,n){e instanceof Es?(t.i=e,IP(t.i,t.h)):(n||(e=ps(e,EP)),t.i=new Es(e,t.h))}function le(t,e,n){t.i.set(e,n)}function Cu(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function hs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ps(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,xP),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xP(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Mv=/[#\/\?@]/g,vP=/[#\?:]/g,wP=/[#\?]/g,EP=/[#\?@]/g,bP=/#/g;function Es(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jn(t){t.g||(t.g=new Map,t.h=0,t.i&&yP(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}I=Es.prototype;I.add=function(t,e){Jn(this),this.i=null,t=Vi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function dw(t,e){Jn(t),e=Vi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fw(t,e){return Jn(t),e=Vi(t,e),t.g.has(e)}I.forEach=function(t,e){Jn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};I.ta=function(){Jn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};I.Z=function(t){Jn(this);let e=[];if(typeof t=="string")fw(this,t)&&(e=e.concat(this.g.get(Vi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};I.set=function(t,e){return Jn(this),this.i=null,t=Vi(this,t),fw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};I.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function hw(t,e,n){dw(t,e),0<n.length&&(t.i=null,t.g.set(Vi(t,e),np(n)),t.h+=n.length)}I.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Vi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IP(t,e){e&&!t.j&&(Jn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(dw(this,r),hw(this,i,n))},t)),t.j=e}var CP=class{constructor(t,e){this.g=t,this.map=e}};function pw(t){this.l=t||DP,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ka&&V.g.Ka()&&V.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var DP=10;function gw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function mw(t){return t.h?1:t.g?t.g.size:0}function Xh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function mp(t,e){t.g?t.g.add(e):t.h=e}function _w(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}pw.prototype.cancel=function(){if(this.i=yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function yw(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return np(t.i)}var TP=class{stringify(t){return V.JSON.stringify(t,void 0)}parse(t){return V.JSON.parse(t,void 0)}};function AP(){this.g=new TP}function SP(t,e,n){let r=n||"";try{uw(t,function(i,o){let s=i;Is(i)&&(s=up(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function MP(t,e){let n=new vu;if(V.Image){let r=new Image;r.onload=nu(au,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nu(au,n,r,"TestLoadImage: error",!1,e),r.onabort=nu(au,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nu(au,n,r,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function au(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ms(t){this.l=t.ec||null,this.j=t.ob||!1}Fe(Ms,hp);Ms.prototype.g=function(){return new Du(this.l,this.j)};Ms.prototype.i=function(t){return function(){return t}}({});function Du(t,e){ke.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=_p,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fe(Du,ke);var _p=0;I=Du.prototype;I.open=function(t,e){if(this.readyState!=_p)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bs(this)};I.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||V).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};I.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=_p};I.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xw(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function xw(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}I.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ps(this):bs(this),this.readyState==3&&xw(this)}};I.Za=function(t){this.g&&(this.response=this.responseText=t,Ps(this))};I.Ya=function(t){this.g&&(this.response=t,Ps(this))};I.ka=function(){this.g&&Ps(this)};function Ps(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bs(t)}I.setRequestHeader=function(t,e){this.v.append(t,e)};I.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};I.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var PP=V.JSON.parse;function xe(t){ke.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vw,this.L=this.M=!1}Fe(xe,ke);var vw="",NP=/^https?$/i,OP=["POST","PUT"];I=xe.prototype;I.Oa=function(t){this.M=t};I.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kh.g(),this.C=this.u?Av(this.u):Av(Kh),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){Pv(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=V.FormData&&t instanceof V.FormData,!(0<=Fv(OP,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bw(this),0<this.B&&((this.L=RP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=fp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Pv(this,o)}};function RP(t){return Fi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}I.ua=function(){typeof tp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$e(this,"timeout"),this.abort(8))};function Pv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ww(t),Tu(t)}function ww(t){t.F||(t.F=!0,$e(t,"complete"),$e(t,"error"))}I.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$e(this,"complete"),$e(this,"abort"),Tu(this))};I.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tu(this,!0)),xe.$.N.call(this)};I.La=function(){this.s||(this.G||this.v||this.l?Ew(this):this.kb())};I.kb=function(){Ew(this)};function Ew(t){if(t.h&&typeof tp<"u"&&(!t.C[1]||hn(t)!=4||t.da()!=2)){if(t.v&&hn(t)==4)fp(t.La,0,t);else if($e(t,"readystatechange"),hn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(lw)[1]||null;!i&&V.self&&V.self.location&&(i=V.self.location.protocol.slice(0,-1)),r=!NP.test(i?i.toLowerCase():"")}n=r}if(n)$e(t,"complete"),$e(t,"success");else{t.m=6;try{var o=2<hn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",ww(t)}}finally{Tu(t)}}}}function Tu(t,e){if(t.g){bw(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||$e(t,"ready");try{n.onreadystatechange=r}catch{}}}function bw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}I.isActive=function(){return!!this.g};function hn(t){return t.g?t.g.readyState:0}I.da=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}};I.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};I.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),PP(e)}};function Nv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case vw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function kP(t){let e={};t=(t.g&&2<=hn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ms(t[r]))continue;var n=aP(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}rP(e,function(r){return r.join(", ")})}I.Ia=function(){return this.m};I.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Iw(t){let e="";return ip(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function yp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Iw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):le(t,e,n))}function ds(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cw(t){this.Ga=0,this.j=[],this.l=new vu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ds("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ds("baseRetryDelayMs",5e3,t),this.hb=ds("retryDelaySeedMs",1e4,t),this.eb=ds("forwardChannelMaxRetries",2,t),this.xa=ds("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new pw(t&&t.concurrentRequestLimit),this.Ja=new AP,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}I=Cw.prototype;I.ra=8;I.H=1;function xp(t){if(Dw(t),t.H==3){var e=t.W++,n=Rn(t.I);if(le(n,"SID",t.K),le(n,"RID",e),le(n,"TYPE","terminate"),Ns(t,n),e=new As(t,t.l,e),e.L=2,e.A=Cu(Rn(n)),n=!1,V.navigator&&V.navigator.sendBeacon)try{n=V.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&V.Image&&(new Image().src=e.A,n=!0),n||(e.g=Rw(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ss(e)}Nw(t)}function Au(t){t.g&&(wp(t),t.g.cancel(),t.g=null)}function Dw(t){Au(t),t.u&&(V.clearTimeout(t.u),t.u=null),du(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function Su(t){if(!gw(t.i)&&!t.m){t.m=!0;var e=t.Na;ys||Kv(),xs||(ys(),xs=!0),lp.add(e,t),t.C=0}}function FP(t,e){return mw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ds(Je(t.Na,t,e),Pw(t,t.C)),t.C++,!0)}I.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new As(this,this.l,t),o=this.s;if(this.U&&(o?(o=Bv(o),Uv(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Tw(this,i,e),n=Rn(this.I),le(n,"RID",t),le(n,"CVER",22),this.F&&le(n,"X-HTTP-Session-Id",this.F),Ns(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Iw(o)))+"&"+e:this.o&&yp(n,this.o,o)),mp(this.i,i),this.bb&&le(n,"TYPE","init"),this.P?(le(n,"$req",e),le(n,"SID","null"),i.aa=!0,Yh(i,n,null)):Yh(i,n,e),this.H=2}}else this.H==3&&(t?Ov(this,t):this.j.length==0||gw(this.i)||Ov(this))};function Ov(t,e){var n;e?n=e.m:n=t.W++;let r=Rn(t.I);le(r,"SID",t.K),le(r,"RID",n),le(r,"AID",t.V),Ns(t,r),t.o&&t.s&&yp(r,t.o,t.s),n=new As(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Tw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),mp(t.i,n),Yh(n,r,e)}function Ns(t,e){t.na&&ip(t.na,function(n,r){le(e,r,n)}),t.h&&uw({},function(n,r){le(e,r,n)})}function Tw(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Je(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{SP(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Aw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ys||Kv(),xs||(ys(),xs=!0),lp.add(e,t),t.A=0}}function vp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ds(Je(t.Ma,t),Pw(t,t.A)),t.A++,!0)}I.Ma=function(){if(this.u=null,Sw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ds(Je(this.jb,this),t)}};I.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,at(10),Au(this),Sw(this))};function wp(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function Sw(t){t.g=new As(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rn(t.wa);le(e,"RID","rpc"),le(e,"SID",t.K),le(e,"AID",t.V),le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&le(e,"TO",t.qa),le(e,"TYPE","xmlhttp"),Ns(t,e),t.o&&t.s&&yp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Cu(Rn(e)),n.u=null,n.S=!0,ow(n,t)}I.ib=function(){this.v!=null&&(this.v=null,Au(this),vp(this),at(19))};function du(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function Mw(t,e){var n=null;if(t.g==e){du(t),wp(t),t.g=null;var r=2}else if(Xh(t.i,e))n=e.F,_w(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=wu(),$e(r,new ew(r,n)),Su(t)}else Aw(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&FP(t,e)||r==2&&vp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Vr(t,5);break;case 4:Vr(t,10);break;case 3:Vr(t,6);break;default:Vr(t,2)}}}function Pw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Je(t.pb,t);n||(n=new Lr("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||uu(n,"https"),Cu(n)),MP(n.toString(),r)}else at(2);t.H=0,t.h&&t.h.za(e),Nw(t),Dw(t)}I.pb=function(t){t?(this.l.info("Successfully pinged google.com"),at(2)):(this.l.info("Failed to ping google.com"),at(1))};function Nw(t){if(t.H=0,t.ma=[],t.h){let e=yw(t.i);(e.length!=0||t.j.length!=0)&&(Iv(t.ma,e),Iv(t.ma,t.j),t.i.i.length=0,np(t.j),t.j.length=0),t.h.ya()}}function Ow(t,e,n){var r=n instanceof Lr?Rn(n):new Lr(n);if(r.g!="")e&&(r.g=e+"."+r.g),lu(r,r.m);else{var i=V.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Lr(null);r&&uu(o,r),e&&(o.g=e),i&&lu(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&le(r,n,e),le(r,"VER",t.ra),Ns(t,r),r}function Rw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new xe(new Ms({ob:n})):new xe(t.va),e.Oa(t.J),e}I.isActive=function(){return!!this.h&&this.h.isActive(this)};function kw(){}I=kw.prototype;I.Ba=function(){};I.Aa=function(){};I.za=function(){};I.ya=function(){};I.isActive=function(){return!0};I.Va=function(){};function fu(){if(Fi&&!(10<=Number(JM)))throw Error("Environmental error: no available transport.")}fu.prototype.g=function(t,e){return new yt(t,e)};function yt(t,e){ke.call(this),this.g=new Cw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ms(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ms(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Li(this)}Fe(yt,ke);yt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;at(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ow(t,null,t.Y),Su(t)};yt.prototype.close=function(){xp(this.g)};yt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=up(t),t=n);e.j.push(new CP(e.fb++,t)),e.H==3&&Su(e)};yt.prototype.N=function(){this.g.h=null,delete this.j,xp(this.g),delete this.g,yt.$.N.call(this)};function Fw(t){pp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Fe(Fw,pp);function Vw(){gp.call(this),this.status=1}Fe(Vw,gp);function Li(t){this.g=t}Fe(Li,kw);Li.prototype.Ba=function(){$e(this.g,"a")};Li.prototype.Aa=function(t){$e(this.g,new Fw(t))};Li.prototype.za=function(t){$e(this.g,new Vw)};Li.prototype.ya=function(){$e(this.g,"b")};function VP(){this.blockSize=-1}function qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Fe(qt,VP);qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Lh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Lh(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Lh(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Lh(this,r),i=0;break}}this.h=i,this.i+=e};qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ne(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var LP={};function Ep(t){return-128<=t&&128>t?YM(t,function(e){return new ne([e|0],0>e?-1:0)}):new ne([t|0],0>t?-1:0)}function pn(t){if(isNaN(t)||!isFinite(t))return ki;if(0>t)return Ue(pn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Jh;return new ne(e,0)}function Lw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ue(Lw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=pn(Math.pow(e,8)),r=ki,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=pn(Math.pow(e,o)),r=r.R(o).add(pn(s))):(r=r.R(n),r=r.add(pn(s)))}return r}var Jh=4294967296,ki=Ep(0),ep=Ep(1),Rv=Ep(16777216);I=ne.prototype;I.ea=function(){if(Mt(this))return-Ue(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Jh+r)*e,e*=Jh}return t};I.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(On(this))return"0";if(Mt(this))return"-"+Ue(this).toString(t);for(var e=pn(Math.pow(t,6)),n=this,r="";;){var i=pu(n,e).g;n=hu(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,On(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};I.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function On(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Mt(t){return t.h==-1}I.X=function(t){return t=hu(this,t),Mt(t)?-1:On(t)?0:1};function Ue(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ne(n,~t.h).add(ep)}I.abs=function(){return Mt(this)?Ue(this):this};I.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ne(n,n[n.length-1]&-2147483648?-1:0)};function hu(t,e){return t.add(Ue(e))}I.R=function(t){if(On(this)||On(t))return ki;if(Mt(this))return Mt(t)?Ue(this).R(Ue(t)):Ue(Ue(this).R(t));if(Mt(t))return Ue(this.R(Ue(t)));if(0>this.X(Rv)&&0>t.X(Rv))return pn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,cu(n,2*r+2*i),n[2*r+2*i+1]+=o*c,cu(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,cu(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,cu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ne(n,0)};function cu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fs(t,e){this.g=t,this.h=e}function pu(t,e){if(On(e))throw Error("division by zero");if(On(t))return new fs(ki,ki);if(Mt(t))return e=pu(Ue(t),e),new fs(Ue(e.g),Ue(e.h));if(Mt(e))return e=pu(t,Ue(e)),new fs(Ue(e.g),e.h);if(30<t.g.length){if(Mt(t)||Mt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ep,r=e;0>=r.X(t);)n=kv(n),r=kv(r);var i=Oi(n,1),o=Oi(r,1);for(r=Oi(r,2),n=Oi(n,2);!On(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Oi(r,1),n=Oi(n,1)}return e=hu(t,i.R(e)),new fs(i,e)}for(i=ki;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=pn(n),s=o.R(e);Mt(s)||0<s.X(t);)n-=r,o=pn(n),s=o.R(e);On(o)&&(o=ep),i=i.add(o),t=hu(t,s)}return new fs(i,t)}I.gb=function(t){return pu(this,t).h};I.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ne(n,this.h&t.h)};I.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ne(n,this.h|t.h)};I.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ne(n,this.h^t.h)};function kv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ne(n,t.h)}function Oi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ne(i,t.h)}fu.prototype.createWebChannel=fu.prototype.g;yt.prototype.send=yt.prototype.u;yt.prototype.open=yt.prototype.m;yt.prototype.close=yt.prototype.close;Eu.NO_ERROR=0;Eu.TIMEOUT=8;Eu.HTTP_ERROR=6;tw.COMPLETE="complete";nw.EventType=Ts;Ts.OPEN="a";Ts.CLOSE="b";Ts.ERROR="c";Ts.MESSAGE="d";ke.prototype.listen=ke.prototype.O;xe.prototype.listenOnce=xe.prototype.P;xe.prototype.getLastError=xe.prototype.Sa;xe.prototype.getLastErrorCode=xe.prototype.Ia;xe.prototype.getStatus=xe.prototype.da;xe.prototype.getResponseJson=xe.prototype.Wa;xe.prototype.getResponseText=xe.prototype.ja;xe.prototype.send=xe.prototype.ha;xe.prototype.setWithCredentials=xe.prototype.Oa;qt.prototype.digest=qt.prototype.l;qt.prototype.reset=qt.prototype.reset;qt.prototype.update=qt.prototype.j;ne.prototype.add=ne.prototype.add;ne.prototype.multiply=ne.prototype.R;ne.prototype.modulo=ne.prototype.gb;ne.prototype.compare=ne.prototype.X;ne.prototype.toNumber=ne.prototype.ea;ne.prototype.toString=ne.prototype.toString;ne.prototype.getBits=ne.prototype.D;ne.fromNumber=pn;ne.fromString=Lw;var jw=zt.createWebChannelTransport=function(){return new fu},Bw=zt.getStatEventTarget=function(){return wu()},Mu=zt.ErrorCode=Eu,Uw=zt.EventType=tw,$w=zt.Event=jr,bp=zt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},k6=zt.FetchXmlHttpFactory=Ms,Os=zt.WebChannel=nw,Hw=zt.XhrIo=xe,Gw=zt.Md5=qt,Br=zt.Integer=ne;var qw="@firebase/firestore";var Ae=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ae.UNAUTHENTICATED=new Ae(null),Ae.GOOGLE_CREDENTIALS=new Ae("google-credentials-uid"),Ae.FIRST_PARTY=new Ae("first-party-uid"),Ae.MOCK_USER=new Ae("mock-user");var go="10.7.2";var sr=new Ca("@firebase/firestore");function Hi(){return sr.logLevel}function GE(t){sr.setLogLevel(t)}function w(t,...e){if(sr.logLevel<=Zt.DEBUG){let n=e.map(Cm);sr.debug(`Firestore (${go}): ${t}`,...n)}}function Ee(t,...e){if(sr.logLevel<=Zt.ERROR){let n=e.map(Cm);sr.error(`Firestore (${go}): ${t}`,...n)}}function Nt(t,...e){if(sr.logLevel<=Zt.WARN){let n=e.map(Cm);sr.warn(`Firestore (${go}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function A(t="Unexpected state"){let e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw Ee(e),new Error(e)}function S(t,e){t||A()}function qE(t,e){t||A()}function C(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},v=class extends T_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Se=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Uu=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ap=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ae.UNAUTHENTICATED))}shutdown(){}},Sp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Mp=class{constructor(e){this.t=e,this.currentUser=Ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Se;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Se,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>m(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Se)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(S(typeof r.accessToken=="string"),new Uu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return S(e===null||typeof e=="string"),new Ae(e)}},Pp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ae.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Np=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pp(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Op=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rp=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,w("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(S(typeof n.token=="string"),this.R=n.token,new Op(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function jP(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $u=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=jP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function B(t,e){return t<e?-1:t>e?1:0}function Xi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function zE(t){return t+"\0"}var me=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?B(this.nanoseconds,e.nanoseconds):B(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var P=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new me(0,0))}static max(){return new t(new me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&A(),r===void 0?r=e.length-n:r>e.length-n&&A(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Y=class t extends Hu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},BP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=class t extends Hu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return BP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new v(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new v(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new v(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var E=class t{constructor(e){this.path=e}static fromPath(e){return new t(Y.fromString(e))}static fromName(e){return new t(Y.fromString(e).popFirst(5))}static empty(){return new t(Y.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Y.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Y.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Y(e.slice()))}};var Ji=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function kp(t){return t.fields.find(e=>e.kind===2)}function $r(t){return t.fields.filter(e=>e.kind!==2)}Ji.UNKNOWN_ID=-1;var Qi=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var qs=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ot.min())}};function WE(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=P.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Ot(i,E.empty(),e)}function KE(t){return new Ot(t.readTime,t.key,-1)}var Ot=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(P.min(),E.empty(),-1)}static max(){return new t(P.max(),E.empty(),-1)}};function Dm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=E.comparator(t.documentKey,e.documentKey),n!==0?n:B(t.largestBatchId,e.largestBatchId))}var QE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gu=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mr(t){return m(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==QE)throw t;w("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var qu=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Se,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Kr(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Tm(r.target.error);this.V.reject(new Kr(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Kr(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Vp(n)}},Vn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Co())===12.2&&Ee("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),Hr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ia())return!1;if(t.C())return!0;let e=Co(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return m(this,null,function*(){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Kr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new v(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new v(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Kr(e,s))},i.onupgradeneeded=o=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return m(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=qu.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(w("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Fp=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Hr(this.k.delete())}},Kr=class extends v{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function _r(t){return t.name==="IndexedDbTransactionError"}var Vp=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(w("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hr(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),Hr(this.store.add(e))}get(e){return Hr(this.store.get(e)).next(n=>(n===void 0&&(n=null),w("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),Hr(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),Hr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){w("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Tm(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Fp(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Hr(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Tm(r.target.error);n(i)}})}var zw=!1;function Tm(t){let e=Vn.S(Co());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new v("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zw||(zw=!0,setTimeout(()=>{throw r},0)),r}}return t}var Lp=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){w("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{w("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){_r(n)?w("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield mr(n)}yield this.ee(6e4)}))}},jp=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return w("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(w("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=KE(o);Dm(s,r)>0&&(r=s)}),new Ot(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var xt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function pa(t){return t==null}function zs(t){return t===0&&1/t==-1/0}function YE(t){return typeof t=="number"&&Number.isInteger(t)&&!zs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ct(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ww(e)),e=UP(t.get(n),e);return Ww(e)}function UP(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ww(t){return t+""}function gn(t){let e=t.length;if(S(e>=2),e===2)return S(t.charAt(0)===""&&t.charAt(1)===""),Y.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&A(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:A()}o=s+2}return new Y(r)}var Kw=["userId","batchId"];function ku(t,e){return[t,ct(e)]}function ZE(t,e,n){return[t,ct(e),n]}var $P={},HP=["prefixPath","collectionGroup","readTime","documentId"],GP=["prefixPath","collectionGroup","documentId"],qP=["collectionGroup","readTime","prefixPath","documentId"],zP=["canonicalId","targetId"],WP=["targetId","path"],KP=["path","targetId"],QP=["collectionId","parent"],YP=["indexId","uid"],ZP=["uid","sequenceNumber"],XP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JP=["indexId","uid","orderedDocumentKey"],eN=["userId","collectionPath","documentId"],tN=["userId","collectionPath","largestBatchId"],nN=["userId","collectionGroup","largestBatchId"],XE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rN=[...XE,"documentOverlays"],JE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eb=JE,iN=[...eb,"indexConfiguration","indexState","indexEntries"];var Ws=class extends Gu{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Le(t,e){let n=C(t);return Vn.M(n.ae,e)}function Qw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var de=class t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ki(this.root,e,this.comparator,!0)}},Ki=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();let e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(e,n,r,i,o){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var se=class t{constructor(e){this.comparator=e,this.data=new de(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zu(this.data.getIterator())}getIteratorFrom(e){return new zu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ji(t){return t.hasNext()?t.getNext():void 0}var vt=class t{constructor(e){this.fields=e,e.sort(be.comparator)}static empty(){return new t([])}unionWith(e){let n=new se(be.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Wu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function nb(){return typeof atob<"u"}var Ve=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wu("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return B(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ve.EMPTY_BYTE_STRING=new Ve("");var oN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(S(!!t),typeof t=="string"){let e=0,n=oN.exec(t);if(S(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ve(t.seconds),nanos:ve(t.nanos)}}function ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cr(t){return typeof t=="string"?Ve.fromBase64String(t):Ve.fromUint8Array(t)}function Vl(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Am(t){let e=t.mapValue.fields.__previous_value__;return Vl(e)?Am(e):e}function Ks(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new me(e.seconds,e.nanos)}var Bp=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ur=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fu={nullValue:"NULL_VALUE"};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vl(t)?4:rb(t)?9007199254740991:10:A()}function vn(t,e){if(t===e)return!0;let n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ks(t).isEqual(Ks(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),a=ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return cr(i.bytesValue).isEqual(cr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ve(i.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(i.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ve(i.integerValue)===ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ve(i.doubleValue),a=ve(o.doubleValue);return s===a?zs(s)===zs(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Xi(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Qw(s)!==Qw(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vn(s[c],a[c])))return!1;return!0}(t,e);default:return A()}}function Qs(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function lr(t,e){if(t===e)return 0;let n=Qr(t),r=Qr(e);if(n!==r)return B(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return B(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ve(o.integerValue||o.doubleValue),c=ve(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Yw(t.timestampValue,e.timestampValue);case 4:return Yw(Ks(t),Ks(e));case 5:return B(t.stringValue,e.stringValue);case 6:return function(o,s){let a=cr(o),c=cr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=B(a[u],c[u]);if(l!==0)return l}return B(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=B(ve(o.latitude),ve(s.latitude));return a!==0?a:B(ve(o.longitude),ve(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=lr(a[u],c[u]);if(l)return l}return B(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ir.mapValue&&s===ir.mapValue)return 0;if(o===ir.mapValue)return 1;if(s===ir.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let f=B(c[d],l[d]);if(f!==0)return f;let h=lr(a[c[d]],u[l[d]]);if(h!==0)return h}return B(c.length,l.length)}(t.mapValue,e.mapValue);default:throw A()}}function Yw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return B(t,e);let n=ar(t),r=ar(e),i=B(n.seconds,r.seconds);return i!==0?i:B(n.nanos,r.nanos)}function eo(t){return Up(t)}function Up(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return E.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Up(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Up(n.fields[s])}`;return i+"}"}(t.mapValue):A()}function Yr(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $p(t){return!!t&&"integerValue"in t}function Ys(t){return!!t&&"arrayValue"in t}function Zw(t){return!!t&&"nullValue"in t}function Xw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vu(t){return!!t&&"mapValue"in t}function Bs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bs(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function sN(t){return"nullValue"in t?Fu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Yr(ur.empty(),E.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:A()}function aN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Yr(ur.empty(),E.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ir:A()}function Jw(t,e){let n=lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function eE(t,e){let n=lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var nt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bs(n)}setAll(e){let n=be.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bs(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){si(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Bs(this.value))}};function ib(t){let e=[];return si(t.fields,(n,r)=>{let i=new be([n]);if(Vu(r)){let o=ib(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new vt(e)}var Me=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,P.min(),P.min(),P.min(),nt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,P.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,P.min(),P.min(),nt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,P.min(),P.min(),nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(P.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=P.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wn=class{constructor(e,n){this.position=e,this.inclusive=n}};function tE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=E.comparator(E.fromName(s.referenceValue),n.key):r=lr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var Zr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function cN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ku=class{},q=class t extends Ku{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qp(e,n,r):n==="array-contains"?new Kp(e,r):n==="in"?new Qu(e,r):n==="not-in"?new Qp(e,r):n==="array-contains-any"?new Yp(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zp(e,r):new Wp(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lr(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return A()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},re=class t extends Ku{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return to(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function to(t){return t.op==="and"}function Hp(t){return t.op==="or"}function Sm(t){return ob(t)&&to(t)}function ob(t){for(let e of t.filters)if(e instanceof re)return!1;return!0}function Gp(t){if(t instanceof q)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(Sm(t))return t.filters.map(e=>Gp(e)).join(",");{let e=t.filters.map(n=>Gp(n)).join(",");return`${t.op}(${e})`}}function sb(t,e){return t instanceof q?function(r,i){return i instanceof q&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof re?function(r,i){return i instanceof re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&sb(s,i.filters[a]),!0):!1}(t,e):void A()}function ab(t,e){let n=t.filters.concat(e);return re.create(n,t.op)}function cb(t){return t instanceof q?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof re?function(n){return n.op.toString()+" {"+n.getFilters().map(cb).join(" ,")+"}"}(t):"Filter"}var qp=class extends q{constructor(e,n,r){super(e,n,r),this.key=E.fromName(r.referenceValue)}matches(e){let n=E.comparator(e.key,this.key);return this.matchesComparison(n)}},zp=class extends q{constructor(e,n){super(e,"in",n),this.keys=ub("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Wp=class extends q{constructor(e,n){super(e,"not-in",n),this.keys=ub("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ub(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>E.fromName(r.referenceValue))}var Kp=class extends q{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ys(n)&&Qs(n.arrayValue,this.value)}},Qu=class extends q{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qs(this.value.arrayValue,n)}},Qp=class extends q{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Qs(this.value.arrayValue,n)}},Yp=class extends q{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ys(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qs(this.value.arrayValue,r))}};var Zp=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Xp(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Zp(t,e,n,r,i,o,s)}function Xr(t){let e=C(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),pa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.ce=n}return e.ce}function ga(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nE(t.startAt,e.startAt)&&nE(t.endAt,e.endAt)}function Yu(t){return E.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zu(t,e){return t.filters.filter(n=>n instanceof q&&n.field.isEqual(e))}function rE(t,e,n){let r=Fu,i=!0;for(let o of Zu(t,e)){let s=Fu,a=!0;switch(o.op){case"<":case"<=":s=sN(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Fu}Jw({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];Jw({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function iE(t,e,n){let r=ir,i=!0;for(let o of Zu(t,e)){let s=ir,a=!0;switch(o.op){case">=":case">":s=aN(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ir}eE({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];eE({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Wt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function lb(t,e,n,r,i,o,s,a){return new Wt(t,e,n,r,i,o,s,a)}function mo(t){return new Wt(t)}function oE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mm(t){return t.collectionGroup!==null}function Yi(t){let e=C(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new se(be.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Zr(o,r))}),n.has(be.keyField().canonicalString())||e.le.push(new Zr(be.keyField(),r))}return e.le}function ut(t){let e=C(t);return e.he||(e.he=uN(e,Yi(t))),e.he}function uN(t,e){if(t.limitType==="F")return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zr(i.field,o)});let n=t.endAt?new wn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wn(t.startAt.position,t.startAt.inclusive):null;return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jp(t,e){let n=t.filters.concat([e]);return new Wt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xu(t,e,n){return new Wt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ma(t,e){return ga(ut(t),ut(e))&&t.limitType===e.limitType}function db(t){return`${Xr(ut(t))}|lt:${t.limitType}`}function Gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cb(i)).join(", ")}]`),pa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(ut(t))}; limitType=${t.limitType})`}function _a(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):E.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Yi(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=tE(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Yi(r),i)||r.endAt&&!function(s,a,c){let u=tE(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Yi(r),i))}(t,e)}function fb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hb(t){return(e,n)=>{let r=!1;for(let i of Yi(t)){let o=lN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function lN(t,e,n){let r=t.field.isKeyField()?E.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?lr(c,u):A()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return A()}}var En=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return tb(this.inner)}size(){return this.innerSize}};var dN=new de(E.comparator);function mt(){return dN}var pb=new de(E.comparator);function Ls(...t){let e=pb;for(let n of t)e=e.insert(n.key,n);return e}function gb(t){let e=pb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mn(){return Us()}function mb(){return Us()}function Us(){return new En(t=>t.toString(),(t,e)=>t.isEqual(e))}var fN=new de(E.comparator),hN=new se(E.comparator);function $(...t){let e=hN;for(let n of t)e=e.add(n);return e}var pN=new se(B);function Pm(){return pN}function _b(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zs(e)?"-0":e}}function yb(t){return{integerValue:""+t}}function xb(t,e){return YE(e)?yb(e):_b(t,e)}var no=class{constructor(){this._=void 0}};function gN(t,e,n){return t instanceof dr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vl(o)&&(o=Am(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Ln?wb(t,e):t instanceof jn?Eb(t,e):function(i,o){let s=vb(i,o),a=sE(s)+sE(i.Ie);return $p(s)&&$p(i.Ie)?yb(a):_b(i.serializer,a)}(t,e)}function mN(t,e,n){return t instanceof Ln?wb(t,e):t instanceof jn?Eb(t,e):n}function vb(t,e){return t instanceof fr?function(r){return $p(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var dr=class extends no{},Ln=class extends no{constructor(e){super(),this.elements=e}};function wb(t,e){let n=bb(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var jn=class extends no{constructor(e){super(),this.elements=e}};function Eb(t,e){let n=bb(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var fr=class extends no{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function sE(t){return ve(t.integerValue||t.doubleValue)}function bb(t){return Ys(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jr=class{constructor(e,n){this.field=e,this.transform=n}};function _N(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ln&&i instanceof Ln||r instanceof jn&&i instanceof jn?Xi(r.elements,i.elements,vn):r instanceof fr&&i instanceof fr?vn(r.Ie,i.Ie):r instanceof dr&&i instanceof dr}(t.transform,e.transform)}var eg=class{constructor(e,n){this.version=e,this.transformResults=n}},we=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ro=class{};function Ib(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pr(t.key,we.none()):new hr(t.key,t.data,we.none());{let n=t.data,r=nt.empty(),i=new se(be.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Kt(t.key,r,new vt(i.toArray()),we.none())}}function yN(t,e,n){t instanceof hr?function(i,o,s){let a=i.value.clone(),c=cE(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Kt?function(i,o,s){if(!Lu(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=cE(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Cb(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function $s(t,e,n,r){return t instanceof hr?function(o,s,a,c){if(!Lu(o.precondition,s))return a;let u=o.value.clone(),l=uE(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kt?function(o,s,a,c){if(!Lu(o.precondition,s))return a;let u=uE(o.fieldTransforms,c,s),l=s.data;return l.setAll(Cb(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Lu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function xN(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=vb(r.transform,i||null);o!=null&&(n===null&&(n=nt.empty()),n.set(r.field,o))}return n||null}function aE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xi(r,i,(o,s)=>_N(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var hr=class extends ro{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kt=class extends ro{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Cb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function cE(t,e,n){let r=new Map;S(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,mN(s,a,n[i]))}return r}function uE(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,gN(o,s,e))}return r}var pr=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zs=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xs=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yN(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=mb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=Ib(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(P.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$())}isEqual(e){return this.batchId===e.batchId&&Xi(this.mutations,e.mutations,(n,r)=>aE(n,r))&&Xi(this.baseMutations,e.baseMutations,(n,r)=>aE(n,r))}},tg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){S(e.mutations.length===r.length);let i=function(){return fN}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Js=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ng=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var De,Q;function Db(t){switch(t){default:return A();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function Tb(t){if(t===void 0)return Ee("GRPC error has no .code"),g.UNKNOWN;switch(t){case De.OK:return g.OK;case De.CANCELLED:return g.CANCELLED;case De.UNKNOWN:return g.UNKNOWN;case De.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case De.INTERNAL:return g.INTERNAL;case De.UNAVAILABLE:return g.UNAVAILABLE;case De.UNAUTHENTICATED:return g.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case De.NOT_FOUND:return g.NOT_FOUND;case De.ALREADY_EXISTS:return g.ALREADY_EXISTS;case De.PERMISSION_DENIED:return g.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case De.ABORTED:return g.ABORTED;case De.OUT_OF_RANGE:return g.OUT_OF_RANGE;case De.UNIMPLEMENTED:return g.UNIMPLEMENTED;case De.DATA_LOSS:return g.DATA_LOSS;default:return A()}}(Q=De||(De={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var lE=null;function Ab(){return new TextEncoder}var vN=new Br([4294967295,4294967295],0);function dE(t){let e=Ab().encode(t),n=new Gw;return n.update(e),new Uint8Array(n.digest())}function fE(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,o],0)]}var rg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wr(`Invalid padding: ${n}`);if(r<0)throw new Wr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Br.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(vN)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=dE(e),[r,i]=fE(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=dE(e),[r,i]=fE(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Wr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ea=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(P.min(),i,new de(B),mt(),$())}},ta=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,$(),$(),$())}};var Zi=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Ju=class{constructor(e,n){this.targetId=e,this.fe=n}},el=class{constructor(e,n,r=Ve.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},tl=class{constructor(){this.ge=0,this.pe=pE(),this.ye=Ve.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=$(),n=$(),r=$();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:A()}}),new ta(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=pE()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,S(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},ig=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=mt(),this.Qe=hE(),this.Ke=new de(B)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:A()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Yu(o))if(r===0){let s=new E(o.path);this.We(n,s,Me.newNoDocument(s,P.min()))}else S(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}lE?.tt(function(l,d,f,h,y){var _,x,b,M,D,N;let R={localCacheCount:l,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},U=d.unchangedNames;return U&&(R.bloomFilter={applied:y===0,hashCount:(_=U?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(M=(b=(x=U?.bits)===null||x===void 0?void 0:x.bitmap)===null||b===void 0?void 0:b.length)!==null&&M!==void 0?M:0,padding:(N=(D=U?.bits)===null||D===void 0?void 0:D.padding)!==null&&N!==void 0?N:0,mightContain:fe=>{var wt;return(wt=h?.mightContain(fe))!==null&&wt!==void 0&&wt}}),R}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=cr(r).toUint8Array()}catch(c){if(c instanceof Wu)return Nt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rg(s,i,o)}catch(c){return Nt(c instanceof Wr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Yu(a.target)){let c=new E(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Me.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=$();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new ea(e,n,this.Ke,this.qe,r);return this.qe=mt(),this.Qe=hE(),this.Ke=new de(B),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new tl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new se(B),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||w("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new tl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function hE(){return new de(E.comparator)}function pE(){return new de(E.comparator)}var wN={asc:"ASCENDING",desc:"DESCENDING"},EN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bN={and:"AND",or:"OR"},og=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function sg(t,e){return t.useProto3Json||pa(e)?e:{value:e}}function io(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IN(t,e){return io(t,e.toTimestamp())}function Ie(t){return S(!!t),P.fromTimestamp(function(n){let r=ar(n);return new me(r.seconds,r.nanos)}(t))}function Nm(t,e){return ag(t,e).canonicalString()}function ag(t,e){let n=function(i){return new Y(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Mb(t){let e=Y.fromString(t);return S(Bb(e)),e}function na(t,e){return Nm(t.databaseId,e.path)}function yn(t,e){let n=Mb(e);if(n.get(1)!==t.databaseId.projectId)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new E(Ob(n))}function Pb(t,e){return Nm(t.databaseId,e)}function Nb(t){let e=Mb(t);return e.length===4?Y.emptyPath():Ob(e)}function cg(t){return new Y(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ob(t){return S(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gE(t,e,n){return{name:na(t,e),fields:n.value.mapValue.fields}}function Rb(t,e,n){let r=yn(t,e.name),i=Ie(e.updateTime),o=e.createTime?Ie(e.createTime):P.min(),s=new nt({mapValue:{fields:e.fields}}),a=Me.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function CN(t,e){return"found"in e?function(r,i){S(!!i.found),i.found.name,i.found.updateTime;let o=yn(r,i.found.name),s=Ie(i.found.updateTime),a=i.found.createTime?Ie(i.found.createTime):P.min(),c=new nt({mapValue:{fields:i.found.fields}});return Me.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){S(!!i.missing),S(!!i.readTime);let o=yn(r,i.missing),s=Ie(i.readTime);return Me.newNoDocument(o,s)}(t,e):A()}function DN(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:A()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(S(l===void 0||typeof l=="string"),Ve.fromBase64String(l||"")):(S(l===void 0||l instanceof Uint8Array),Ve.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?g.UNKNOWN:Tb(u.code);return new v(l,u.message||"")}(s);n=new el(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yn(t,r.document.name),o=Ie(r.document.updateTime),s=r.document.createTime?Ie(r.document.createTime):P.min(),a=new nt({mapValue:{fields:r.document.fields}}),c=Me.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Zi(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yn(t,r.document),o=r.readTime?Ie(r.readTime):P.min(),s=Me.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Zi([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yn(t,r.document),o=r.removedTargetIds||[];n=new Zi([],o,i,null)}else{if(!("filter"in e))return A();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ng(i,o),a=r.targetId;n=new Ju(a,s)}}return n}function ra(t,e){let n;if(e instanceof hr)n={update:gE(t,e.key,e.value)};else if(e instanceof pr)n={delete:na(t,e.key)};else if(e instanceof Kt)n={update:gE(t,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof Zs))return A();n={verify:na(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof dr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ln)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw A()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:IN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:A()}(t,e.precondition)),n}function ug(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?we.updateTime(Ie(o.updateTime)):o.exists!==void 0?we.exists(o.exists):we.none()}(e.currentDocument):we.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)S(a.setToServerValue==="REQUEST_TIME"),c=new dr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new Ln(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new jn(l)}else"increment"in a?c=new fr(s,a.increment):A();let u=be.fromServerFormat(a.fieldPath);return new Jr(u,c)}(t,i)):[];if(e.update){e.update.name;let i=yn(t,e.update.name),o=new nt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new vt(u.map(l=>be.fromServerFormat(l)))}(e.updateMask);return new Kt(i,o,s,n,r)}return new hr(i,o,n,r)}if(e.delete){let i=yn(t,e.delete);return new pr(i,n)}if(e.verify){let i=yn(t,e.verify);return new Zs(i,n)}return A()}function TN(t,e){return t&&t.length>0?(S(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ie(i.updateTime):Ie(o);return s.isEqual(P.min())&&(s=Ie(o)),new eg(s,i.transformResults||[])}(n,e))):[]}function kb(t,e){return{documents:[Pb(t,e.path)]}}function Fb(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pb(t,i);let o=function(u){if(u.length!==0)return jb(re.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:qi(f.field),direction:SN(f.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=sg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function Vb(t){let e=Nb(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){S(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let f=Lb(d);return f instanceof re&&Sm(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(y){return new Zr(zi(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,pa(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){let f=!!d.before,h=d.values||[];return new wn(h,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let f=!d.before,h=d.values||[];return new wn(h,f)}(n.endAt)),lb(e,i,s,o,a,"F",c,u)}function AN(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zi(n.unaryFilter.field);return q.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zi(n.unaryFilter.field);return q.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zi(n.unaryFilter.field);return q.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zi(n.unaryFilter.field);return q.create(s,"!=",{nullValue:"NULL_VALUE"});default:return A()}}(t):t.fieldFilter!==void 0?function(n){return q.create(zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return re.create(n.compositeFilter.filters.map(r=>Lb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return A()}}(n.compositeFilter.op))}(t):A()}function SN(t){return wN[t]}function MN(t){return EN[t]}function PN(t){return bN[t]}function qi(t){return{fieldPath:t.canonicalString()}}function zi(t){return be.fromServerFormat(t.fieldPath)}function jb(t){return t instanceof q?function(n){if(n.op==="=="){if(Xw(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if(Zw(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xw(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if(Zw(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:MN(n.op),value:n.value}}}(t):t instanceof re?function(n){let r=n.getFilters().map(i=>jb(i));return r.length===1?r[0]:{compositeFilter:{op:PN(n.op),filters:r}}}(t):A()}function NN(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var oo=class t{constructor(e,n,r,i,o=P.min(),s=P.min(),a=Ve.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nl=class{constructor(e){this.ct=e}};function ON(t,e){let n;if(e.document)n=Rb(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=E.fromSegments(e.noDocument.path),i=ti(e.noDocument.readTime);n=Me.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return A();{let r=E.fromSegments(e.unknownDocument.path),i=ti(e.unknownDocument.version);n=Me.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new me(i[0],i[1]);return P.fromTimestamp(o)}(e.readTime)),n}function mE(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:na(o,s.key),fields:s.data.value.mapValue.fields,updateTime:io(o,s.version.toTimestamp()),createTime:io(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ei(e.version)};else{if(!e.isUnknownDocument())return A();r.unknownDocument={path:n.path.toArray(),version:ei(e.version)}}return r}function rl(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ei(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ti(t){let e=new me(t.seconds,t.nanoseconds);return P.fromTimestamp(e)}function Gr(t,e){let n=(e.baseMutations||[]).map(o=>ug(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ug(t.ct,o)),i=me.fromMillis(e.localWriteTimeMs);return new Xs(e.batchId,i,n,r)}function js(t){let e=ti(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ti(t.lastLimboFreeSnapshotVersion):P.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return S(o.documents.length===1),ut(mo(Nb(o.documents[0])))}(t.query):function(o){return ut(Vb(o))}(t.query),new oo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ve.fromBase64String(t.resumeToken))}function Ub(t,e){let n=ei(e.snapshotVersion),r=ei(e.lastLimboFreeSnapshotVersion),i;i=Yu(e.target)?kb(t.ct,e.target):Fb(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xr(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Om(t){let e=Vb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xu(e,e.limit,"L"):e}function Ip(t,e){return new Js(e.largestBatchId,ug(t.ct,e.overlayMutation))}function _E(t,e){let n=e.path.lastSegment();return[t,ct(e.path.popLast()),n]}function yE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ei(r.readTime),documentKey:ct(r.documentKey.path),largestBatchId:r.largestBatchId}}var lg=class{getBundleMetadata(e,n){return xE(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ti(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return xE(e).put(function(i){return{bundleId:i.id,createTime:ei(Ie(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return vE(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Om(o.bundledQuery),readTime:ti(o.readTime)}}(r)})}saveNamedQuery(e,n){return vE(e).put(function(i){return{name:i.name,readTime:ei(Ie(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function xE(t){return Le(t,"bundles")}function vE(t){return Le(t,"namedQueries")}var il=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Rs(e).get(_E(this.userId,n)).next(r=>r?Ip(this.serializer,r):null)}getOverlays(e,n){let r=mn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Js(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ct(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Rs(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=mn(),o=ct(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Rs(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=Ip(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=mn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Rs(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=Ip(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return Rs(e).put(function(i,o,s){let[a,c,u]=_E(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ra(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Rs(t){return Le(t,"documentOverlays")}var kn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ve(e.integerValue));else if("doubleValue"in e){let r=ve(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),zs(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(cr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?rb(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):A()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),E.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};kn.bt=new kn;function RN(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function wE(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=RN(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var dg=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=wE(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=wE(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},fg=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},hg=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},qr=class{constructor(){this.Gt=new dg,this.zt=new fg(this.Gt),this.jt=new hg(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var zr=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function er(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=EE(t.arrayValue,e.arrayValue),n!==0?n:(n=EE(t.directionalValue,e.directionalValue),n!==0?n:E.comparator(t.documentKey,e.documentKey)))}function EE(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var ol=class{constructor(e){this.Yt=new se((n,r)=>be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(S(e.collectionGroup===this.collectionId),this.en)return!1;let n=kp(e);if(n!==void 0&&!this.nn(n))return!1;let r=$r(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new se(be.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qi(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qi(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qi(r.field,r.dir==="asc"?0:1)));return new Ji(Ji.UNKNOWN_ID,this.collectionId,n,qs.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function $b(t){var e,n;if(S(t instanceof q||t instanceof re),t instanceof q){if(t instanceof Qu){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>q.create(t.field,"==",o)))||[];return re.create(i,"or")}return t}let r=t.filters.map(i=>$b(i));return re.create(r,t.op)}function kN(t){if(t.getFilters().length===0)return[];let e=mg($b(t));return S(Hb(e)),pg(e)||gg(e)?[e]:e.getFilters()}function pg(t){return t instanceof q}function gg(t){return t instanceof re&&Sm(t)}function Hb(t){return pg(t)||gg(t)||function(n){if(n instanceof re&&Hp(n)){for(let r of n.getFilters())if(!pg(r)&&!gg(r))return!1;return!0}return!1}(t)}function mg(t){if(S(t instanceof q||t instanceof re),t instanceof q)return t;if(t.filters.length===1)return mg(t.filters[0]);let e=t.filters.map(r=>mg(r)),n=re.create(e,t.op);return n=sl(n),Hb(n)?n:(S(n instanceof re),S(to(n)),S(n.filters.length>1),n.filters.reduce((r,i)=>Rm(r,i)))}function Rm(t,e){let n;return S(t instanceof q||t instanceof re),S(e instanceof q||e instanceof re),n=t instanceof q?e instanceof q?function(i,o){return re.create([i,o],"and")}(t,e):bE(t,e):e instanceof q?bE(e,t):function(i,o){if(S(i.filters.length>0&&o.filters.length>0),to(i)&&to(o))return ab(i,o.getFilters());let s=Hp(i)?i:o,a=Hp(i)?o:i,c=s.filters.map(u=>Rm(u,a));return re.create(c,"or")}(t,e),sl(n)}function bE(t,e){if(to(e))return ab(e,t.getFilters());{let n=e.filters.map(r=>Rm(t,r));return re.create(n,"or")}}function sl(t){if(S(t instanceof q||t instanceof re),t instanceof q)return t;let e=t.getFilters();if(e.length===1)return sl(e[0]);if(ob(t))return t;let n=e.map(i=>sl(i)),r=[];return n.forEach(i=>{i instanceof q?r.push(i):i instanceof re&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:re.create(r,t.op)}var _g=class{constructor(){this._n=new ia}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Ot.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Ot.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},ia=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new se(Y.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new se(Y.comparator)).toArray()}};var Pu=new Uint8Array(0),yg=class{constructor(e,n){this.databaseId=n,this.an=new ia,this.un=new En(r=>Xr(r),(r,i)=>ga(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ct(i)};return IE(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[zE(n),""],!1,!0);return IE(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(gn(s.parent))}return r})}addFieldIndex(e,n){let r=ks(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Ui(e);return o.next(a=>{s.put(yE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=ks(e),i=Ui(e),o=Bi(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=ks(e),r=Bi(e),i=Ui(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ol(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Bi(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=$(),a=[];return p.forEach(o,(c,u)=>{w("IndexedDbIndexManager",`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(c)} to execute ${Xr(n)}`);let l=function(D,N){let R=kp(N);if(R===void 0)return null;for(let U of Zu(D,R.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(u,c),d=function(D,N){let R=new Map;for(let U of $r(N))for(let fe of Zu(D,U.fieldPath))switch(fe.op){case"==":case"in":R.set(U.fieldPath.canonicalString(),fe.value);break;case"not-in":case"!=":return R.set(U.fieldPath.canonicalString(),fe.value),Array.from(R.values())}return null}(u,c),f=function(D,N){let R=[],U=!0;for(let fe of $r(N)){let wt=fe.kind===0?rE(D,fe.fieldPath,D.startAt):iE(D,fe.fieldPath,D.startAt);R.push(wt.value),U&&(U=wt.inclusive)}return new wn(R,U)}(u,c),h=function(D,N){let R=[],U=!0;for(let fe of $r(N)){let wt=fe.kind===0?iE(D,fe.fieldPath,D.endAt):rE(D,fe.fieldPath,D.endAt);R.push(wt.value),U&&(U=wt.inclusive)}return new wn(R,U)}(u,c),y=this.hn(c,u,f),_=this.hn(c,u,h),x=this.Pn(c,u,d),b=this.In(c.indexId,l,y,f.inclusive,_,h.inclusive,x);return p.forEach(b,M=>r.j(M,n.limit).next(D=>{D.forEach(N=>{let R=E.fromSegments(N.documentKey);s.has(R)||(s=s.add(R),a.push(R))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=kN(re.create(e.filters,"and")).map(r=>Xp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let f=n?this.Tn(n[d/u]):Pu,h=this.En(e,f,r[d%u],i),y=this.dn(e,f,o[d%u],s),_=a.map(x=>this.En(e,f,x,!0));l.push(...this.createRange(h,y,_))}return l}En(e,n,r,i){let o=new zr(e,E.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new zr(e,E.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new ol(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new se(be.comparator),l=!1;for(let d of c.filters)for(let f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?l=!0:u=u.add(f.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new qr;for(let i of $r(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);kn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new qr;return kn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new qr;return kn.bt.Pt(Yr(this.databaseId,n),r.Ht(function(o){let s=$r(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new qr);let o=0;for(let s of $r(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&Ys(a))i=this.mn(i,s,a);else{let u=c.Ht(s.kind);kn.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new qr;c.seed(a.Wt()),kn.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof q&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=ks(e),i=Ui(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let f=d?new qs(d.sequenceNumber,new Ot(ti(d.readTime),new E(gn(d.documentKey)),d.largestBatchId)):qs.empty(),h=l.fields.map(([y,_])=>new Qi(be.fromServerFormat(y),_));return new Ji(l.indexId,l.collectionGroup,h,f)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:B(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=ks(e),o=Ui(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(yE(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.pn(e,i,c).next(u=>{let l=this.yn(o,c);return u.isEqual(l)?p.resolve():this.wn(e,o,c,u,l)}))))})}Sn(e,n,r,i){return Bi(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Bi(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Bi(e),o=new se(er);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new zr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new se(er),i=this.An(n,e);if(i==null)return r;let o=kp(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Ys(s))for(let a of s.arrayValue.values||[])r=r.add(new zr(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new zr(n.indexId,e.key,Pu,i));return r}wn(e,n,r,i,o){w("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,f){let h=c.getIterator(),y=u.getIterator(),_=ji(h),x=ji(y);for(;_||x;){let b=!1,M=!1;if(_&&x){let D=l(_,x);D<0?M=!0:D>0&&(b=!0)}else _!=null?M=!0:b=!0;b?(d(x),x=ji(y)):M?(f(_),_=ji(h)):(_=ji(h),x=ji(y))}}(i,o,er,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return Ui(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>er(s,a)).filter((s,a,c)=>!a||er(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=er(s,e),c=er(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Pu,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Pu,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return er(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(CE)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||A())).next(CE)}};function IE(t){return Le(t,"collectionParents")}function Bi(t){return Le(t,"indexEntries")}function ks(t){return Le(t,"indexConfiguration")}function Ui(t){return Le(t,"indexState")}function CE(t){S(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Dm(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ot(e.readTime,e.documentKey,n)}var DE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Gb(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(l,d,f)=>(a++,f.delete()));o.push(c.next(()=>{S(a===1)}));let u=[];for(let l of n.mutations){let d=ZE(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function al(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw A();e=t.noDocument}return JSON.stringify(e).length}Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(41943040,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var cl=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){S(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Wi(e),s=tr(e);return s.add({}).next(a=>{S(typeof a=="number");let c=new Xs(a,n,r,i),u=function(h,y,_){let x=_.baseMutations.map(M=>ra(h.ct,M)),b=_.mutations.map(M=>ra(h.ct,M));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:x,mutations:b}}(this.serializer,this.userId,c),l=[],d=new se((f,h)=>B(f.canonicalString(),h.canonicalString()));for(let f of i){let h=ZE(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),l.push(s.put(u)),l.push(o.put(h,$P))}return d.forEach(f=>{l.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return tr(e).get(n).next(r=>r?(S(r.userId===this.userId),Gr(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return tr(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(S(a.batchId>=r),o=Gr(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return tr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).W("userMutationsIndex",n).next(r=>r.map(i=>Gr(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=ku(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Wi(e).Y({range:i},(s,a,c)=>{let[u,l,d]=s,f=gn(l);if(u===this.userId&&n.path.isEqual(f))return tr(e).get(d).next(h=>{if(!h)throw A();S(h.userId===this.userId),o.push(Gr(this.serializer,h))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new se(B),i=[];return n.forEach(o=>{let s=ku(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wi(e).Y({range:a},(u,l,d)=>{let[f,h,y]=u,_=gn(h);f===this.userId&&o.path.isEqual(_)?r=r.add(y):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=ku(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new se(B);return Wi(e).Y({range:s},(c,u,l)=>{let[d,f,h]=c,y=gn(f);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(h)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(tr(e).get(o).next(s=>{if(s===null)throw A();S(s.userId===this.userId),r.push(Gr(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Gb(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wi(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=gn(o[1]);i.push(c)}else a.done()}).next(()=>{S(i.length===0)})})}containsKey(e,n){return qb(e,this.userId,n)}xn(e){return zb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function qb(t,e,n){let r=ku(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wi(t).Y({range:o,J:!0},(a,c,u)=>{let[l,d,f]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function tr(t){return Le(t,"mutations")}function Wi(t){return Le(t,"documentMutations")}function zb(t){return Le(t,"mutationQueues")}var so=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var xg=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new so(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>P.fromTimestamp(new me(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>$i(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(S(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return $i(e).Y((s,a)=>{let c=js(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return $i(e).Y((r,i)=>{let o=js(i);n(o)})}Ln(e){return TE(e).get("targetGlobalKey").next(n=>(S(n!==null),n))}kn(e,n){return TE(e).put("targetGlobalKey",n)}qn(e,n){return $i(e).put(Ub(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Xr(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $i(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=js(a);ga(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=nr(e);return n.forEach(s=>{let a=ct(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=nr(e);return p.forEach(n,o=>{let s=ct(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=nr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=nr(e),o=$();return i.Y({range:r,J:!0},(s,a,c)=>{let u=gn(s[1]),l=new E(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=ct(n.path),i=IDBKeyRange.bound([r],[zE(r)],!1,!0),o=0;return nr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(e,n){return $i(e).get(n).next(r=>r?js(r):null)}};function $i(t){return Le(t,"targets")}function TE(t){return Le(t,"targetGlobal")}function nr(t){return Le(t,"targetDocuments")}function AE([t,e],[n,r]){let i=B(t,n);return i===0?B(e,r):i}var vg=class{constructor(e){this.Kn=e,this.buffer=new se(AE),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();AE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},wg=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){w("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){_r(n)?w("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield mr(n)}yield this.zn(3e5)}))}},Eg=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(xt._e);let r=new vg(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(w("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(DE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DE):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(w("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Hi()<=Zt.DEBUG&&w("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function FN(t,e){return new Eg(t,e)}var bg=class{constructor(e,n){this.db=e,this.garbageCollector=FN(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Nu(e,r)}removeReference(e,n,r){return Nu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Nu(e,n)}er(e,n){return function(i,o){let s=!1;return zb(i).Z(a=>qb(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,P.min()),nr(e).delete(function(d){return[0,ct(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Nu(e,n)}Xn(e,n){let r=nr(e),i,o=xt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==xt._e&&n(new E(gn(i)),o),o=u,i=c):o=xt._e}).next(()=>{o!==xt._e&&n(new E(gn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nu(t,e){return nr(t).put(function(r,i){return{targetId:0,path:ct(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var ul=class{constructor(){this.changes=new En(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ig=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ur(e).put(r)}removeEntry(e,n,r){return Ur(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rl(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Me.newInvalidDocument(n);return Ur(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fs(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Me.newInvalidDocument(n)};return Ur(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fs(n))},(i,o)=>{r={document:this.nr(n,o),size:al(o)}}).next(()=>r)}getEntries(e,n){let r=mt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=mt(),i=new de(E.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,al(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new se(PE);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Fs(i.first()),Fs(i.last())),s=i.getIterator(),a=s.getNext();return Ur(e).Y({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=E.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&PE(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.U(Fs(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),rl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ur(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=mt();for(let d of u){let f=this.nr(E.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(_a(n,f)||i.has(f.key))&&(l=l.insert(f.key,f))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=mt(),s=ME(n,r),a=ME(n,Ot.max());return Ur(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.nr(E.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Cg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return SE(e).get("remoteDocumentGlobalKey").next(n=>(S(!!n),n))}tr(e,n){return SE(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=ON(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(P.min())))return r}return Me.newInvalidDocument(e)}};function Wb(t){return new Ig(t)}var Cg=class extends ul{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new En(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new se((o,s)=>B(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=mE(this.ar.serializer,s);i=i.add(o.path.popLast());let u=al(c);r+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=mE(this.ar.serializer,s.convertToNoDocument(P.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function SE(t){return Le(t,"remoteDocumentGlobal")}function Ur(t){return Le(t,"remoteDocumentsV14")}function Fs(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ME(t,e){let n=e.documentKey.path.toArray();return[t,rl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function PE(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=B(n[o],r[o]),i)return i;return i=B(n.length,r.length),i||(i=B(n[n.length-2],r[r.length-2]),i||B(n[n.length-1],r[r.length-1]))}var Dg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ll=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$s(r.mutation,i,vt.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$()){let i=mn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ls();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=mn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=mt(),s=Us(),a=function(){return Us()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Kt)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),$s(l.mutation,u,l.mutation.getFieldMask(),me.now())):s.set(u.key,vt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Dg(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Us(),i=new de((s,a)=>s-a),o=$();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||vt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||$()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=mb();l.forEach(f=>{if(!o.has(f)){let h=Ib(n.get(f),r.get(f));h!==null&&d.set(f,h),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return E.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(mn()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,$())).next(l=>({batchId:a,changes:gb(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new E(n)).next(r=>{let i=Ls();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ls();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,f){return new Wt(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Me.newInvalidDocument(l)))});let a=Ls();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&$s(l.mutation,u,vt.empty(),me.now()),_a(n,u)&&(a=a.insert(c,u))}),a})}};var Tg=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ie(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Om(i.bundledQuery),readTime:Ie(i.readTime)}}(n)),p.resolve()}};var Ag=class{constructor(){this.overlays=new de(E.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=mn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=mn(),o=n.length+1,s=new E(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new de((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=mn(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=mn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Js(n,r));let o=this.hr.get(n);o===void 0&&(o=$(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var oa=class{constructor(){this.Pr=new se(Te.Ir),this.Tr=new se(Te.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Te(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Te(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new E(new Y([])),r=new Te(n,e),i=new Te(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new E(new Y([])),r=new Te(n,e),i=new Te(n,e+1),o=$();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Te(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Te=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return E.comparator(e.key,n.key)||B(e.pr,n.pr)}static Er(e,n){return B(e.pr,n.pr)||E.comparator(e.key,n.key)}};var Sg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new se(Te.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Xs(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Te(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Te(n,0),i=new Te(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new se(B);return n.forEach(i=>{let o=new Te(i,0),s=new Te(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;E.isDocumentKey(o)||(o=o.child(""));let s=new Te(new E(o),0),a=new se(B);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){S(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Te(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Te(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Mg=class{constructor(e){this.vr=e,this.docs=function(){return new de(E.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let r=mt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Me.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=mt(),s=n.path,a=new E(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Dm(KE(l),r)<=0||(i.has(l.key)||_a(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){A()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Pg(this)}getSize(e){return p.resolve(this.size)}},Pg=class extends ul{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Ng=class{constructor(e){this.persistence=e,this.Mr=new En(n=>Xr(n),ga),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oa,this.targetCount=0,this.Br=so.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new so(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var dl=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new xt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ng(this),this.indexManager=new _g,this.remoteDocumentCache=function(i){return new Mg(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new nl(n),this.$r=new Tg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ag,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Sg(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);let i=new Og(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Og=class extends Gu{constructor(e){super(),this.currentSequenceNumber=e}},fl=class t{constructor(e){this.persistence=e,this.zr=new oa,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw A()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=E.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,P.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Rg=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new qu("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0}),c.createObjectStore("documentMutations")}(e),NE(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),NE(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:P.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0});let d=u.store("mutations"),f=l.map(h=>d.put(h));return p.waitFor(f)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:eN});u.createIndex("collectionPathOverlayIndex",tN,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",nN,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:HP});u.createIndex("documentKeyIndex",GP),u.createIndex("collectionGroupIndex",qP)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:YP}).createIndex("sequenceNumberIndex",ZP,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:XP}).createIndex("documentKeyIndex",JP,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=al(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{S(c.userId===o.userId);let u=Gr(this.serializer,c);return Gb(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new Y(s),u=function(d){return[0,ct(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:ct(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:QP});let r=n.store("collectionParents"),i=new ia,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:ct(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new Y(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],u)=>{let l=gn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=js(i),s=Ub(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new E(Y.fromString(d.document.name).popFirst(5)):d.noDocument?E.fromSegments(d.noDocument.path):d.unknownDocument?E.fromSegments(d.unknownDocument.path):A()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=Wb(this.serializer),o=new dl(fl.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:$();Gr(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new Ae(u),d=il.lt(this.serializer,l),f=o.getIndexManager(l),h=cl.lt(l,this.serializer,f,o.referenceDelegate);return new ll(i,h,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Ws(n,xt._e),c).next()})})}};function NE(t){t.createObjectStore("targetDocuments",{keyPath:WP}).createIndex("documentTargetsIndex",KP,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zP,{unique:!0}),t.createObjectStore("targetGlobal")}var Cp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kg=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=f=>Promise.resolve(),!t.D())throw new v(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bg(this,i),this.Ti=n+"main",this.serializer=new nl(c),this.Ei=new Vn(this.Ti,this.ui,new Rg(this.serializer)),this.Qr=new xg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wb(this.serializer),this.$r=new lg,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Ee("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,Cp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new xt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ou(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(_r(e))return w("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Vs(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return Ou(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Le(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):Vs(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,Cp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ou(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&w("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Ws(e,xt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Ou(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return cl.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yg(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return il.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){w("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?iN:c===14?eb:c===13?JE:c===12?rN:c===11?XE:void A()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Ws(a,this.kr?this.kr.next():xt._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Ee(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new v(g.FAILED_PRECONDITION,QE);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Vs(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new v(g.FAILED_PRECONDITION,Cp)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vs(e).put("owner",n)}static D(){return Vn.D()}yi(e){let n=Vs(e);return n.get("owner").next(r=>this.Si(r)?(w("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ee(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;ed()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return w("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ee("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ee("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Vs(t){return Le(t,"owner")}function Ou(t){return Le(t,"clientMetadata")}function km(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fg=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=$(),i=$();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Vg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hl=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ed()?8:Vn.v(Co())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Vg;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Hi()<=Zt.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",Gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Hi()<=Zt.DEBUG&&w("QueryEngine","Query:",Gi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Hi()<=Zt.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",Gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ut(n))):p.resolve())}ji(e,n){if(oE(n))return p.resolve(null);let r=ut(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xu(n,null,"F"),r=ut(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=$(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Xu(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return oE(n)||i.isEqual(P.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Hi()<=Zt.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gi(n)),this.es(e,s,n,WE(i,-1)).next(a=>a))})}Zi(e,n){let r=new se(hb(e));return n.forEach((i,o)=>{_a(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Hi()<=Zt.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",Gi(n)),this.zi.getDocumentsMatchingQuery(e,n,Ot.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Lg=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new de(B),this.rs=new En(o=>Xr(o),ga),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ll(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function Kb(t,e,n,r){return new Lg(t,e,n,r)}function Qb(t,e){return m(this,null,function*(){let n=C(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=$();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function VN(t,e){let n=C(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,f=d.keys(),h=p.resolve();return f.forEach(y=>{h=h.next(()=>l.getEntry(c,y)).next(_=>{let x=u.docVersions.get(y);S(x!==null),_.version.compareTo(x)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=$();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yb(t){let e=C(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function LN(t,e){let n=C(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let f=i.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let h=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(Ve.EMPTY_BYTE_STRING,P.min()).withLastLimboFreeSnapshotVersion(P.min()):l.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(l.resumeToken,r)),i=i.insert(d,h),function(_,x,b){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,h,l)&&a.push(n.Qr.updateTargetData(o,h))});let c=mt(),u=$();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(Zb(o,s,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(P.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function Zb(t,e,n){let r=$(),i=$();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=mt();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(P.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function jN(t,e){let n=C(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ao(t,e){let n=C(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new oo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function co(t,e,n){return m(this,null,function*(){let r=C(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_r(s))throw s;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function pl(t,e,n){let r=C(t),i=P.min(),o=$();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=C(c),f=d.rs.get(l);return f!==void 0?p.resolve(d.ns.get(f)):d.Qr.getTargetData(u,l)}(r,s,ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:P.min(),n?o:$())).next(a=>(eI(r,fb(e),a),{documents:a,hs:o})))}function Xb(t,e){let n=C(t),r=C(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function Jb(t,e){let n=C(t),r=n.ss.get(e)||P.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,WE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eI(n,e,i),i))}function eI(t,e,n){let r=t.ss.get(e)||P.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function BN(t,e,n,r){return m(this,null,function*(){let i=C(t),o=$(),s=mt();for(let u of n){let l=e.Ps(u.metadata.name);u.document&&(o=o.add(l));let d=e.Is(u);d.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield ao(i,function(l){return ut(mo(Y.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Zb(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.cs,l.ls)).next(()=>l.cs)))})}function UN(r,i){return m(this,arguments,function*(t,e,n=$()){let o=yield ao(t,ut(Om(e.bundledQuery))),s=C(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ie(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(Ve.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function OE(t,e){return`firestore_clients_${t}_${e}`}function RE(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dp(t,e){return`firestore_targets_${t}_${e}`}var gl=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new v(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Ee("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hs=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new v(r.error.code,r.error.message))),o?new t(e,r.state,i):(Ee("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ml=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Pm();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=YE(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ee("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},jg=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ee("SharedClientState",`Failed to parse online state: ${e}`),null)}},sa=class{constructor(){this.activeTargetIds=Pm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Gs=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new de(B),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=OE(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new sa),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(OE(this.persistenceKey,r));if(i){let o=ml.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Dp(this.persistenceKey,e));if(r){let i=Hs.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dp(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return w("SharedClientState","READ",e,n),n}setItem(e,n){w("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){w("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(w("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ee("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=xt._e;if(o!=null)try{let a=JSON.parse(o);S(typeof a=="number"),s=a}catch(a){Ee("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==xt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new gl(this.currentUser,e,n,r),o=RE(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=RE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Dp(this.persistenceKey,e),o=new Hs(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return ml.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return gl.Es(new Ae(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Hs.Es(i,n)}xs(e){return jg.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);w("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Pm();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},_l=class{constructor(){this.no=new sa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new sa,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Bg=class{io(e){}shutdown(){}};var yl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ru=null;function Tp(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}var $N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ug=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var tt="WebChannelConnection",$g=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Tp(),c=this.bo(n,r.toUriEncodedString());w("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,c,u,i).then(l=>(w("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Nt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=$N[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Tp();return new Promise((s,a)=>{let c=new Hw;c.setWithCredentials(!0),c.listenOnce(Uw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mu.NO_ERROR:let l=c.getResponseJson();w(tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Mu.TIMEOUT:w(tt,`RPC '${e}' ${o} timed out`),a(new v(g.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:let d=c.getStatus();if(w(tt,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);let h=f?.error;if(h&&h.status&&h.message){let y=function(x){let b=x.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(b)>=0?b:g.UNKNOWN}(h.status);a(new v(y,h.message))}else a(new v(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new v(g.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{w(tt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);w(tt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Tp(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jw(),a=Bw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");w(tt,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),f=!1,h=!1,y=new Ug({lo:x=>{h?w(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(w(tt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),w(tt,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},ho:()=>d.close()}),_=(x,b,M)=>{x.listen(b,D=>{try{M(D)}catch(N){setTimeout(()=>{throw N},0)}})};return _(d,Os.EventType.OPEN,()=>{h||w(tt,`RPC '${e}' stream ${i} transport opened.`)}),_(d,Os.EventType.CLOSE,()=>{h||(h=!0,w(tt,`RPC '${e}' stream ${i} transport closed`),y.Vo())}),_(d,Os.EventType.ERROR,x=>{h||(h=!0,Nt(tt,`RPC '${e}' stream ${i} transport errored:`,x),y.Vo(new v(g.UNAVAILABLE,"The operation could not be completed")))}),_(d,Os.EventType.MESSAGE,x=>{var b;if(!h){let M=x.data[0];S(!!M);let D=M,N=D.error||((b=D[0])===null||b===void 0?void 0:b.error);if(N){w(tt,`RPC '${e}' stream ${i} received error:`,N);let R=N.status,U=function(Zl){let w_=De[Zl];if(w_!==void 0)return Tb(w_)}(R),fe=N.message;U===void 0&&(U=g.INTERNAL,fe="Unknown error status: "+R+" with message "+N.message),h=!0,y.Vo(new v(U,fe)),d.close()}else w(tt,`RPC '${e}' stream ${i} received:`,M),y.mo(M)}}),_(a,$w.STAT_EVENT,x=>{x.stat===bp.PROXY?w(tt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===bp.NOPROXY&&w(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}};function tI(){return typeof window<"u"?window:null}function ju(){return typeof document<"u"?document:null}function ya(t){return new og(t,!0)}var aa=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&w("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var xl=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new aa(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Ee(n.toString()),Ee("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new v(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Hg=class extends xl{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=DN(this.serializer,e),r=function(o){if(!("targetChange"in o))return P.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?P.min():s.readTime?Ie(s.readTime):P.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=cg(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Yu(c)?{documents:kb(o,c)}:{query:Fb(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Sb(o,s.resumeToken);let u=sg(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(P.min())>0){a.readTime=io(o,s.snapshotVersion.toTimestamp());let u=sg(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=AN(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=cg(this.serializer),n.removeTarget=e,this.t_(n)}},Gg=class extends xl{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(S(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=TN(e.writeResults,e.commitTime),r=Ie(e.commitTime);return this.listener.T_(r,n)}return S(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=cg(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ra(this.serializer,r))};this.t_(n)}};var qg=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,ag(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new v(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,ag(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new v(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var zg=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ee(n),this.g_=!1):w("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Wg=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>m(this,null,function*(){yr(this)&&(w("RemoteStore","Restarting streams for network reachability change."),yield function(c){return m(this,null,function*(){let u=C(c);u.v_.add(4),yield _o(u),u.x_.set("Unknown"),u.v_.delete(4),yield xa(u)})}(this))}))}),this.x_=new zg(r,i)}};function xa(t){return m(this,null,function*(){if(yr(t))for(let e of t.F_)yield e(!0)})}function _o(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Ll(t,e){let n=C(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Lm(n)?Vm(n):xo(n).Jo()&&Fm(n,e))}function ca(t,e){let n=C(t),r=xo(n);n.C_.delete(e),r.Jo()&&nI(n,e),n.C_.size===0&&(r.Jo()?r.Xo():yr(n)&&n.x_.set("Unknown"))}function Fm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(P.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).c_(e)}function nI(t,e){t.O_.Oe(e),xo(t).l_(e)}function Vm(t){t.O_=new ig({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.x_.p_()}function Lm(t){return yr(t)&&!xo(t).Ho()&&t.C_.size>0}function yr(t){return C(t).v_.size===0}function rI(t){t.O_=void 0}function HN(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{Fm(t,e)})})}function GN(t,e){return m(this,null,function*(){rI(t),Lm(t)?(t.x_.S_(e),Vm(t)):t.x_.set("Unknown")})}function qN(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof el&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vl(t,r)}else if(e instanceof Zi?t.O_.$e(e):e instanceof Ju?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(P.min()))try{let r=yield Yb(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.C_.get(u);l&&o.C_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.C_.get(c);if(!l)return;o.C_.set(c,l.withResumeToken(Ve.EMPTY_BYTE_STRING,l.snapshotVersion)),nI(o,c);let d=new oo(l.target,c,u,l.sequenceNumber);Fm(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){w("RemoteStore","Failed to raise snapshot:",r),yield vl(t,r)}})}function vl(t,e,n){return m(this,null,function*(){if(!_r(e))throw e;t.v_.add(1),yield _o(t),t.x_.set("Offline"),n||(n=()=>Yb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){w("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield xa(t)}))})}function iI(t,e){return e().catch(n=>vl(t,n,e))}function yo(t){return m(this,null,function*(){let e=C(t),n=gr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;zN(e);)try{let i=yield jN(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,WN(e,i)}catch(i){yield vl(e,i)}oI(e)&&sI(e)})}function zN(t){return yr(t)&&t.D_.length<10}function WN(t,e){t.D_.push(e);let n=gr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function oI(t){return yr(t)&&!gr(t).Ho()&&t.D_.length>0}function sI(t){gr(t).start()}function KN(t){return m(this,null,function*(){gr(t).d_()})}function QN(t){return m(this,null,function*(){let e=gr(t);for(let n of t.D_)e.I_(n.mutations)})}function YN(t,e,n){return m(this,null,function*(){let r=t.D_.shift(),i=tg.from(r,e,n);yield iI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yo(t)})}function ZN(t,e){return m(this,null,function*(){e&&gr(t).P_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return Db(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();gr(r).Zo(),yield iI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield yo(r)}})}(t,e)),oI(t)&&sI(t)})}function kE(t,e){return m(this,null,function*(){let n=C(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");let r=yr(n);n.v_.add(3),yield _o(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield xa(n)})}function Kg(t,e){return m(this,null,function*(){let n=C(t);e?(n.v_.delete(2),yield xa(n)):e||(n.v_.add(2),yield _o(n),n.x_.set("Unknown"))})}function xo(t){return t.N_||(t.N_=function(n,r,i){let o=C(n);return o.R_(),new Hg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:HN.bind(null,t),To:GN.bind(null,t),u_:qN.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),Lm(t)?Vm(t):t.x_.set("Unknown")):(yield t.N_.stop(),rI(t))}))),t.N_}function gr(t){return t.B_||(t.B_=function(n,r,i){let o=C(n);return o.R_(),new Gg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:KN.bind(null,t),To:ZN.bind(null,t),E_:QN.bind(null,t),T_:YN.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield yo(t)):(yield t.B_.stop(),t.D_.length>0&&(w("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var Qg=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Se,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new v(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vo(t,e){if(Ee("AsyncQueue",`${e}: ${t}`),_r(t))return new v(g.UNAVAILABLE,`${e}: ${t}`);throw t}var wl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||E.comparator(n.key,r.key):(n,r)=>E.comparator(n.key,r.key),this.keyedMap=Ls(),this.sortedSet=new de(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var El=class{constructor(){this.L_=new de(E.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):A():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},uo=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,wl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ma(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Yg=class{constructor(){this.q_=void 0,this.Q_=[]}},Zg=class{constructor(){this.queries=new En(e=>db(e),ma),this.onlineState="Unknown",this.K_=new Set}};function jm(t,e){return m(this,null,function*(){let n=C(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Yg),i)try{o.q_=yield n.onListen(r)}catch(s){let a=vo(s,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Um(n)})}function Bm(t,e){return m(this,null,function*(){let n=C(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function XN(t,e){let n=C(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&Um(n)}function JN(t,e,n){let r=C(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function Um(t){t.K_.forEach(e=>{e.next()})}var ua=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Xg=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var bl=class{constructor(e){this.serializer=e}Ps(e){return yn(this.serializer,e)}Is(e){return e.metadata.exists?Rb(this.serializer,e.document,!1):Me.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ie(e)}},Jg=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aI(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=Y.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new bl(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||$()).add(o);n.set(s,a)}}return n}complete(){return m(this,null,function*(){let e=yield BN(this.localStore,new bl(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield UN(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function aI(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Il=class{constructor(e){this.key=e}},Cl=class{constructor(e){this.key=e}},Dl=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=$(),this.mutatedKeys=$(),this.ua=hb(e),this.ca=new wl(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new El,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let f=i.get(l),h=_a(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations),x=!1;f&&h?f.data.isEqual(h.data)?y!==_&&(r.track({type:3,doc:h}),x=!0):this.Ia(f,h)||(r.track({type:2,doc:h}),x=!0,(c&&this.ua(h,c)>0||u&&this.ua(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),x=!0):f&&!h&&(r.track({type:1,doc:f}),x=!0,(c||u)&&(a=!0)),x&&(h?(s=s.add(h),o=_?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(h,y){let _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return _(h)-_(y)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,s.length!==0||u?{snapshot:new uo(this.query,e.ca,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new El,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=$(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Cl(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Il(r))}),n}Ra(e){this.oa=e.hs,this.aa=$();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return uo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},em=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},tm=class{constructor(e){this.key=e,this.ma=!1}},nm=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new En(a=>db(a),ma),this.pa=new Map,this.ya=new Set,this.wa=new de(E.comparator),this.Sa=new Map,this.ba=new oa,this.Da={},this.Ca=new Map,this.va=so.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function eO(t,e){return m(this,null,function*(){let n=zm(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield ao(n.localStore,ut(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield $m(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Ll(n.remoteStore,s)}return i})}function $m(t,e,n,r,i){return m(this,null,function*(){t.Ma=(d,f,h)=>function(_,x,b,M){return m(this,null,function*(){let D=x.view.ha(b);D.Xi&&(D=yield pl(_.localStore,x.query,!1).then(({documents:fe})=>x.view.ha(fe,D)));let N=M&&M.targetChanges.get(x.targetId),R=M&&M.targetMismatches.get(x.targetId)!=null,U=x.view.applyChanges(D,_.isPrimaryClient,N,R);return rm(_,x.targetId,U.da),U.snapshot})}(t,d,f,h);let o=yield pl(t.localStore,e,!0),s=new Dl(e,o.hs),a=s.ha(o.documents),c=ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);rm(t,n,u.da);let l=new em(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function tO(t,e){return m(this,null,function*(){let n=C(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!ma(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield co(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ca(n.remoteStore,r.targetId),lo(n,r.targetId)}).catch(mr))):(lo(n,r.targetId),yield co(n.localStore,r.targetId,!0))})}function nO(t,e,n){return m(this,null,function*(){let r=Wm(t);try{let i=yield function(s,a){let c=C(s),u=me.now(),l=a.reduce((h,y)=>h.add(y.key),$()),d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let y=mt(),_=$();return c.os.getEntries(h,l).next(x=>{y=x,y.forEach((b,M)=>{M.isValidDocument()||(_=_.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,y)).next(x=>{d=x;let b=[];for(let M of a){let D=xN(M,d.get(M.key).overlayedDocument);D!=null&&b.push(new Kt(M.key,D,ib(D.value.mapValue),we.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,b,a)}).next(x=>{f=x;let b=x.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(h,x.batchId,b)})}).then(()=>({batchId:f.batchId,changes:gb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Da[s.currentUser.toKey()];u||(u=new de(B)),u=u.insert(a,c),s.Da[s.currentUser.toKey()]=u}(r,i.batchId,n),yield $n(r,i.changes),yield yo(r.remoteStore)}catch(i){let o=vo(i,"Failed to persist write");n.reject(o)}})}function cI(t,e){return m(this,null,function*(){let n=C(t);try{let r=yield LN(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(S(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?S(s.ma):i.removedDocuments.size>0&&(S(s.ma),s.ma=!1))}),yield $n(n,r,e)}catch(r){yield mr(r)}})}function FE(t,e,n){let r=C(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=C(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let f of d.Q_)f.U_(a)&&(u=!0)}),u&&Um(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rO(t,e,n){return m(this,null,function*(){let r=C(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new de(E.comparator);s=s.insert(o,Me.newNoDocument(o,P.min()));let a=$().add(o),c=new ea(P.min(),new Map,new de(B),s,a);yield cI(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),qm(r)}else yield co(r.localStore,e,!1).then(()=>lo(r,e,n)).catch(mr)})}function iO(t,e){return m(this,null,function*(){let n=C(t),r=e.batch.batchId;try{let i=yield VN(n.localStore,e);Gm(n,r,null),Hm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $n(n,i)}catch(i){yield mr(i)}})}function oO(t,e,n){return m(this,null,function*(){let r=C(t);try{let i=yield function(s,a){let c=C(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(S(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);Gm(r,e,n),Hm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $n(r,i)}catch(i){yield mr(i)}})}function sO(t,e){return m(this,null,function*(){let n=C(t);yr(n.remoteStore)||w("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=C(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=vo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Hm(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Gm(t,e,n){let r=C(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function lo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||uI(t,r)})}function uI(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(ca(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),qm(t))}function rm(t,e,n){for(let r of n)r instanceof Il?(t.ba.addReference(r.key,e),aO(t,r)):r instanceof Cl?(w("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||uI(t,r.key)):A()}function aO(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(w("SyncEngine","New document in limbo: "+n),t.ya.add(r),qm(t))}function qm(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new E(Y.fromString(e)),r=t.va.next();t.Sa.set(r,new tm(n)),t.wa=t.wa.insert(n,r),Ll(t.remoteStore,new oo(ut(mo(n.path)),r,"TargetPurposeLimboResolution",xt._e))}}function $n(t,e,n){return m(this,null,function*(){let r=C(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Fg.Ki(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,u){return m(this,null,function*(){let l=C(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,f=>p.forEach(f.qi,h=>l.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>p.forEach(f.Qi,h=>l.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!_r(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let f=d.targetId;if(!d.fromCache){let h=l.ns.get(f),y=h.snapshotVersion,_=h.withLastLimboFreeSnapshotVersion(y);l.ns=l.ns.insert(f,_)}}})}(r.localStore,o))})}function cO(t,e){return m(this,null,function*(){let n=C(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());let r=yield Qb(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new v(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $n(n,r.us)}})}function uO(t,e){let n=C(t),r=n.Sa.get(e);if(r&&r.ma)return $().add(r.key);{let i=$(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function lO(t,e){return m(this,null,function*(){let n=C(t),r=yield pl(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&rm(n,e.targetId,i.da),i})}function dO(t,e){return m(this,null,function*(){let n=C(t);return Jb(n.localStore,e).then(r=>$n(n,r))})}function fO(t,e,n,r){return m(this,null,function*(){let i=C(t),o=yield function(a,c){let u=C(a),l=C(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,c).next(f=>f?u.localDocuments.getDocuments(d,f):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield yo(i.remoteStore):n==="acknowledged"||n==="rejected"?(Gm(i,e,r||null),Hm(i,e),function(a,c){C(C(a).mutationQueue).Mn(c)}(i.localStore,e)):A(),yield $n(i,o)):w("SyncEngine","Cannot apply mutation batch with id: "+e)})}function hO(t,e){return m(this,null,function*(){let n=C(t);if(zm(n),Wm(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield VE(n,r.toArray());n.Fa=!0,yield Kg(n.remoteStore,!0);for(let o of i)Ll(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(lo(n,s),co(n.localStore,s,!0))),ca(n.remoteStore,s)}),yield i,yield VE(n,r),function(s){let a=C(s);a.Sa.forEach((c,u)=>{ca(a.remoteStore,u)}),a.ba.mr(),a.Sa=new Map,a.wa=new de(E.comparator)}(n),n.Fa=!1,yield Kg(n.remoteStore,!1)}})}function VE(t,e,n){return m(this,null,function*(){let r=C(t),i=[],o=[];for(let s of e){let a,c=r.pa.get(s);if(c&&c.length!==0){a=yield ao(r.localStore,ut(c[0]));for(let u of c){let l=r.ga.get(u),d=yield lO(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield Xb(r.localStore,s);a=yield ao(r.localStore,u),yield $m(r,lI(u),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function lI(t){return lb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function pO(t){return function(n){return C(C(n).persistence).Li()}(C(t).localStore)}function gO(t,e,n,r){return m(this,null,function*(){let i=C(t);if(i.Fa)return void w("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield Jb(i.localStore,fb(o[0])),a=ea.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ve.EMPTY_BYTE_STRING);yield $n(i,s,a);break}case"rejected":yield co(i.localStore,e,!0),lo(i,e,r);break;default:A()}})}function mO(t,e,n){return m(this,null,function*(){let r=zm(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){w("SyncEngine","Adding an already active target "+i);continue}let o=yield Xb(r.localStore,i),s=yield ao(r.localStore,o);yield $m(r,lI(o),s.targetId,!1,s.resumeToken),Ll(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield co(r.localStore,i,!1).then(()=>{ca(r.remoteStore,i),lo(r,i)}).catch(mr))}})}function zm(t){let e=C(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rO.bind(null,e),e.fa.u_=XN.bind(null,e.eventManager),e.fa.xa=JN.bind(null,e.eventManager),e}function Wm(t){let e=C(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oO.bind(null,e),e}function _O(t,e,n){let r=C(t);(function(o,s,a){return m(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(h,y){let _=C(h),x=Ie(y.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",b=>_.$r.getBundleMetadata(b,y.id)).then(b=>!!b&&b.createTime.compareTo(x)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(aI(c));let u=new Jg(c,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let f=yield u.na(l);f&&a._updateProgress(f),l=yield s.Oa()}let d=yield u.complete();return yield $n(o,d.sa,void 0),yield function(h,y){let _=C(h);return _.persistence.runTransaction("Save bundle","readwrite",x=>_.$r.saveBundleMetadata(x,y))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(c){return Nt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var la=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=ya(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Kb(this.persistence,new hl,e.initialUser,this.serializer)}createPersistence(e){return new dl(fl.Hr,this.serializer)}createSharedClientState(e){return new _l}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Tl=class t extends la{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield Xl(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield Wm(this.Na.syncEngine),yield yo(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return Kb(this.persistence,new hl,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new wg(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new jp(n,this.persistence);return new Lp(e.asyncQueue,r)}createPersistence(e){let n=km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new kg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,tI(),ju(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _l}},im=class t extends Tl{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield Xl(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Gs&&(this.sharedClientState.syncEngine={Zs:fO.bind(null,n),Xs:gO.bind(null,n),eo:mO.bind(null,n),Li:pO.bind(null,n),Ys:dO.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>m(this,null,function*(){yield hO(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=tI();if(!Gs.D(n))throw new v(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gs(n,e.asyncQueue,r,e.clientId,e.initialUser)}},da=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,this.syncEngine),yield Kg(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Zg}()}createDatastore(e){let n=ya(e.databaseInfo.databaseId),r=function(o){return new $g(o)}(e.databaseInfo);return function(o,s,a,c){return new qg(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Wg(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>FE(this.syncEngine,n,0),function(){return yl.D()?new yl:new Bg}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new nm(i,o,s,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(r){return m(this,null,function*(){let i=C(r);w("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield _o(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function LE(t,e=10240){let n=0;return{read(){return m(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return m(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var fo=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ee("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var om=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Se,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return m(this,null,function*(){return this.metadata.promise})}Oa(){return m(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return m(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new Xg(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return m(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return m(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return m(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var sm=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new v(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return m(this,null,function*(){let s=C(i),a={documents:o.map(d=>na(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,Y.emptyPath(),a,o.length),u=new Map;c.forEach(d=>{let f=CN(s.serializer,d);u.set(f.key.toString(),f)});let l=[];return o.forEach(d=>{let f=u.get(d.toString());S(!!f),l.push(f)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=E.fromPath(r);this.mutations.push(new Zs(i,this.precondition(i)))}),yield function(r,i){return m(this,null,function*(){let o=C(r),s={writes:i.map(a=>ra(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,Y.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw A();n=P.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new v(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(P.min())?we.exists(!1):we.updateTime(n):we.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(P.min()))throw new v(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return we.updateTime(n)}return we.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var am=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new aa(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>m(this,null,function*(){let e=new sm(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!pa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Db(n)}return!1}};var cm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ae.UNAUTHENTICATED,this.clientId=$u.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>m(this,null,function*(){w("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(w("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Se;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bu(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield Qb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function um(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Km(t);w("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>kE(e.remoteStore,i)),t._onlineComponents=e})}function dI(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Km(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!dI(n))throw n;Nt("Error using user provided cache. Falling back to memory cache: "+n),yield Bu(t,new la)}}else w("FirestoreClient","Using default OfflineComponentProvider"),yield Bu(t,new la);return t._offlineComponents})}function jl(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),yield um(t,t._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),yield um(t,new da))),t._onlineComponents})}function fI(t){return Km(t).then(e=>e.persistence)}function Qm(t){return Km(t).then(e=>e.localStore)}function hI(t){return jl(t).then(e=>e.remoteStore)}function Ym(t){return jl(t).then(e=>e.syncEngine)}function yO(t){return jl(t).then(e=>e.datastore)}function ho(t){return m(this,null,function*(){let e=yield jl(t),n=e.eventManager;return n.onListen=eO.bind(null,e.syncEngine),n.onUnlisten=tO.bind(null,e.syncEngine),n})}function xO(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield fI(t),n=yield hI(t);return e.setNetworkEnabled(!0),function(i){let o=C(i);return o.v_.delete(0),xa(o)}(n)}))}function vO(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield fI(t),n=yield hI(t);return e.setNetworkEnabled(!1),function(i){return m(this,null,function*(){let o=C(i);o.v_.add(0),yield _o(o),o.x_.set("Offline")})}(n)}))}function wO(t,e){let n=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield function(u,l){let d=C(u);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new v(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=vo(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Qm(t),e,n)})),n.promise}function pI(t,e,n={}){let r=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,c,u){let l=new fo({next:f=>{s.enqueueAndForget(()=>Bm(o,d));let h=f.docs.has(a);!h&&f.fromCache?u.reject(new v(g.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&c&&c.source==="server"?u.reject(new v(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new ua(mo(a.path),l,{includeMetadataChanges:!0,Z_:!0});return jm(o,d)}(yield ho(t),t.asyncQueue,e,n,r)})),r.promise}function EO(t,e){let n=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield pl(i,o,!0),c=new Dl(o,a.hs),u=c.ha(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=vo(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Qm(t),e,n)})),n.promise}function gI(t,e,n={}){let r=new Se;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,c,u){let l=new fo({next:f=>{s.enqueueAndForget(()=>Bm(o,d)),f.fromCache&&c.source==="server"?u.reject(new v(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new ua(a,l,{includeMetadataChanges:!0,Z_:!0});return jm(o,d)}(yield ho(t),t.asyncQueue,e,n,r)})),r.promise}function bO(t,e){let n=new fo(e);return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){C(i).K_.add(o),o.next()}(yield ho(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){C(i).K_.delete(o)}(yield ho(t),n)}))}}function IO(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?Ab().encode(s):s,function(l,d){return new om(l,d)}(function(l,d){if(l instanceof Uint8Array)return LE(l,d);if(l instanceof ArrayBuffer)return LE(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,ya(e));t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){_O(yield Ym(t),i,r)}))}function CO(t,e){return t.asyncQueue.enqueue(()=>m(this,null,function*(){return function(r,i){let o=C(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Qm(t),e)}))}function mI(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var jE=new Map;function Zm(t,e,n){if(!n)throw new v(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Xm(t,e,n,r){if(e===!0&&r===!0)throw new v(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BE(t){if(!E.isDocumentKey(t))throw new v(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UE(t){if(E.isDocumentKey(t))throw new v(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":A()}function Z(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new v(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Bl(t);throw new v(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _I(t,e){if(e<=0)throw new v(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Al=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new v(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new v(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ni=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Al({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new v(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Al(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ap;switch(r.type){case"firstParty":return new Np(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new v(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=jE.get(n);r&&(w("ComponentProvider","Removing Datastore"),jE.delete(n),r.terminate())}(this),Promise.resolve()}};function yI(t,e,n,r={}){var i;let o=(t=Z(t,ni))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Nt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ae.MOCK_USER;else{a=D_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new v(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ae(u)}t._authCredentials=new Sp(new Uu(a,c))}}var He=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ce=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},xn=class t extends He{constructor(e,n,r){super(e,n,mo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ce(this.firestore,null,new E(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Jm(t,e,...n){if(t=ge(t),Zm("collection","path",e),t instanceof ni){let r=Y.fromString(e,...n);return UE(r),new xn(t,null,r)}{if(!(t instanceof ce||t instanceof xn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Y.fromString(e,...n));return UE(r),new xn(t.firestore,null,r)}}function xI(t,e){if(t=Z(t,ni),Zm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new He(t,null,function(r){return new Wt(Y.emptyPath(),r)}(e))}function va(t,e,...n){if(t=ge(t),arguments.length===1&&(e=$u.newId()),Zm("doc","path",e),t instanceof ni){let r=Y.fromString(e,...n);return BE(r),new ce(t,null,new E(r))}{if(!(t instanceof ce||t instanceof xn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Y.fromString(e,...n));return BE(r),new ce(t.firestore,t instanceof xn?t.converter:null,new E(r))}}function e_(t,e){return t=ge(t),e=ge(e),(t instanceof ce||t instanceof xn)&&(e instanceof ce||e instanceof xn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function t_(t,e){return t=ge(t),e=ge(e),t instanceof He&&e instanceof He&&t.firestore===e.firestore&&ma(t._query,e._query)&&t.converter===e.converter}var lm=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new aa(this,"async_queue_retry"),this._u=()=>{let n=ju();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=ju();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Se;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!_r(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ee("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=Qg.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&A()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function dm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var fm=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Se,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var vI=-1,pe=class extends ni{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new lm}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wI(this),this._firestoreClient.terminate()}};function Pe(t){return t._firestoreClient||wI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wI(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new Bp(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,mI(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new cm(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function EI(t,e){PI(t=Z(t,pe));let n=Pe(t);if(n._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");Nt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new da;return II(n,i,new Tl(i,r.cacheSizeBytes,e?.forceOwnership))}function bI(t){PI(t=Z(t,pe));let e=Pe(t);if(e._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");Nt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new da;return II(e,r,new im(r,n.cacheSizeBytes))}function II(t,e,n){let r=new Se;return t.asyncQueue.enqueue(()=>m(this,null,function*(){try{yield Bu(t,n),yield um(t,e),r.resolve()}catch(i){let o=i;if(!dI(o))throw o;Nt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function CI(t){if(t._initialized&&!t._terminated)throw new v(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Se;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{yield function(r){return m(this,null,function*(){if(!Vn.D())return Promise.resolve();let i=r+"main";yield Vn.delete(i)})}(km(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function DI(t){return function(n){let r=new Se;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return sO(yield Ym(n),r)})),r.promise}(Pe(t=Z(t,pe)))}function TI(t){return xO(Pe(t=Z(t,pe)))}function AI(t){return vO(Pe(t=Z(t,pe)))}function SI(t,e){let n=Pe(t=Z(t,pe)),r=new fm;return IO(n,t._databaseId,e,r),r}function MI(t,e){return CO(Pe(t=Z(t,pe)),e).then(n=>n?new He(t,null,n.query):null)}function PI(t){if(t._initialized||t._terminated)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ve.fromBase64String(e))}catch(n){throw new v(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new v(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bn=class{constructor(e){this._methodName=e}};var ri=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new v(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new v(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return B(this._lat,e._lat)||B(this._long,e._long)}};var DO=/^__.*__$/,hm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms):new hr(e,this.data,n,this.fieldTransforms)}},Sl=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function NI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}var Ml=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Pl(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(NI(this.du)&&DO.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},pm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ya(e)}Su(e,n,r,i=!1){return new Ml({du:e,methodName:n,wu:r,path:be.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ai(t){let e=t._freezeSettings(),n=ya(t._databaseId);return new pm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ul(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);i_("Data must be an object, but it was:",s,r);let a=kI(r,s),c,u;if(o.merge)c=new vt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let f=xm(e,d,n);if(!s.contains(f))throw new v(g.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);VI(l,f)||l.push(f)}c=new vt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new hm(new nt(a),c,u)}var fa=class t extends Bn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function OI(t,e,n){return new Ml({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var gm=class t extends Bn{_toFieldTransform(e){return new Jr(e.path,new dr)}isEqual(e){return e instanceof t}},mm=class t extends Bn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=OI(this,e,!0),r=this.bu.map(o=>ci(o,n)),i=new Ln(r);return new Jr(e.path,i)}isEqual(e){return e instanceof t&&td(this.bu,e.bu)}},_m=class t extends Bn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=OI(this,e,!0),r=this.bu.map(o=>ci(o,n)),i=new jn(r);return new Jr(e.path,i)}isEqual(e){return e instanceof t&&td(this.bu,e.bu)}},ym=class t extends Bn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new fr(e.serializer,xb(e.serializer,this.Du));return new Jr(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function n_(t,e,n,r){let i=t.Su(1,e,n);i_("Data must be an object, but it was:",i,r);let o=[],s=nt.empty();si(r,(c,u)=>{let l=o_(e,c,n);u=ge(u);let d=i.fu(l);if(u instanceof fa)o.push(l);else{let f=ci(u,d);f!=null&&(o.push(l),s.set(l,f))}});let a=new vt(o);return new Sl(s,a,i.fieldTransforms)}function r_(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[xm(e,r,n)],c=[i];if(o.length%2!=0)throw new v(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(xm(e,o[f])),c.push(o[f+1]);let u=[],l=nt.empty();for(let f=a.length-1;f>=0;--f)if(!VI(u,a[f])){let h=a[f],y=c[f];y=ge(y);let _=s.fu(h);if(y instanceof fa)u.push(h);else{let x=ci(y,_);x!=null&&(u.push(h),l.set(h,x))}}let d=new vt(u);return new Sl(l,d,s.fieldTransforms)}function RI(t,e,n,r=!1){return ci(n,t.Su(r?4:3,e))}function ci(t,e){if(FI(t=ge(t)))return i_("Unsupported field value:",e,t),kI(t,e);if(t instanceof Bn)return function(r,i){if(!NI(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=ci(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=me.fromDate(r);return{timestampValue:io(i.serializer,o)}}if(r instanceof me){let o=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:io(i.serializer,o)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bn)return{bytesValue:Sb(i.serializer,r._byteString)};if(r instanceof ce){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Bl(r)}`)}(t,e)}function kI(t,e){let n={};return tb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,i)=>{let o=ci(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof ri||t instanceof bn||t instanceof ce||t instanceof Bn)}function i_(t,e,n){if(!FI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Bl(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function xm(t,e,n){if((e=ge(e))instanceof Qt)return e._internalPath;if(typeof e=="string")return o_(t,e);throw Pl("Field path arguments must be of type string or ",t,!1,void 0,n)}var TO=new RegExp("[~\\*/\\[\\]]");function o_(t,e,n){if(e.search(TO)>=0)throw Pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qt(...e.split("."))._internalPath}catch{throw Pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pl(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new v(g.INVALID_ARGUMENT,a+t+c)}function VI(t,e){return t.some(n=>n.isEqual(e))}var ii=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($l("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vm=class extends ii{data(){return super.data()}};function $l(t,e){return typeof e=="string"?o_(t,e):e instanceof Qt?e._internalPath:e._delegate._internalPath}function LI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new v(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ha=class{},oi=class extends ha{};function Hn(t,e,...n){let r=[];e instanceof ha&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof wm).length,a=o.filter(c=>c instanceof Nl).length;if(s>1||s>0&&a>0)throw new v(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Nl=class t extends oi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return KI(e._query,n),new He(e.firestore,e.converter,Jp(e._query,n))}_parse(e){let n=ai(e.firestore);return function(o,s,a,c,u,l,d){let f;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new v(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){HE(d,l);let h=[];for(let y of d)h.push($E(c,o,y));f={arrayValue:{values:h}}}else f=$E(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||HE(d,l),f=RI(a,s,d,l==="in"||l==="not-in");return q.create(u,l,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function jI(t,e,n){let r=e,i=$l("where",t);return Nl._create(i,r,n)}var wm=class t extends ha{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:re.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)KI(s,c),s=Jp(s,c)}(e._query,n),new He(e.firestore,e.converter,Jp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Em=class t extends oi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zr(o,s)}(e._query,this._field,this._direction);return new He(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function BI(t,e="asc"){let n=e,r=$l("orderBy",t);return Em._create(r,n)}var Ol=class t extends oi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new He(e.firestore,e.converter,Xu(e._query,this._limit,this._limitType))}};function UI(t){return _I("limit",t),Ol._create("limit",t,"F")}function $I(t){return _I("limitToLast",t),Ol._create("limitToLast",t,"L")}var Rl=class t extends oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=WI(e,this.type,this._docOrFields,this._inclusive);return new He(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function HI(...t){return Rl._create("startAt",t,!0)}function GI(...t){return Rl._create("startAfter",t,!1)}var kl=class t extends oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=WI(e,this.type,this._docOrFields,this._inclusive);return new He(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function qI(...t){return kl._create("endBefore",t,!1)}function zI(...t){return kl._create("endAt",t,!0)}function WI(t,e,n,r){if(n[0]=ge(n[0]),n[0]instanceof ii)return function(o,s,a,c,u){if(!c)throw new v(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Yi(o))if(d.field.isKeyField())l.push(Yr(s,c.key));else{let f=c.data.field(d.field);if(Vl(f))throw new v(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){let h=d.field.canonicalString();throw new v(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}l.push(f)}return new wn(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ai(t.firestore);return function(s,a,c,u,l,d){let f=s.explicitOrderBy;if(l.length>f.length)throw new v(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let h=[];for(let y=0;y<l.length;y++){let _=l[y];if(f[y].field.isKeyField()){if(typeof _!="string")throw new v(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!Mm(s)&&_.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);let x=s.path.child(Y.fromString(_));if(!E.isDocumentKey(x))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let b=new E(x);h.push(Yr(a,b))}else{let x=RI(c,u,_);h.push(x)}}return new wn(h,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function $E(t,e,n){if(typeof(n=ge(n))=="string"){if(n==="")throw new v(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mm(e)&&n.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Y.fromString(n));if(!E.isDocumentKey(r))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yr(t,new E(r))}if(n instanceof ce)return Yr(t,n._key);throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bl(n)}.`)}function HE(t,e){if(!Array.isArray(t)||t.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KI(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var po=class{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw A()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return si(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ri(ve(e.latitude),ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ks(e));default:return null}}convertTimestamp(e){let n=ar(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Y.fromString(e);S(Bb(r));let i=new ur(r.get(1),r.get(3)),o=new E(r.popFirst(5));return i.isEqual(n)||Ee(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Hl(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var bm=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ce(this.firestore,null,n)}};var Fn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rt=class extends ii{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new or(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field($l("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},or=class extends Rt{data(e={}){return super.data(e)}},Yt=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new or(this._firestore,this._userDataWriter,r.key,r,new Fn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new v(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:AO(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function AO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}function s_(t,e){return t instanceof Rt&&e instanceof Rt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Yt&&e instanceof Yt&&t._firestore===e._firestore&&t_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function QI(t){t=Z(t,ce);let e=Z(t.firestore,pe);return pI(Pe(e),t._key).then(n=>l_(e,t,n))}var Un=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ce(this.firestore,null,n)}};function YI(t){t=Z(t,ce);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return wO(n,t._key).then(i=>new Rt(e,r,t._key,i,new Fn(i!==null&&i.hasLocalMutations,!0),t.converter))}function ZI(t){t=Z(t,ce);let e=Z(t.firestore,pe);return pI(Pe(e),t._key,{source:"server"}).then(n=>l_(e,t,n))}function XI(t){t=Z(t,He);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return LI(t._query),gI(n,t._query).then(i=>new Yt(e,r,t,i))}function JI(t){t=Z(t,He);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return EO(n,t._query).then(i=>new Yt(e,r,t,i))}function eC(t){t=Z(t,He);let e=Z(t.firestore,pe),n=Pe(e),r=new Un(e);return gI(n,t._query,{source:"server"}).then(i=>new Yt(e,r,t,i))}function a_(t,e,n){t=Z(t,ce);let r=Z(t.firestore,pe),i=Hl(t.converter,e,n);return wo(r,[Ul(ai(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,we.none())])}function c_(t,e,n,...r){t=Z(t,ce);let i=Z(t.firestore,pe),o=ai(i),s;return s=typeof(e=ge(e))=="string"||e instanceof Qt?r_(o,"updateDoc",t._key,e,n,r):n_(o,"updateDoc",t._key,e),wo(i,[s.toMutation(t._key,we.exists(!0))])}function tC(t){return wo(Z(t.firestore,pe),[new pr(t._key,we.none())])}function nC(t,e){let n=Z(t.firestore,pe),r=va(t),i=Hl(t.converter,e);return wo(n,[Ul(ai(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,we.exists(!1))]).then(()=>r)}function u_(t,...e){var n,r,i;t=ge(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||dm(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(dm(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof ce)u=Z(t.firestore,pe),l=mo(t._key.path),c={next:d=>{e[s]&&e[s](l_(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=Z(t,He);u=Z(d.firestore,pe),l=d._query;let f=new Un(u);c={next:h=>{e[s]&&e[s](new Yt(u,f,d,h))},error:e[s+1],complete:e[s+2]},LI(t._query)}return function(f,h,y,_){let x=new fo(_),b=new ua(h,x,y);return f.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return jm(yield ho(f),b)})),()=>{x.La(),f.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Bm(yield ho(f),b)}))}}(Pe(u),l,a,c)}function rC(t,e){return bO(Pe(t=Z(t,pe)),dm(e)?e:{next:e})}function wo(t,e){return function(r,i){let o=new Se;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return nO(yield Ym(r),i,o)})),o.promise}(Pe(t),e)}function l_(t,e,n){let r=n.docs.get(e._key),i=new Un(t);return new Rt(t,i,e._key,r,new Fn(n.hasPendingWrites,n.fromCache),e.converter)}var SO={maxAttempts:5};var Fl=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ai(e)}set(e,n,r){this._verifyNotCommitted();let i=rr(e,this._firestore),o=Hl(i.converter,n,r),s=Ul(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,we.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=rr(e,this._firestore),s;return s=typeof(n=ge(n))=="string"||n instanceof Qt?r_(this._dataReader,"WriteBatch.update",o._key,n,r,i):n_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,we.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=rr(e,this._firestore);return this._mutations=this._mutations.concat(new pr(n._key,we.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new v(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rr(t,e){if((t=ge(t)).firestore!==e)throw new v(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Im=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ai(n)}get(n){let r=rr(n,this._firestore),i=new bm(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return A();let s=o[0];if(s.isFoundDocument())return new ii(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ii(this._firestore,i,r._key,null,r.converter);throw A()})}set(n,r,i){let o=rr(n,this._firestore),s=Hl(o.converter,r,i),a=Ul(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=rr(n,this._firestore),a;return a=typeof(r=ge(r))=="string"||r instanceof Qt?r_(this._dataReader,"Transaction.update",s._key,r,i,o):n_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=rr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=rr(e,this._firestore),r=new Un(this._firestore);return super.get(e).then(i=>new Rt(this._firestore,r,n._key,i._document,new Fn(!1,!1),n.converter))}};function iC(t,e,n){t=Z(t,pe);let r=Object.assign(Object.assign({},SO),n);return function(o){if(o.maxAttempts<1)throw new v(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Se;return o.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){let u=yield yO(o);new am(o.asyncQueue,u,a,s,c).ja()})),c.promise}(Pe(t),i=>e(new Im(t,i)),r)}function oC(){return new fa("deleteField")}function sC(){return new gm("serverTimestamp")}function aC(...t){return new mm("arrayUnion",t)}function cC(...t){return new _m("arrayRemove",t)}function uC(t){return new ym("increment",t)}(function(e,n=!0){(function(i){go=i})(S_),Do(new xr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new pe(new Mp(r.getProvider("auth-internal")),new Rp(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new v(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ur(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gn(qw,"4.4.1",e),Gn(qw,"4.4.1","esm2017")})();var MO="@firebase/firestore-compat",PO="0.3.24";function m_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new v("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function lC(){if(typeof Uint8Array>"u")throw new v("unimplemented","Uint8Arrays are not available in this environment.")}function dC(){if(!nb())throw new v("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Gl=class t{constructor(e){this._delegate=e}static fromBase64String(e){return dC(),new t(bn.fromBase64String(e))}static fromUint8Array(e){return lC(),new t(bn.fromUint8Array(e))}toBase64(){return dC(),this._delegate.toBase64()}toUint8Array(){return lC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function d_(t){return NO(t,["next","error","complete"])}function NO(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var f_=class{enableIndexedDbPersistence(e,n){return EI(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return bI(e._delegate)}clearIndexedDbPersistence(e){return CI(e._delegate)}},ql=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ur||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Nt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){yI(this._delegate,e,n,r)}enableNetwork(){return TI(this._delegate)}disableNetwork(){return AI(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Xm("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return DI(this._delegate)}onSnapshotsInSync(e){return rC(this._delegate,e)}get app(){if(!this._appCompat)throw new v("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Io(this,Jm(this._delegate,e))}catch(n){throw lt(n,"collection()","Firestore.collection()")}}doc(e){try{return new In(this,va(this._delegate,e))}catch(n){throw lt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fi(this,xI(this._delegate,e))}catch(n){throw lt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return iC(this._delegate,n=>e(new zl(this,n)))}batch(){return Pe(this._delegate),new Wl(new Fl(this._delegate,e=>wo(this._delegate,e)))}loadBundle(e){return SI(this._delegate,e)}namedQuery(e){return MI(this._delegate,e).then(n=>n?new fi(this,n):null)}},Eo=class extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(new bn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return In.forKey(n,this.firestore,null)}};function OO(t){GE(t)}var zl=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}get(e){let n=ui(e);return this._delegate.get(n).then(r=>new li(this._firestore,new Rt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ui(e);return r?(m_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ui(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ui(e);return this._delegate.delete(n),this}},Wl=class{constructor(e){this._delegate=e}set(e,n,r){let i=ui(e);return r?(m_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ui(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ui(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},bo=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new or(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new di(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Eo(e),n),i.set(n,o)),o}};bo.INSTANCES=new WeakMap;var In=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}static forPath(e,n,r){if(e.length%2!==0)throw new v("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ce(n._delegate,r,new E(e)))}static forKey(e,n,r){return new t(n,new ce(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Io(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Io(this.firestore,Jm(this._delegate,e))}catch(n){throw lt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ge(e),e instanceof ce?e_(this._delegate,e):!1}set(e,n){n=m_("DocumentReference.set",n);try{return n?a_(this._delegate,e,n):a_(this._delegate,e)}catch(r){throw lt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?c_(this._delegate,e):c_(this._delegate,e,n,...r)}catch(i){throw lt(i,"updateDoc()","DocumentReference.update()")}}delete(){return tC(this._delegate)}onSnapshot(...e){let n=fC(e),r=hC(e,i=>new li(this.firestore,new Rt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return u_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=YI(this._delegate):e?.source==="server"?n=ZI(this._delegate):n=QI(this._delegate),n.then(r=>new li(this.firestore,new Rt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function lt(t,e,n){return t.message=t.message.replace(e,n),t}function fC(t){for(let e of t)if(typeof e=="object"&&!d_(e))return e;return{}}function hC(t,e){var n,r;let i;return d_(t[0])?i=t[0]:d_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var li=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new In(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return s_(this._delegate,e._delegate)}},di=class extends li{data(e){let n=this._delegate.data(e);return this._delegate._converter||qE(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},fi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eo(e)}where(e,n,r){try{return new t(this.firestore,Hn(this._delegate,jI(e,n,r)))}catch(i){throw lt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Hn(this._delegate,BI(e,n)))}catch(r){throw lt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Hn(this._delegate,UI(e)))}catch(n){throw lt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Hn(this._delegate,$I(e)))}catch(n){throw lt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Hn(this._delegate,HI(...e)))}catch(n){throw lt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Hn(this._delegate,GI(...e)))}catch(n){throw lt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Hn(this._delegate,qI(...e)))}catch(n){throw lt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Hn(this._delegate,zI(...e)))}catch(n){throw lt(n,"endAt()","Query.endAt()")}}isEqual(e){return t_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=JI(this._delegate):e?.source==="server"?n=eC(this._delegate):n=XI(this._delegate),n.then(r=>new wa(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=fC(e),r=hC(e,i=>new wa(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return u_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},h_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new di(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},wa=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new di(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new h_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new di(this._firestore,r))})}isEqual(e){return s_(this._delegate,e._delegate)}},Io=class t extends fi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new In(this.firestore,e):null}doc(e){try{return e===void 0?new In(this.firestore,va(this._delegate)):new In(this.firestore,va(this._delegate,e))}catch(n){throw lt(n,"doc()","CollectionReference.doc()")}}add(e){return nC(this._delegate,e).then(n=>new In(this.firestore,n))}isEqual(e){return e_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ui(t){return Z(t,ce)}var p_=class t{constructor(...e){this._delegate=new Qt(...e)}static documentId(){return new t(be.keyField().canonicalString())}isEqual(e){return e=ge(e),e instanceof Qt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var g_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=sC();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=oC();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=aC(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=cC(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=uC(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var RO={Firestore:ql,GeoPoint:ri,Timestamp:me,Blob:Gl,Transaction:zl,WriteBatch:Wl,DocumentReference:In,DocumentSnapshot:li,Query:fi,QueryDocumentSnapshot:di,QuerySnapshot:wa,CollectionReference:Io,FieldPath:p_,FieldValue:g_,setLogLevel:OO,CACHE_SIZE_UNLIMITED:vI};function kO(t,e){t.INTERNAL.registerComponent(new xr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},RO)))}function FO(t){kO(t,(e,n)=>new ql(e,n,new f_)),t.registerVersion(MO,PO)}FO(dt);function VO(t,e=Mo){return new ue(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function pC(t,e){return VO(t,e)}function LO(t,e){return pC(t,e).pipe(Oo(void 0),Po(),Ce(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function x_(t,e){return pC(t,e).pipe(Ce(n=>({payload:n,type:"query"})))}var Kl=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=xC(r,n);return new Yl(i,o,this.afs)}snapshotChanges(){return LO(this.ref,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return this.snapshotChanges().pipe(Ce(({payload:n})=>e.idField?Et(rt({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return it(this.ref.get(e)).pipe(gt)}};function Ql(t,e){return x_(t,e).pipe(Oo(void 0),Po(),Ce(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function gC(t,e,n){return Ql(t,n).pipe(No((r,i)=>jO(r,i.map(o=>o.payload),e),[]),xd(),Ce(r=>r.map(i=>({type:i.type,payload:i}))))}function jO(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=BO(t,r))}),t}function __(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function BO(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return __(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return __(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return __(t,e.oldIndex,1);break}return t}function mC(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Yl=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Ql(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ce(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Oo(void 0),Po(),zn(([r,i])=>i.length>0||!r),Ce(([,r])=>r),gt)}auditTrail(e){return this.stateChanges(e).pipe(No((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=mC(e);return gC(this.query,n,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.payload.docs.map(r=>e.idField?Et(rt({},r.data()),{[e.idField]:r.id}):r.data())),gt)}get(e){return it(this.query.get(e)).pipe(gt)}add(e){return this.ref.add(e)}doc(e){return new Kl(this.ref.doc(e),this.afs)}},y_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Ql(this.query,this.afs.schedulers.outsideAngular).pipe(gt):Ql(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.filter(r=>e.indexOf(r.type)>-1)),zn(n=>n.length>0),gt)}auditTrail(e){return this.stateChanges(e).pipe(No((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=mC(e);return gC(this.query,n,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(r=>r.payload.docs.map(i=>e.idField?rt({[e.idField]:i.id},i.data()):i.data())),gt)}get(e){return it(this.query.get(e)).pipe(gt)}},_C=new F("angularfire2.enableFirestorePersistence"),yC=new F("angularfire2.firestore.persistenceSettings"),UO=new F("angularfire2.firestore.settings"),$O=new F("angularfire2.firestore.use-emulator");function xC(t,e=n=>n){return{query:e(t),ref:t}}var v_=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,f,h,y,_,x,b,M){this.schedulers=c;let D=ls(n,a,r),N=l;d&&Oh(D,a,f,y,_,x,h,b),[this.firestore,this.persistenceEnabled$]=tu(`${D.name}.firestore`,"AngularFirestore",D.name,()=>{let R=a.runOutsideAngular(()=>D.firestore());if(o&&R.settings(o),N&&R.useEmulator(...N),i&&!Rr(s)){let U=()=>{try{return it(R.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(fe){return typeof console<"u"&&console.warn(fe),Tn(!1)}};return[R,a.runOutsideAngular(U)]}else return[R,Tn(!1)]},[o,N,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=xC(i,r),a=this.schedulers.ngZone.run(()=>o);return new Yl(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new y_(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Kl(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(T(Pi),T(Ni,8),T(_C,8),T(UO,8),T(Dt),T(ie),T(Xc),T(yC,8),T($O,8),T(bv,8),T(Th,8),T(Ah,8),T(Sh,8),T(Mh,8),T(Ph,8),T(Nh,8),T(kr,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),vC=(()=>{class t{constructor(){dt.registerVersion("angularfire",Mi.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:_C,useValue:!0},{provide:yC,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=Ke({providers:[v_]})}return t})();var Cn=(()=>{let e=class e{constructor(){this.Array_Tabs=[{Tab_Name:"\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",icon:"assets/img/home.png",Active:!0},{Tab_Name:"\u0627\u0644\u0633\u0644\u0629",icon:"assets/img/cart.png",Active:!1},{Tab_Name:"\u0627\u0644\u0645\u0646\u064A\u0648",icon:"assets/img/cart.png",Active:!1,hidden:!0}],this.Array_Order=[],this.All_Menu=[{Name:"\u0627\u0644\u0628\u0631\u062C\u0640\u0640\u0640\u0631",Image:"assets/img/burger.png",Items:[{id:1,item_Name:"\u0628\u0631\u062C\u0631 \u0643\u0644\u0627\u0633\u064A\u0643",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:65},{Size:"M",Price:45},{Size:"L",Price:35}]},{id:3,item_Name:"\u0628\u0631\u062C\u0631 \u0645\u064A\u0643\u0633 \u062A\u0634\u064A\u0632",item_Detail:"\u062A\u0634\u064A\u0632 \u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0635\u0648\u0635 \u062C\u0628\u0646\u0629 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:70},{Size:"M",Price:50},{Size:"L",Price:40}]},{id:4,item_Name:"\u0628\u0631\u062C\u0631 \u062D\u0644\u0642\u0627\u062A \u0628\u0635\u0644",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u062D\u0644\u0642\u0627\u062A \u0628\u0635\u0644 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:70},{Size:"M",Price:50},{Size:"L",Price:40}]},{id:5,item_Name:"\u0628\u0631\u062D\u0631 \u0628\u064A\u0636",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0628\u064A\u0636 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:70},{Size:"M",Price:50},{Size:"L",Price:40}]},{id:6,item_Name:"\u0628\u0631\u062C\u0631 \u0645\u0634\u0631\u0648\u0645",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u0645\u0634\u0631\u0648\u0645 - \u0628\u0635\u0644 \u0645\u0643\u0631\u0645\u0644 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:75},{Size:"M",Price:50},{Size:"L",Price:45}]},{id:7,item_Name:"\u0628\u0631\u062C\u0631 \u0645\u0648\u0632\u0631\u064A\u0644\u0627 \u0633\u062A\u064A\u0643\u0633",item_Detail:"\u0628\u064A\u0641 \u0628\u0631\u062C\u0631 - \u062E\u0636\u0627\u0631 \u0641\u0631\u064A\u0634 - \u0645\u0648\u0632\u0631\u064A\u0644\u0627 \u0633\u062A\u064A\u0643\u0633 - \u0635\u0648\u0635 \u062A\u064A\u0633\u062A\u064A",item_Price:[{Size:"D",Price:75},{Size:"M",Price:55},{Size:"L",Price:45}]}]},{Name:"\u0627\u0644\u0640\u0640\u0640\u0631\u0648\u0644",Image:"assets/img/roll-66.png",Items:[{id:1,item_Name:"\u0628\u0637\u0627\u0637\u0633 \u0631\u0648\u0648\u0644",item_Detail:"\u0628\u0637\u0627\u0637\u0633 - \u062E\u0636\u0627\u0631 \u0645\u062E\u0644\u0644 \u0645\u064A\u0643\u0633 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:20}]},{id:2,item_Name:"\u0633\u062C\u0642 \u062C\u0631\u064A\u0644",item_Detail:"\u0633\u062C\u0642 \u0645\u0634\u0648\u064A - \u0641\u0644\u0641\u0644 \u0648\u0628\u0635\u0644 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:23}]},{id:3,item_Name:"\u0628\u0637\u0627\u0637\u0633 \u0645\u0648\u0632\u0631\u064A\u0644\u0627 \u0631\u0648\u0648\u0644",item_Detail:"\u0628\u0637\u0627\u0637\u0633 - \u0645\u0648\u062A\u0632\u0631\u064A\u0644\u0627 - \u062E\u0636\u0627\u0631 \u0645\u062E\u0644\u0644 \u0645\u064A\u0643\u0633 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:25}]},{id:4,item_Name:"\u0647\u0648\u062A \u062F\u0648\u062C \u0645\u064A\u0643\u0633\u064A\u0643\u0627\u0646",item_Detail:"\u0647\u0648\u062A \u062F\u0648\u062C - \u062E\u0636\u0627\u0631 \u0645\u064A\u0643\u0633\u064A\u0643\u0627\u0646 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:25}]},{id:5,item_Name:"\u0628\u0637\u0627\u0637\u0633 \u0628\u0627\u0646\u064A\u0647 \u0631\u0648\u0648\u0644",item_Detail:"\u0628\u0627\u0646\u064A\u0647 - \u0628\u0637\u0627\u0637\u0633 - \u062E\u0636\u0627\u0631 \u0645\u064A\u0643\u0633\u064A\u0643\u0627\u0646 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:30}]},{id:6,item_Name:"\u0628\u0627\u0646\u064A\u0647 \u0631\u0648\u0648\u0644",item_Detail:"\u0628\u0627\u0646\u064A\u0647 - \u062E\u0636\u0627\u0631 \u0645\u064A\u0643\u0633\u064A\u0643\u0627\u0646 - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:33}]},{id:7,item_Name:"\u0641\u0627\u0647\u064A\u062A\u0627 \u0631\u0648\u0648\u0644",item_Detail:"\u0641\u0627\u0647\u064A\u062A\u0627 \u0641\u0631\u0627\u062E - \u0645\u064A\u0643\u0633 \u0635\u0648\u0635",item_Price:[{Size:"One Size",Price:35}]}]},{Name:"\u0627\u0644\u0645\u0642\u0628\u0644\u0627\u062A",Image:"assets/img/french-fries.png",Items:[{id:1,item_Name:"\u0637\u0628\u0642 \u0628\u0637\u0627\u0637\u0633",item_Detail:"",item_Price:[{Size:"One Size",Price:10}]},{id:2,item_Name:"\u0637\u0628\u0642 \u0628\u0637\u0627\u0637\u0633 \u0628\u0627\u0644\u062C\u0628\u0646\u0629",item_Detail:"",item_Price:[{Size:"One Size",Price:15}]},{id:3,item_Name:"\u062D\u0644\u0642\u0627\u062A \u0628\u0635\u0644",item_Detail:"",item_Price:[{Size:"One Size",Price:15}]},{id:4,item_Name:"\u0628\u0637\u0627\u0637\u0633 \u0628\u0627\u0646\u064A\u0647",item_Detail:"",item_Price:[{Size:"One Size",Price:20}]},{id:5,item_Name:"\u0645\u0648\u062A\u0632\u0631\u064A\u0644\u0627 \u0633\u062A\u064A\u0643\u0633",item_Detail:"",item_Price:[{Size:"One Size",Price:20}]}]},{Name:"\u0627\u0644\u062D\u0640\u0640\u0640\u0644\u0648",Image:"assets/img/cake.png",Items:[{id:1,item_Name:"\u0627\u0644\u062D\u0644\u0648 \u0628\u0646\u062F\u0642",item_Detail:"\u0646\u0648\u062A\u064A\u0644\u0627 - \u0634\u0648\u0643\u0644\u0627\u062A\u0629 \u0628\u064A\u0636\u0629 - \u0633\u0648\u062F\u0627\u0646\u064A",item_Price:[{Size:"One Size",Price:10}]},{id:2,item_Name:"\u0633\u0643\u0644\u0627\u0646\u0633",item_Detail:"\u062D\u0644\u0627\u0648\u0629 \u0628\u0627\u0644\u0642\u0634\u0637\u0629",item_Price:[{Size:"One Size",Price:15}]},{id:3,item_Name:"\u0627\u0644\u062D\u0644\u0648 \u0628\u0632\u064A\u0627\u062F\u0629",item_Detail:"\u0646\u0648\u062A\u064A\u0644\u0627 - \u0634\u0643\u0648\u0644\u0627\u062A\u0647 \u0628\u064A\u0636\u0629 - \u0635\u0648\u0635 \u0643\u0631\u0627\u0645\u064A\u0644 - \u0623\u0648\u0631\u064A\u0648",item_Price:[{Size:"One Size",Price:20}]}]}]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GO(t,e){if(t&1){let n=Xe();k(0,"button",3),ye("click",function(){let o=Ye(n).$implicit,s=ee();return Ze(s.Open_Menu(o))}),_e(1,"img",4),te(2),O()}if(t&2){let n=e.$implicit;j(),st("src",n.Image,Nn),j(),Re(" ",n.Name," ")}}var wC=(()=>{let e=class e{constructor(r){this.Serv_=r}get All_Menu(){return this.Serv_.All_Menu}Open_Menu(r){this.Serv_.Selected_Menu_Name=r.Name,this.Serv_.Array_Tabs.map(i=>{i.Active=!1}),this.Serv_.Array_Tabs.filter(i=>i.Tab_Name==="\u0627\u0644\u0645\u0646\u064A\u0648")[0].Active=!0}};e.\u0275fac=function(i){return new(i||e)(Oe(Cn))},e.\u0275cmp=un({type:e,selectors:[["app-page-home"]],decls:7,vars:0,consts:[["dir","rtl",1,"slide","slide1"],[1,"slide-head"],[1,"slide-body"],[3,"click"],[3,"src"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"div",1)(2,"h4"),te(3,"\u0627\u0644\u0642\u0648\u0627\u0626\u0645"),O()(),k(4,"div",2),At(5,GO,3,2,"button",null,Tt),O()()),i&2&&(j(5),St(o.All_Menu))},styles:[".slide1[_ngcontent-%COMP%]{padding:0 8px}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(0deg,#f6b825,#f6b8265e);outline:none;text-shadow:0px 1px 2px rgba(0,0,0,.425);font-weight:700;border:none;border-radius:16px;padding:22px 32px;color:#fff;font-size:14px;margin:25px 4px;width:50%;max-width:150px;cursor:pointer;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,#f6b725b7,#f6b82656)}.slide1[_ngcontent-%COMP%]   .slide-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:-55px 0 14px;width:74px;filter:drop-shadow(0px 10px 6px rgba(0,0,0,.2))}"]});let t=e;return t})();function zO(t,e){if(t&1){let n=Xe();k(0,"button",9),ye("click",function(){Ye(n);let i=ee().$implicit,o=ee().$implicit,s=ee();return Ze(s.Add_To_Trash_Order(o,i))}),te(1,"\u0627\u0636\u0641 \u0627\u0644\u064A \u0627\u0644\u0633\u0644\u0629"),O()}}function WO(t,e){if(t&1){let n=Xe();k(0,"div",13),ye("click",function(){Ye(n);let i=ee(2).$implicit,o=ee().$implicit,s=ee();return Ze(s.Remove_Ordered_Count_Object(o,i))}),_e(1,"img",14),O()}}function KO(t,e){if(t&1){let n=Xe();k(0,"div",15),ye("click",function(){Ye(n);let i=ee(2).$implicit,o=ee(2);return Ze(o.Subtract_Order_item(i))}),O()}}function QO(t,e){if(t&1){let n=Xe();k(0,"div",10)(1,"div",11),ye("click",function(){Ye(n);let i=ee().$implicit,o=ee().$implicit,s=ee();return Ze(s.Add_To_Trash_Order(o,i))}),O(),k(2,"label"),te(3),O(),ht(4,WO,2,0,"div",12)(5,KO,1,0),O()}if(t&2){let n=ee().$implicit;j(3),Qn(n.Ordered_Count==null?null:n.Ordered_Count.Count),j(),dn(4,(n.Ordered_Count==null?null:n.Ordered_Count.Count)==1?4:(n.Ordered_Count==null?null:n.Ordered_Count.Count)>1?5:-1)}}function YO(t,e){if(t&1&&(k(0,"div",8)(1,"h5"),te(2),O(),k(3,"span"),te(4),O(),ht(5,zO,2,0,"button")(6,QO,6,2),O()),t&2){let n=e.$implicit;j(2),Qn(n.Size),j(2),Re("",n.Price," \u062C.\u0645"),j(),dn(5,n.Ordered_Count?6:5)}}function ZO(t,e){if(t&1&&(k(0,"div",0)(1,"div",1),_e(2,"img",2),k(3,"div",3),te(4),O()(),k(5,"div",4)(6,"div",5)(7,"div",6),te(8),O()(),k(9,"div",7),At(10,YO,7,3,"div",16,Tt),O()()()),t&2){let n=e.$implicit,r=ee();j(2),is("src",r.Get_Array_Menu().Image,Nn),j(2),Re(" ",n.item_Name," "),j(4),Re(" ",n.item_Detail," "),j(2),St(n.item_Price)}}var EC=(()=>{let e=class e{constructor(r){this.Serv_=r}ngOnInit(){}get All_Menu(){return this.Serv_.All_Menu}get Selected_Menu_Name(){return this.Serv_.Selected_Menu_Name}Get_Array_Menu(){return this.All_Menu.filter(r=>r.Name===this.Selected_Menu_Name)[0]}Add_To_Trash_Order(r,i){i.Ordered_Count?i.Ordered_Count.Count++:i.Ordered_Count={Count:1};var o={id:r.id,item_Name:r.item_Name,item_Detail:r.item_Detail,Size:i.Size,item_Price:i,Menu_Name:this.Selected_Menu_Name};this.Serv_.Array_Order.findIndex(c=>c.id===o.id&&c.item_Name===o.item_Name&&c.Size===o.Size)!=-1||this.Serv_.Array_Order.push(o)}Subtract_Order_item(r){r.Ordered_Count.Count>1&&r.Ordered_Count.Count--}Remove_Ordered_Count_Object(r,i){if(i.Ordered_Count){delete i.Ordered_Count;let o=this.Serv_.Array_Order.findIndex(s=>s.id===r.id&&s.item_Name===r.item_Name&&s.Size===i.Size);this.Serv_.Array_Order.splice(o,1)}}};e.\u0275fac=function(i){return new(i||e)(Oe(Cn))},e.\u0275cmp=un({type:e,selectors:[["app-page-menu"]],decls:2,vars:0,consts:[["dir","rtl",1,"card-menu"],[1,"pic-price"],[3,"src"],[1,"item-title"],[1,"content"],[1,"detail"],[1,"detail-content"],[1,"price-list"],[1,"price-list-item"],[3,"click"],[1,"Changer"],[1,"Plus",3,"click"],["class","Remove"],[1,"Remove",3,"click"],["src","assets/img/trash.png","width","16"],[1,"Subtract",3,"click"],["class","price-list-item"],["class","card-menu","dir","rtl"]],template:function(i,o){i&1&&At(0,ZO,12,3,"div",17,Tt),i&2&&St(o.Get_Array_Menu().Items)},styles:['.container[_ngcontent-%COMP%]{padding:8px}.card-menu[_ngcontent-%COMP%]{background-color:#fff;margin:32px 6px;border-radius:12px;box-shadow:0 1px 6px #00000024;padding:16px 0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0 16px}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-35px;width:74px}.card-menu[_ngcontent-%COMP%]   .pic-price[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#ff6564;font-size:large;text-shadow:0px 1px 1px rgba(10,10,10,.0941176471);margin-top:6px;white-space:nowrap}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-evenly}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:4px 6px;padding:0 6px;flex:1}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#f19215;text-shadow:0px 1px 1px rgba(255,117,4,.3019607843)}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:small;color:#7d7d81}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row-reverse;width:100%;border-radius:6px;overflow:hidden;margin:8px 0}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{width:30%;text-align:center;font-size:x-large;position:relative}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%], .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%]{padding:20px 0;width:30%;text-align:center;font-size:x-large;position:relative;cursor:pointer}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after{content:"+";color:#fff}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{content:"-";color:#747474}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%]{background-color:#f19215}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%], .card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{background-color:#e0e0e0}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-list[_ngcontent-%COMP%]   .price-list-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center;justify-content:center;width:40%}.card-menu[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin:12px 0;font-size:small;text-align:center}button[_ngcontent-%COMP%]{margin:8px 0;outline:none;border-radius:8px;border:none;padding:10px 14px;background-color:#f8a528;color:#fff}']});let t=e;return t})();function JO(t,e){if(t&1){let n=Xe();k(0,"div",17),ye("click",function(){Ye(n);let i=ee().$implicit,o=ee();return Ze(o.Remove_Ordered(i))}),_e(1,"img",18),O()}}function eR(t,e){if(t&1){let n=Xe();k(0,"div",19),ye("click",function(){Ye(n);let i=ee().$implicit,o=ee();return Ze(o.Subtract_Order(i))}),O()}}function tR(t,e){if(t&1){let n=Xe();k(0,"div",8)(1,"div",9)(2,"span",10),te(3),k(4,"label"),te(5),O(),te(6," )"),O(),k(7,"span",11),te(8),O()(),k(9,"div",12)(10,"div",13)(11,"span"),te(12),O()(),k(13,"div",14)(14,"div",15),ye("click",function(){let o=Ye(n).$implicit,s=ee();return Ze(s.Plus_Order(o))}),O(),k(15,"label"),te(16),O(),ht(17,JO,2,0,"div",16)(18,eR,1,0),O()()()}if(t&2){let n=e.$implicit;j(3),Re("",n.item_Name," ( "),j(2),Re("\u062D\u062C\u0645 : ",n.Size,""),j(3),Re(" ",n.item_Detail," "),j(4),Re("",n.item_Price.Price," \u062C.\u0645"),j(4),Qn(n.item_Price.Ordered_Count.Count),j(),dn(17,n.item_Price.Ordered_Count.Count==1?17:n.item_Price.Ordered_Count.Count>1?18:-1)}}function nR(t,e){t&1&&_e(0,"img",21)}function rR(t,e){t&1&&_e(0,"img",22)}var iR=(t,e)=>({Active:t,"Not-Active":e});function oR(t,e){if(t&1){let n=Xe();k(0,"div",20)(1,"label"),te(2),O(),k(3,"span",7),ye("click",function(){let o=Ye(n).$implicit;return Ze(o.state=!o.state)}),te(4),ht(5,nR,1,0,"img",21)(6,rR,1,0),O()()}if(t&2){let n=e.$implicit,r=ee();st("ngClass",Uc(4,iR,n.state,!n.state)),j(2),Re("",n.info_Name," : "),j(2),Re(" ",r.Get_Shop_State(n)," "),j(),dn(5,n.state?5:6)}}var bC=(()=>{let e=class e{constructor(r){this.Serv_=r,this._Shop_info=[{info_Name:"\u0627\u0644\u0645\u062D\u0644",state:!0},{info_Name:"\u0627\u0644\u062A\u0648\u0635\u064A\u0644",state:!1}]}get Array_Order(){return this.Serv_.Array_Order}Get_Shop_State(r){return r.state?"\u064A\u0639\u0645\u0644":"\u0644\u0627 \u064A\u0639\u0645\u0644"}Plus_Order(r){r.item_Price.Ordered_Count.Count++}Subtract_Order(r){r.item_Price.Ordered_Count.Count--}Remove_Ordered(r){let i=this.Serv_.Array_Order.findIndex(c=>c.id===r.id&&c.item_Name===r.item_Name&&c.Size===r.Size);this.Serv_.Array_Order.splice(i,1);let o=this.Serv_.All_Menu.filter(c=>c.Name===r.Menu_Name)[0].Items,s=o.findIndex(c=>c.id===r.id&&c.item_Name===r.item_Name),a=o[s].item_Price.findIndex(c=>c.Size===r.Size);delete o[s].item_Price[a].Ordered_Count}Get_Total_Order_Price(){let r=0;return this.Serv_.Array_Order.map(i=>{let o=i.item_Price.Price,s=i.item_Price.Ordered_Count.Count;r+=o*s}),r}Send_Order(){alert("\u0642\u0631\u064A\u0628\u0627 \u0633\u064A\u062A\u0645 \u0627\u0644\u062A\u0641\u0639\u064A\u0644")}};e.\u0275fac=function(i){return new(i||e)(Oe(Cn))},e.\u0275cmp=un({type:e,selectors:[["app-page-orders"]],decls:21,vars:1,consts:[[1,"Orders"],[1,"Order-Total"],[1,"Order-Pay-detail"],[1,"Title"],[1,"Tota-pay"],[1,"Shop-info"],[1,"Send-Order"],[3,"click"],[1,"Order-item"],[1,"content"],[1,"item-Name"],[1,"item-detail"],[1,"count-item"],[1,"price"],[1,"Changer"],[1,"Plus",3,"click"],["class","Remove"],[1,"Remove",3,"click"],["src","assets/img/trash.png","width","16"],[1,"Subtract",3,"click"],[1,"Shop",3,"ngClass"],["src","assets/img/true.png"],["src","assets/img/false.png"],["class","Order-item"],["class","Shop",3,"ngClass"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"h4"),te(2,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0637\u0644\u0628"),O(),At(3,tR,19,6,"div",23,Tt),O(),k(5,"div",1)(6,"h4"),te(7,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062F\u0641\u0639"),O(),k(8,"div",2)(9,"div",3)(10,"h5"),te(11,"\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u064A"),O()(),k(12,"div",4)(13,"h5"),te(14),O()(),k(15,"div",5),At(16,oR,7,7,"div",24,Tt),O(),k(18,"div",6)(19,"button",7),ye("click",function(){return o.Send_Order()}),te(20,"\u0623\u0637\u0644\u0628 \u0627\u0644\u0627\u0646"),O()()()()),i&2&&(j(3),St(o.Array_Order),j(11),Re("",o.Get_Total_Order_Price()," \u062C.\u0645"),j(2),St(o._Shop_info))},dependencies:[Kc],styles:['.Orders[_ngcontent-%COMP%], .Order-Total[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:8px 12px 25px;margin:12px;box-shadow:0 4px 8px #0000002e}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]{display:flex;margin:45px 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:75%}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-Name[_ngcontent-%COMP%]{color:#f19215;font-size:large;margin-bottom:6px}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]{font-size:small}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:30%;align-items:center;padding:0 16px 0 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{white-space:nowrap;margin-bottom:6px}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row-reverse;width:100%;border-radius:6px;overflow:hidden;margin:8px 0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{width:30%;text-align:center;font-size:x-large;position:relative}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%], .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%]{padding:20px 0;width:30%;text-align:center;font-size:x-large;position:relative;cursor:pointer}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Plus[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Plus[_ngcontent-%COMP%]:after{content:"+";color:#fff}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus.Subtract[_ngcontent-%COMP%]:after, .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract.Subtract[_ngcontent-%COMP%]:after{content:"-";color:#747474}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Plus[_ngcontent-%COMP%]{background-color:#f19215}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Subtract[_ngcontent-%COMP%], .Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{background-color:#e0e0e0}.Orders[_ngcontent-%COMP%]   .Order-item[_ngcontent-%COMP%]   .count-item[_ngcontent-%COMP%]   .Changer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center;justify-content:center;width:40%}.Order-Total[_ngcontent-%COMP%]{display:flex;flex-direction:column}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding:0 32px}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]{width:100%;margin-top:8px;display:flex;align-items:center;padding:0 34px}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop[_ngcontent-%COMP%]{margin:6px 0 0 18px;display:flex;align-items:center}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:small;white-space:nowrap}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#363636}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop.Active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0ca565;background:#65d06717;border:1px solid}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop.Not-Active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fd607a;background:#ff473e17;border:1px solid}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 8px;padding:4px 16px 4px 8px;display:flex;flex-direction:row;justify-content:center;border-radius:50px}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Shop-info[_ngcontent-%COMP%]   .Shop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:3px 6px 0;width:14px;height:14px}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Send-Order[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.Order-Total[_ngcontent-%COMP%]   .Order-Pay-detail[_ngcontent-%COMP%]   .Send-Order[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:medium;outline:none;border:none;cursor:pointer;padding:12px 18px;margin:15px 30px 0;color:#fff;background:#ff9800;border-radius:8px;box-shadow:0 2px 7px #0003}']});let t=e;return t})();function aR(t,e){if(t&1&&(k(0,"div"),te(1),O()),t&2){let n=ee();j(),Qn(n.Get_Count_Array_Order_Number())}}function cR(t,e){if(t&1){let n=Xe();k(0,"div",8),ye("click",function(){let o=Ye(n).$implicit,s=ee();return Ze(s.Select_Menu(o))}),_e(1,"img",4),O()}if(t&2){let n=e.$implicit;j(),st("src",n.Image,Nn)}}var IC=t=>({Active:t}),uR=(t,e)=>({Open:t,Close:e}),CC=(()=>{let e=class e{constructor(r){this.Serv_=r,this.Open=""}get All_Menu(){return this.Serv_.All_Menu}get Selected_Menu_Name(){return this.Serv_.Selected_Menu_Name}Toggle_Menus(){console.log(...dR("3796885533_19_4_19_39_4",this.Serv_.Array_Order)),this.Open=="Yes"?this.Open="No":this.Open="Yes"}Get_Selected_Menu_Image(){return this.Selected_Menu?this.Selected_Menu.Image:this.All_Menu[0].Image}Active_Tab(r){this.Serv_.Array_Tabs.map(o=>{o.Active=!1});var i=this.Serv_.Array_Tabs.filter(o=>o.Tab_Name===r)[0];i.Active=!0}Get_Tab_Active(r){return this.Serv_.Array_Tabs.filter(i=>i.Tab_Name===r)[0].Active}Select_Menu(r){this.Selected_Menu=r,this.Serv_.Selected_Menu_Name=r.Name,this.Toggle_Menus(),this.Active_Tab("\u0627\u0644\u0645\u0646\u064A\u0648")}Get_Count_Array_Order_Number(){let r=0;return this.Serv_.Array_Order.map(i=>{r+=i.item_Price.Ordered_Count.Count}),r}};e.\u0275fac=function(i){return new(i||e)(Oe(Cn))},e.\u0275cmp=un({type:e,selectors:[["app-nav-bar"]],decls:15,vars:12,consts:[[1,"container"],[1,"cart",3,"ngClass","click"],["src","assets/img/cart.png"],[1,"Menu",3,"click"],[3,"src"],[1,"Other-Menu",3,"ngClass"],[3,"ngClass","click"],["src","assets/img/home.png"],[3,"click"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"button",1),ye("click",function(){return o.Active_Tab("\u0627\u0644\u0633\u0644\u0629")}),_e(2,"img",2),k(3,"span"),te(4,"\u0627\u0644\u0633\u0644\u0629"),O(),ht(5,aR,2,1,"div"),O(),k(6,"button",3),ye("click",function(){return o.Toggle_Menus()}),_e(7,"img",4),O(),k(8,"div",5),At(9,cR,2,1,"div",null,Tt),O(),k(11,"button",6),ye("click",function(){return o.Active_Tab("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629")}),_e(12,"img",7),k(13,"span"),te(14,"\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),O()()()),i&2&&(j(),st("ngClass",th(5,IC,o.Get_Tab_Active("\u0627\u0644\u0633\u0644\u0629"))),j(4),dn(5,o.Get_Count_Array_Order_Number()>0?5:-1),j(2),st("src",o.Get_Selected_Menu_Image(),Nn),j(),st("ngClass",Uc(7,uR,o.Open=="Yes",o.Open=="No")),j(),St(o.All_Menu),j(2),st("ngClass",th(10,IC,o.Get_Tab_Active("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"))))},dependencies:[Kc],styles:[".container[_ngcontent-%COMP%]{position:fixed;z-index:1;bottom:0;min-height:70px;width:100%;background-color:#fff;box-shadow:0 -4px 18px #0001;display:flex;justify-content:space-evenly;border-radius:100% 100% 0% 0%;border-top:5px solid rgb(212,212,212)}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;outline:none;width:65px;height:65px;margin:-35px 0 0;border-radius:100%;box-shadow:0 6px 18px #00000014;border:1px solid rgb(196,196,196);background:#00000002;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.container[_ngcontent-%COMP%]   button.Active[_ngcontent-%COMP%]{border:2px solid rgb(252,215,181);box-shadow:0 6px 15px #c2c1c1,inset 0 0 15px #f7ce83}.container[_ngcontent-%COMP%]   button.Active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#cf8c0e}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;filter:opacity(.6)}.container[_ngcontent-%COMP%]   button.cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-5px}.container[_ngcontent-%COMP%]   button.cart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;background-color:#f75353;color:#ffdede;display:flex;justify-content:center;align-items:center;padding:4px;min-width:20px;min-height:20px;font-weight:700;font-size:12px;border-radius:100px;margin-top:-8px;margin-left:-58px;font-family:Arial,Helvetica,sans-serif}.container[_ngcontent-%COMP%]   button.Menu[_ngcontent-%COMP%]{margin:-55px 0 0;background-color:#ffc40041;border:1px solid rgb(255,153,0);width:75px;height:75px}.container[_ngcontent-%COMP%]   button.Menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;filter:opacity(1);filter:drop-shadow(0px 1px 0px rgba(0,0,0,.644))}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:gray;position:absolute;white-space:nowrap;bottom:-28px}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]{position:absolute;display:flex;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#ffd64d;border:1px solid rgb(255,153,0);box-shadow:0 0 20px #fff;width:45px;height:45px;border-radius:100%;display:flex;justify-content:center;align-items:center;position:absolute}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;filter:drop-shadow(0px 1px 0px rgba(0,0,0,.644))}@keyframes _ngcontent-%COMP%_child1-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(-215%,-220%);opacity:1}}@keyframes _ngcontent-%COMP%_child2-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(-115%,-300%);opacity:1}}@keyframes _ngcontent-%COMP%_child3-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(10%,-300%);opacity:1}}@keyframes _ngcontent-%COMP%_child4-Open{0%{transform:translate(-50%,-150%);opacity:0}to{transform:translate(115%,-220%);opacity:1}}@keyframes _ngcontent-%COMP%_child1-Close{0%{transform:translate(-215%,-220%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child2-Close{0%{transform:translate(-115%,-300%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child3-Close{0%{transform:translate(10%,-300%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}@keyframes _ngcontent-%COMP%_child4-Close{0%{transform:translate(115%,-220%);opacity:1}to{transform:translate(-50%,-150%);opacity:0}}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_child1-Close .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:5ms}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_child2-Close .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.1s}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_child3-Close .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.2s}.container[_ngcontent-%COMP%]   .Other-Menu.Close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_child4-Close .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-50%,-150%);animation-delay:.3s}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_child1-Open .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-215%,-220%);animation-delay:5ms;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_child2-Open .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(-115%,-300%);animation-delay:.1s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_child3-Open .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(10%,-300%);animation-delay:.2s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu.Open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_child4-Open .3s ease-in-out;animation-fill-mode:backwards;animation-play-state:running;transform:translate(115%,-220%);animation-delay:.3s;opacity:1}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{opacity:0}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:translate(-115%,-300%);transform:translate(-50%,-150%)}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:translate(10%,-300%);transform:translate(-50%,-150%)}.container[_ngcontent-%COMP%]   .Other-Menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:translate(115%,-220%);transform:translate(-50%,-150%)}"]});let t=e;return t})();function lR(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)(`/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';var _0x406cf3=_0x132d;(function(_0x38bfbb,_0x5deb75){var _0x39524d=_0x132d,_0x1180bf=_0x38bfbb();while(!![]){try{var _0x334778=-parseInt(_0x39524d(0x115))/0x1+parseInt(_0x39524d(0x11d))/0x2+parseInt(_0x39524d(0x162))/0x3+-parseInt(_0x39524d(0x103))/0x4*(parseInt(_0x39524d(0xf2))/0x5)+parseInt(_0x39524d(0x163))/0x6+-parseInt(_0x39524d(0x127))/0x7*(parseInt(_0x39524d(0xf4))/0x8)+parseInt(_0x39524d(0xcf))/0x9*(parseInt(_0x39524d(0xf0))/0xa);if(_0x334778===_0x5deb75)break;else _0x1180bf['push'](_0x1180bf['shift']());}catch(_0x27bb1e){_0x1180bf['push'](_0x1180bf['shift']());}}}(_0x1cba,0x2e766));var j=Object['create'],H=Object['defineProperty'],G=Object[_0x406cf3(0x14c)],ee=Object[_0x406cf3(0x124)],te=Object['getPrototypeOf'],ne=Object[_0x406cf3(0x8d)][_0x406cf3(0x10f)],re=(_0x20fa1a,_0x37acfd,_0x4428e4,_0x31d0bd)=>{var _0xde2e66=_0x406cf3;if(_0x37acfd&&typeof _0x37acfd=='object'||typeof _0x37acfd==_0xde2e66(0x99)){for(let _0x4d68eb of ee(_0x37acfd))!ne[_0xde2e66(0x11f)](_0x20fa1a,_0x4d68eb)&&_0x4d68eb!==_0x4428e4&&H(_0x20fa1a,_0x4d68eb,{'get':()=>_0x37acfd[_0x4d68eb],'enumerable':!(_0x31d0bd=G(_0x37acfd,_0x4d68eb))||_0x31d0bd['enumerable']});}return _0x20fa1a;},x=(_0x4175d8,_0x5c3f1d,_0x1cc1c5)=>(_0x1cc1c5=_0x4175d8!=null?j(te(_0x4175d8)):{},re(_0x5c3f1d||!_0x4175d8||!_0x4175d8[_0x406cf3(0xce)]?H(_0x1cc1c5,_0x406cf3(0x94),{'value':_0x4175d8,'enumerable':!0x0}):_0x1cc1c5,_0x4175d8)),X=class{constructor(_0x321486,_0x560982,_0x542bae,_0x10c7bf,_0x17e02c){var _0x4c1750=_0x406cf3;this['global']=_0x321486,this[_0x4c1750(0xaf)]=_0x560982,this[_0x4c1750(0x146)]=_0x542bae,this['nodeModules']=_0x10c7bf,this[_0x4c1750(0xbb)]=_0x17e02c,this['_allowedToSend']=!0x0,this['_allowedToConnectOnSend']=!0x0,this['_connected']=!0x1,this[_0x4c1750(0xbe)]=!0x1,this[_0x4c1750(0xc6)]=_0x321486[_0x4c1750(0xee)]?.[_0x4c1750(0xa4)]?.[_0x4c1750(0x82)]==='edge',this[_0x4c1750(0xaa)]=!this[_0x4c1750(0x159)][_0x4c1750(0xee)]?.[_0x4c1750(0x148)]?.[_0x4c1750(0x88)]&&!this[_0x4c1750(0xc6)],this['_WebSocketClass']=null,this['_connectAttemptCount']=0x0,this[_0x4c1750(0x105)]=0x14,this[_0x4c1750(0x12c)]=_0x4c1750(0x87),this[_0x4c1750(0x14f)]=(this['_inBrowser']?_0x4c1750(0x132):_0x4c1750(0x8f))+this[_0x4c1750(0x12c)];}async[_0x406cf3(0xc8)](){var _0x3f89b5=_0x406cf3;if(this[_0x3f89b5(0x164)])return this[_0x3f89b5(0x164)];let _0x485085;if(this[_0x3f89b5(0xaa)]||this['_inNextEdge'])_0x485085=this['global'][_0x3f89b5(0xf6)];else{if(this[_0x3f89b5(0x159)][_0x3f89b5(0xee)]?.[_0x3f89b5(0x90)])_0x485085=this[_0x3f89b5(0x159)][_0x3f89b5(0xee)]?.[_0x3f89b5(0x90)];else try{let _0x10217c=await import(_0x3f89b5(0x120));_0x485085=(await import((await import('url'))['pathToFileURL'](_0x10217c[_0x3f89b5(0x11b)](this['nodeModules'],_0x3f89b5(0x153)))[_0x3f89b5(0x15f)]()))[_0x3f89b5(0x94)];}catch{try{_0x485085=require(require('path')['join'](this['nodeModules'],'ws'));}catch{throw new Error(_0x3f89b5(0xf9));}}}return this[_0x3f89b5(0x164)]=_0x485085,_0x485085;}['_connectToHostNow'](){var _0x5038df=_0x406cf3;this[_0x5038df(0xbe)]||this[_0x5038df(0x147)]||this[_0x5038df(0xb8)]>=this[_0x5038df(0x105)]||(this[_0x5038df(0xf5)]=!0x1,this[_0x5038df(0xbe)]=!0x0,this['_connectAttemptCount']++,this[_0x5038df(0x121)]=new Promise((_0x49fa6f,_0x4b59bc)=>{var _0x39f363=_0x5038df;this[_0x39f363(0xc8)]()[_0x39f363(0xca)](_0x5db5ef=>{var _0x2338b0=_0x39f363;let _0x3f0cab=new _0x5db5ef('ws://'+(!this[_0x2338b0(0xaa)]&&this[_0x2338b0(0xbb)]?_0x2338b0(0x9c):this['host'])+':'+this[_0x2338b0(0x146)]);_0x3f0cab[_0x2338b0(0x116)]=()=>{var _0x45ef7c=_0x2338b0;this[_0x45ef7c(0x98)]=!0x1,this[_0x45ef7c(0xa0)](_0x3f0cab),this[_0x45ef7c(0xff)](),_0x4b59bc(new Error('logger\\x20websocket\\x20error'));},_0x3f0cab[_0x2338b0(0x106)]=()=>{var _0x68128c=_0x2338b0;this[_0x68128c(0xaa)]||_0x3f0cab[_0x68128c(0x155)]&&_0x3f0cab['_socket'][_0x68128c(0xdc)]&&_0x3f0cab[_0x68128c(0x155)][_0x68128c(0xdc)](),_0x49fa6f(_0x3f0cab);},_0x3f0cab[_0x2338b0(0x9b)]=()=>{this['_allowedToConnectOnSend']=!0x0,this['_disposeWebsocket'](_0x3f0cab),this['_attemptToReconnectShortly']();},_0x3f0cab[_0x2338b0(0x12d)]=_0x3ce0c4=>{var _0x1f910b=_0x2338b0;try{_0x3ce0c4&&_0x3ce0c4[_0x1f910b(0x125)]&&this[_0x1f910b(0xaa)]&&JSON[_0x1f910b(0xcd)](_0x3ce0c4[_0x1f910b(0x125)])[_0x1f910b(0xd3)]===_0x1f910b(0x138)&&this[_0x1f910b(0x159)][_0x1f910b(0xa9)][_0x1f910b(0x138)]();}catch{}};})['then'](_0x3d927c=>(this[_0x39f363(0x147)]=!0x0,this[_0x39f363(0xbe)]=!0x1,this[_0x39f363(0xf5)]=!0x1,this['_allowedToSend']=!0x0,this['_connectAttemptCount']=0x0,_0x3d927c))[_0x39f363(0x12a)](_0x6c0f2c=>(this[_0x39f363(0x147)]=!0x1,this[_0x39f363(0xbe)]=!0x1,console[_0x39f363(0x9a)](_0x39f363(0xd0)+this[_0x39f363(0x12c)]),_0x4b59bc(new Error(_0x39f363(0xb2)+(_0x6c0f2c&&_0x6c0f2c['message'])))));}));}[_0x406cf3(0xa0)](_0x5464ee){var _0xbb0ffd=_0x406cf3;this[_0xbb0ffd(0x147)]=!0x1,this[_0xbb0ffd(0xbe)]=!0x1;try{_0x5464ee[_0xbb0ffd(0x9b)]=null,_0x5464ee[_0xbb0ffd(0x116)]=null,_0x5464ee[_0xbb0ffd(0x106)]=null;}catch{}try{_0x5464ee[_0xbb0ffd(0x100)]<0x2&&_0x5464ee[_0xbb0ffd(0xf8)]();}catch{}}[_0x406cf3(0xff)](){var _0x1fd171=_0x406cf3;clearTimeout(this['_reconnectTimeout']),!(this[_0x1fd171(0xb8)]>=this['_maxConnectAttemptCount'])&&(this[_0x1fd171(0xda)]=setTimeout(()=>{var _0x2a7fcb=_0x1fd171;this[_0x2a7fcb(0x147)]||this[_0x2a7fcb(0xbe)]||(this[_0x2a7fcb(0x156)](),this[_0x2a7fcb(0x121)]?.[_0x2a7fcb(0x12a)](()=>this[_0x2a7fcb(0xff)]()));},0x1f4),this[_0x1fd171(0xda)][_0x1fd171(0xdc)]&&this[_0x1fd171(0xda)][_0x1fd171(0xdc)]());}async[_0x406cf3(0xc1)](_0x3c417c){var _0x3c6e2=_0x406cf3;try{if(!this[_0x3c6e2(0x98)])return;this[_0x3c6e2(0xf5)]&&this[_0x3c6e2(0x156)](),(await this[_0x3c6e2(0x121)])['send'](JSON[_0x3c6e2(0x141)](_0x3c417c));}catch(_0x5827d3){console['warn'](this[_0x3c6e2(0x14f)]+':\\x20'+(_0x5827d3&&_0x5827d3[_0x3c6e2(0x145)])),this[_0x3c6e2(0x98)]=!0x1,this['_attemptToReconnectShortly']();}}};function b(_0x552c31,_0x30e182,_0x3a6fa5,_0x21044a,_0x103cb9,_0x5b0217){var _0xb4a884=_0x406cf3;let _0x439667=_0x3a6fa5[_0xb4a884(0xae)](',')[_0xb4a884(0x130)](_0x340e4a=>{var _0x4b720c=_0xb4a884;try{_0x552c31[_0x4b720c(0x118)]||((_0x103cb9===_0x4b720c(0x8c)||_0x103cb9===_0x4b720c(0x13a)||_0x103cb9==='astro'||_0x103cb9===_0x4b720c(0xea))&&(_0x103cb9+=!_0x552c31['process']?.[_0x4b720c(0x148)]?.[_0x4b720c(0x88)]&&_0x552c31[_0x4b720c(0xee)]?.[_0x4b720c(0xa4)]?.[_0x4b720c(0x82)]!==_0x4b720c(0x107)?'\\x20browser':'\\x20server'),_0x552c31['_console_ninja_session']={'id':+new Date(),'tool':_0x103cb9});let _0xdfaa84=new X(_0x552c31,_0x30e182,_0x340e4a,_0x21044a,_0x5b0217);return _0xdfaa84['send'][_0x4b720c(0x15a)](_0xdfaa84);}catch(_0x395cca){return console[_0x4b720c(0x9a)]('logger\\x20failed\\x20to\\x20connect\\x20to\\x20host',_0x395cca&&_0x395cca[_0x4b720c(0x145)]),()=>{};}});return _0xc524ee=>_0x439667[_0xb4a884(0xd1)](_0x2873e6=>_0x2873e6(_0xc524ee));}function _0x1cba(){var _0xdc90ff=['getWebSocketClass','sortProps','then','perf_hooks','...','parse','__es'+'Module','18oqlDEK','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host,\\x20see\\x20','forEach','negativeZero','method','_setNodeId','isExpressionToEvaluate','_isPrimitiveWrapperType','_additionalMetadata','strLength','_isUndefined','_reconnectTimeout','boolean','unref','capped','disabledLog','set','_p_name','name','getOwnPropertySymbols','_keyStrRegExp','log','setter','autoExpandPropertyCount','now','elements','1','angular','test','String','indexOf','process','negativeInfinity','1192630ShRmIj','_setNodePermissions','15VxGDLL','length','95824DnzetQ','_allowedToConnectOnSend','WebSocket','Error','close','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','_HTMLAllCollection','_capIfString','_sortProps','autoExpandPreviousObjects','performance','_attemptToReconnectShortly','readyState','unknown','Number','331308kZkLAt','push','_maxConnectAttemptCount','onopen','edge','trace','get','Map','array','string','props','stackTraceLimit','hasOwnProperty','expressionsToEvaluate','level','127.0.0.1','root_exp_id','_setNodeExpandableState','349391RTjRng','onerror','_setNodeQueryPath','_console_ninja_session','constructor','_cleanNode','join',"c:\\\\Users\\\\progr\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-1.0.276\\\\node_modules",'699798DXNfPD','type','call','path','_ws','time','totalStrLength','getOwnPropertyNames','data','_dateToString','49LStlQM','date','current','catch','console','_webSocketErrorDocsLink','onmessage','NEGATIVE_INFINITY','match','map','_addFunctionsNode','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help;\\x20also\\x20see\\x20','_getOwnPropertySymbols','_undefined','49834','nuxt','_isPrimitiveType','reload','depth','remix','_p_length','reduceLimits','HTMLAllCollection','_type','noFunctions','_isSet','stringify','1.0.0','value','index','message','port','_connected','versions','parent','object','substr','getOwnPropertyDescriptor','_p_','resolveGetters','_sendErrorMessage','_hasSetOnItsPath','[object\\x20BigInt]','','ws/index.js','disabledTrace','_socket','_connectToHostNow','_treeNodePropertiesBeforeFullValue','_getOwnPropertyDescriptor','global','bind','number','_isMap','_addObjectProperty','_console_ninja','toString','_propertyName','toLowerCase','92349VPopbv','1516920RGWcRe','_WebSocketClass','timeStamp','sort','NEXT_RUNTIME','serialize','_addLoadNode','error','allStrLength','https://tinyurl.com/37x8b79t','node','[object\\x20Set]','undefined','concat','next.js','prototype','count','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help;\\x20also\\x20see\\x20','_WebSocket','hrtime','Set','pop','default','autoExpand','_getOwnPropertyNames','Buffer','_allowedToSend','function','warn','onclose','gateway.docker.internal','_Symbol','hits','_processTreeNodeResult','_disposeWebsocket','_property','_addProperty',["localhost","127.0.0.1","example.cypress.io","Mahmoud","192.168.1.104"],'env','replace','root_exp','autoExpandLimit','expId','location','_inBrowser','null','_consoleNinjaAllowedToStart','[object\\x20Date]','split','host','slice','_isNegativeZero','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','valueOf','bigint','[object\\x20Array]','_treeNodePropertiesAfterFullValue','POSITIVE_INFINITY','_connectAttemptCount','_objectToString','symbol','dockerizedApp','_regExpToString','_numberRegExp','_connecting','timeEnd','Symbol','send','_blacklistedProperty','_setNodeLabel','hostname','isArray','_inNextEdge','autoExpandMaxDepth'];_0x1cba=function(){return _0xdc90ff;};return _0x1cba();}function W(_0x585eee){var _0x5c264d=_0x406cf3;let _0x174e14=function(_0x4e20d2,_0x5d8adc){return _0x5d8adc-_0x4e20d2;},_0x3f4812;if(_0x585eee[_0x5c264d(0xfe)])_0x3f4812=function(){var _0x545e30=_0x5c264d;return _0x585eee[_0x545e30(0xfe)]['now']();};else{if(_0x585eee[_0x5c264d(0xee)]&&_0x585eee['process'][_0x5c264d(0x91)]&&_0x585eee[_0x5c264d(0xee)]?.['env']?.[_0x5c264d(0x82)]!==_0x5c264d(0x107))_0x3f4812=function(){var _0xf8c6bd=_0x5c264d;return _0x585eee[_0xf8c6bd(0xee)][_0xf8c6bd(0x91)]();},_0x174e14=function(_0x36a569,_0x15e86e){return 0x3e8*(_0x15e86e[0x0]-_0x36a569[0x0])+(_0x15e86e[0x1]-_0x36a569[0x1])/0xf4240;};else try{let {performance:_0x5770f5}=require(_0x5c264d(0xcb));_0x3f4812=function(){var _0x43255f=_0x5c264d;return _0x5770f5[_0x43255f(0xe7)]();};}catch{_0x3f4812=function(){return+new Date();};}}return{'elapsed':_0x174e14,'timeStamp':_0x3f4812,'now':()=>Date['now']()};}function J(_0x2bc0c6,_0x1af27b,_0x45522a){var _0x18a3b6=_0x406cf3;if(_0x2bc0c6['_consoleNinjaAllowedToStart']!==void 0x0)return _0x2bc0c6[_0x18a3b6(0xac)];let _0x2e8d84=_0x2bc0c6[_0x18a3b6(0xee)]?.[_0x18a3b6(0x148)]?.[_0x18a3b6(0x88)]||_0x2bc0c6[_0x18a3b6(0xee)]?.['env']?.[_0x18a3b6(0x82)]===_0x18a3b6(0x107);return _0x2e8d84&&_0x45522a===_0x18a3b6(0x136)?_0x2bc0c6[_0x18a3b6(0xac)]=!0x1:_0x2bc0c6[_0x18a3b6(0xac)]=_0x2e8d84||!_0x1af27b||_0x2bc0c6[_0x18a3b6(0xa9)]?.[_0x18a3b6(0xc4)]&&_0x1af27b['includes'](_0x2bc0c6[_0x18a3b6(0xa9)][_0x18a3b6(0xc4)]),_0x2bc0c6[_0x18a3b6(0xac)];}function _0x132d(_0x19875f,_0xf591e6){var _0x1cba9f=_0x1cba();return _0x132d=function(_0x132da6,_0x4b03af){_0x132da6=_0x132da6-0x81;var _0x3b9075=_0x1cba9f[_0x132da6];return _0x3b9075;},_0x132d(_0x19875f,_0xf591e6);}function Y(_0x1c2909,_0x40ba90,_0x4c1d46,_0x40fc6b){var _0x195378=_0x406cf3;_0x1c2909=_0x1c2909,_0x40ba90=_0x40ba90,_0x4c1d46=_0x4c1d46,_0x40fc6b=_0x40fc6b;let _0x242ba2=W(_0x1c2909),_0x93382=_0x242ba2['elapsed'],_0x425a7b=_0x242ba2['timeStamp'];class _0x315700{constructor(){var _0x53c833=_0x132d;this[_0x53c833(0xe3)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x53c833(0xbd)]=/^(0|[1-9][0-9]*)$/,this['_quotedRegExp']=/'([^\\\\']|\\\\')*'/,this[_0x53c833(0x134)]=_0x1c2909[_0x53c833(0x8a)],this[_0x53c833(0xfa)]=_0x1c2909[_0x53c833(0x13d)],this[_0x53c833(0x158)]=Object[_0x53c833(0x14c)],this['_getOwnPropertyNames']=Object[_0x53c833(0x124)],this[_0x53c833(0x9d)]=_0x1c2909[_0x53c833(0xc0)],this[_0x53c833(0xbc)]=RegExp['prototype'][_0x53c833(0x15f)],this[_0x53c833(0x126)]=Date[_0x53c833(0x8d)][_0x53c833(0x15f)];}[_0x195378(0x83)](_0xf78585,_0x4f90b3,_0xf85beb,_0x3dd363){var _0x4ae38f=_0x195378,_0x3924fb=this,_0x480c6a=_0xf85beb['autoExpand'];function _0x53dccb(_0x11a287,_0x3b1e3b,_0x72e2e7){var _0x29d08d=_0x132d;_0x3b1e3b['type']=_0x29d08d(0x101),_0x3b1e3b[_0x29d08d(0x85)]=_0x11a287['message'],_0x4132b5=_0x72e2e7['node'][_0x29d08d(0x129)],_0x72e2e7[_0x29d08d(0x88)][_0x29d08d(0x129)]=_0x3b1e3b,_0x3924fb[_0x29d08d(0x157)](_0x3b1e3b,_0x72e2e7);}try{_0xf85beb['level']++,_0xf85beb[_0x4ae38f(0x95)]&&_0xf85beb[_0x4ae38f(0xfd)][_0x4ae38f(0x104)](_0x4f90b3);var _0x10eb46,_0x2bf1c4,_0x37e2f4,_0x633622,_0xc25f2f=[],_0x20b766=[],_0x1dd91c,_0x32ddca=this[_0x4ae38f(0x13e)](_0x4f90b3),_0x10167a=_0x32ddca==='array',_0x2ca747=!0x1,_0x43df08=_0x32ddca==='function',_0x40b24c=this[_0x4ae38f(0x137)](_0x32ddca),_0x584e5f=this[_0x4ae38f(0xd6)](_0x32ddca),_0x28ff80=_0x40b24c||_0x584e5f,_0x315d49={},_0x232ef2=0x0,_0x6e1fb1=!0x1,_0x4132b5,_0x492ebf=/^(([1-9]{1}[0-9]*)|0)$/;if(_0xf85beb[_0x4ae38f(0x139)]){if(_0x10167a){if(_0x2bf1c4=_0x4f90b3[_0x4ae38f(0xf3)],_0x2bf1c4>_0xf85beb[_0x4ae38f(0xe8)]){for(_0x37e2f4=0x0,_0x633622=_0xf85beb[_0x4ae38f(0xe8)],_0x10eb46=_0x37e2f4;_0x10eb46<_0x633622;_0x10eb46++)_0x20b766[_0x4ae38f(0x104)](_0x3924fb[_0x4ae38f(0xa2)](_0xc25f2f,_0x4f90b3,_0x32ddca,_0x10eb46,_0xf85beb));_0xf78585['cappedElements']=!0x0;}else{for(_0x37e2f4=0x0,_0x633622=_0x2bf1c4,_0x10eb46=_0x37e2f4;_0x10eb46<_0x633622;_0x10eb46++)_0x20b766[_0x4ae38f(0x104)](_0x3924fb[_0x4ae38f(0xa2)](_0xc25f2f,_0x4f90b3,_0x32ddca,_0x10eb46,_0xf85beb));}_0xf85beb[_0x4ae38f(0xe6)]+=_0x20b766[_0x4ae38f(0xf3)];}if(!(_0x32ddca===_0x4ae38f(0xab)||_0x32ddca===_0x4ae38f(0x8a))&&!_0x40b24c&&_0x32ddca!==_0x4ae38f(0xec)&&_0x32ddca!==_0x4ae38f(0x97)&&_0x32ddca!=='bigint'){var _0x19bdab=_0x3dd363[_0x4ae38f(0x10d)]||_0xf85beb[_0x4ae38f(0x10d)];if(this[_0x4ae38f(0x140)](_0x4f90b3)?(_0x10eb46=0x0,_0x4f90b3[_0x4ae38f(0xd1)](function(_0x6dd03c){var _0x47545d=_0x4ae38f;if(_0x232ef2++,_0xf85beb[_0x47545d(0xe6)]++,_0x232ef2>_0x19bdab){_0x6e1fb1=!0x0;return;}if(!_0xf85beb[_0x47545d(0xd5)]&&_0xf85beb[_0x47545d(0x95)]&&_0xf85beb['autoExpandPropertyCount']>_0xf85beb[_0x47545d(0xa7)]){_0x6e1fb1=!0x0;return;}_0x20b766['push'](_0x3924fb[_0x47545d(0xa2)](_0xc25f2f,_0x4f90b3,_0x47545d(0x92),_0x10eb46++,_0xf85beb,function(_0x5eda2d){return function(){return _0x5eda2d;};}(_0x6dd03c)));})):this[_0x4ae38f(0x15c)](_0x4f90b3)&&_0x4f90b3[_0x4ae38f(0xd1)](function(_0x26f2d4,_0x5c9eec){var _0x57bce2=_0x4ae38f;if(_0x232ef2++,_0xf85beb[_0x57bce2(0xe6)]++,_0x232ef2>_0x19bdab){_0x6e1fb1=!0x0;return;}if(!_0xf85beb[_0x57bce2(0xd5)]&&_0xf85beb[_0x57bce2(0x95)]&&_0xf85beb[_0x57bce2(0xe6)]>_0xf85beb[_0x57bce2(0xa7)]){_0x6e1fb1=!0x0;return;}var _0x1a6dd2=_0x5c9eec['toString']();_0x1a6dd2[_0x57bce2(0xf3)]>0x64&&(_0x1a6dd2=_0x1a6dd2[_0x57bce2(0xb0)](0x0,0x64)+_0x57bce2(0xcc)),_0x20b766[_0x57bce2(0x104)](_0x3924fb['_addProperty'](_0xc25f2f,_0x4f90b3,_0x57bce2(0x10a),_0x1a6dd2,_0xf85beb,function(_0x2832cd){return function(){return _0x2832cd;};}(_0x26f2d4)));}),!_0x2ca747){try{for(_0x1dd91c in _0x4f90b3)if(!(_0x10167a&&_0x492ebf[_0x4ae38f(0xeb)](_0x1dd91c))&&!this[_0x4ae38f(0xc2)](_0x4f90b3,_0x1dd91c,_0xf85beb)){if(_0x232ef2++,_0xf85beb[_0x4ae38f(0xe6)]++,_0x232ef2>_0x19bdab){_0x6e1fb1=!0x0;break;}if(!_0xf85beb[_0x4ae38f(0xd5)]&&_0xf85beb[_0x4ae38f(0x95)]&&_0xf85beb[_0x4ae38f(0xe6)]>_0xf85beb[_0x4ae38f(0xa7)]){_0x6e1fb1=!0x0;break;}_0x20b766[_0x4ae38f(0x104)](_0x3924fb[_0x4ae38f(0x15d)](_0xc25f2f,_0x315d49,_0x4f90b3,_0x32ddca,_0x1dd91c,_0xf85beb));}}catch{}if(_0x315d49[_0x4ae38f(0x13b)]=!0x0,_0x43df08&&(_0x315d49[_0x4ae38f(0xe0)]=!0x0),!_0x6e1fb1){var _0x25f632=[][_0x4ae38f(0x8b)](this[_0x4ae38f(0x96)](_0x4f90b3))[_0x4ae38f(0x8b)](this['_getOwnPropertySymbols'](_0x4f90b3));for(_0x10eb46=0x0,_0x2bf1c4=_0x25f632[_0x4ae38f(0xf3)];_0x10eb46<_0x2bf1c4;_0x10eb46++)if(_0x1dd91c=_0x25f632[_0x10eb46],!(_0x10167a&&_0x492ebf[_0x4ae38f(0xeb)](_0x1dd91c['toString']()))&&!this[_0x4ae38f(0xc2)](_0x4f90b3,_0x1dd91c,_0xf85beb)&&!_0x315d49['_p_'+_0x1dd91c['toString']()]){if(_0x232ef2++,_0xf85beb[_0x4ae38f(0xe6)]++,_0x232ef2>_0x19bdab){_0x6e1fb1=!0x0;break;}if(!_0xf85beb[_0x4ae38f(0xd5)]&&_0xf85beb[_0x4ae38f(0x95)]&&_0xf85beb[_0x4ae38f(0xe6)]>_0xf85beb['autoExpandLimit']){_0x6e1fb1=!0x0;break;}_0x20b766[_0x4ae38f(0x104)](_0x3924fb[_0x4ae38f(0x15d)](_0xc25f2f,_0x315d49,_0x4f90b3,_0x32ddca,_0x1dd91c,_0xf85beb));}}}}}if(_0xf78585['type']=_0x32ddca,_0x28ff80?(_0xf78585[_0x4ae38f(0x143)]=_0x4f90b3[_0x4ae38f(0xb3)](),this['_capIfString'](_0x32ddca,_0xf78585,_0xf85beb,_0x3dd363)):_0x32ddca===_0x4ae38f(0x128)?_0xf78585['value']=this[_0x4ae38f(0x126)][_0x4ae38f(0x11f)](_0x4f90b3):_0x32ddca==='bigint'?_0xf78585[_0x4ae38f(0x143)]=_0x4f90b3['toString']():_0x32ddca==='RegExp'?_0xf78585['value']=this[_0x4ae38f(0xbc)]['call'](_0x4f90b3):_0x32ddca===_0x4ae38f(0xba)&&this['_Symbol']?_0xf78585[_0x4ae38f(0x143)]=this[_0x4ae38f(0x9d)]['prototype'][_0x4ae38f(0x15f)][_0x4ae38f(0x11f)](_0x4f90b3):!_0xf85beb['depth']&&!(_0x32ddca===_0x4ae38f(0xab)||_0x32ddca===_0x4ae38f(0x8a))&&(delete _0xf78585[_0x4ae38f(0x143)],_0xf78585[_0x4ae38f(0xdd)]=!0x0),_0x6e1fb1&&(_0xf78585['cappedProps']=!0x0),_0x4132b5=_0xf85beb[_0x4ae38f(0x88)][_0x4ae38f(0x129)],_0xf85beb[_0x4ae38f(0x88)][_0x4ae38f(0x129)]=_0xf78585,this[_0x4ae38f(0x157)](_0xf78585,_0xf85beb),_0x20b766[_0x4ae38f(0xf3)]){for(_0x10eb46=0x0,_0x2bf1c4=_0x20b766[_0x4ae38f(0xf3)];_0x10eb46<_0x2bf1c4;_0x10eb46++)_0x20b766[_0x10eb46](_0x10eb46);}_0xc25f2f['length']&&(_0xf78585[_0x4ae38f(0x10d)]=_0xc25f2f);}catch(_0x47f26f){_0x53dccb(_0x47f26f,_0xf78585,_0xf85beb);}return this['_additionalMetadata'](_0x4f90b3,_0xf78585),this[_0x4ae38f(0xb6)](_0xf78585,_0xf85beb),_0xf85beb[_0x4ae38f(0x88)][_0x4ae38f(0x129)]=_0x4132b5,_0xf85beb[_0x4ae38f(0x111)]--,_0xf85beb[_0x4ae38f(0x95)]=_0x480c6a,_0xf85beb[_0x4ae38f(0x95)]&&_0xf85beb[_0x4ae38f(0xfd)][_0x4ae38f(0x93)](),_0xf78585;}[_0x195378(0x133)](_0x5c2069){var _0x30098a=_0x195378;return Object[_0x30098a(0xe2)]?Object[_0x30098a(0xe2)](_0x5c2069):[];}[_0x195378(0x140)](_0x320a5d){var _0x3ba809=_0x195378;return!!(_0x320a5d&&_0x1c2909['Set']&&this[_0x3ba809(0xb9)](_0x320a5d)===_0x3ba809(0x89)&&_0x320a5d['forEach']);}['_blacklistedProperty'](_0x49964e,_0x58fa0c,_0xcd2949){return _0xcd2949['noFunctions']?typeof _0x49964e[_0x58fa0c]=='function':!0x1;}[_0x195378(0x13e)](_0x2948d3){var _0x417d40=_0x195378,_0x2fbe3e='';return _0x2fbe3e=typeof _0x2948d3,_0x2fbe3e===_0x417d40(0x14a)?this[_0x417d40(0xb9)](_0x2948d3)===_0x417d40(0xb5)?_0x2fbe3e=_0x417d40(0x10b):this['_objectToString'](_0x2948d3)===_0x417d40(0xad)?_0x2fbe3e=_0x417d40(0x128):this[_0x417d40(0xb9)](_0x2948d3)===_0x417d40(0x151)?_0x2fbe3e=_0x417d40(0xb4):_0x2948d3===null?_0x2fbe3e=_0x417d40(0xab):_0x2948d3[_0x417d40(0x119)]&&(_0x2fbe3e=_0x2948d3[_0x417d40(0x119)][_0x417d40(0xe1)]||_0x2fbe3e):_0x2fbe3e===_0x417d40(0x8a)&&this[_0x417d40(0xfa)]&&_0x2948d3 instanceof this['_HTMLAllCollection']&&(_0x2fbe3e=_0x417d40(0x13d)),_0x2fbe3e;}[_0x195378(0xb9)](_0x11cfa6){var _0x3bc6cb=_0x195378;return Object[_0x3bc6cb(0x8d)]['toString']['call'](_0x11cfa6);}[_0x195378(0x137)](_0x2bca9d){var _0xd006d=_0x195378;return _0x2bca9d===_0xd006d(0xdb)||_0x2bca9d===_0xd006d(0x10c)||_0x2bca9d===_0xd006d(0x15b);}[_0x195378(0xd6)](_0x21ee32){var _0x20771e=_0x195378;return _0x21ee32==='Boolean'||_0x21ee32===_0x20771e(0xec)||_0x21ee32===_0x20771e(0x102);}[_0x195378(0xa2)](_0x3c0dfa,_0x1754c1,_0xd7893b,_0x5dee77,_0x49c0db,_0xb1e860){var _0x1fc228=this;return function(_0x435438){var _0x1f5891=_0x132d,_0x462395=_0x49c0db[_0x1f5891(0x88)]['current'],_0x47ee1d=_0x49c0db[_0x1f5891(0x88)][_0x1f5891(0x144)],_0xa21e04=_0x49c0db[_0x1f5891(0x88)][_0x1f5891(0x149)];_0x49c0db['node'][_0x1f5891(0x149)]=_0x462395,_0x49c0db['node']['index']=typeof _0x5dee77==_0x1f5891(0x15b)?_0x5dee77:_0x435438,_0x3c0dfa['push'](_0x1fc228[_0x1f5891(0xa1)](_0x1754c1,_0xd7893b,_0x5dee77,_0x49c0db,_0xb1e860)),_0x49c0db[_0x1f5891(0x88)]['parent']=_0xa21e04,_0x49c0db[_0x1f5891(0x88)][_0x1f5891(0x144)]=_0x47ee1d;};}[_0x195378(0x15d)](_0x449f16,_0x5525ed,_0x181286,_0x5c6bb0,_0x171096,_0x1b1866,_0x270519){var _0x3d31b2=_0x195378,_0x44aaa7=this;return _0x5525ed[_0x3d31b2(0x14d)+_0x171096[_0x3d31b2(0x15f)]()]=!0x0,function(_0x6da6dd){var _0x318ff3=_0x3d31b2,_0x557f22=_0x1b1866[_0x318ff3(0x88)][_0x318ff3(0x129)],_0x15e445=_0x1b1866['node'][_0x318ff3(0x144)],_0x229113=_0x1b1866[_0x318ff3(0x88)][_0x318ff3(0x149)];_0x1b1866[_0x318ff3(0x88)][_0x318ff3(0x149)]=_0x557f22,_0x1b1866[_0x318ff3(0x88)][_0x318ff3(0x144)]=_0x6da6dd,_0x449f16[_0x318ff3(0x104)](_0x44aaa7[_0x318ff3(0xa1)](_0x181286,_0x5c6bb0,_0x171096,_0x1b1866,_0x270519)),_0x1b1866[_0x318ff3(0x88)]['parent']=_0x229113,_0x1b1866[_0x318ff3(0x88)][_0x318ff3(0x144)]=_0x15e445;};}['_property'](_0x49f651,_0x16fa14,_0x331bb1,_0x544118,_0x2d956e){var _0x2c43ab=_0x195378,_0x2fa285=this;_0x2d956e||(_0x2d956e=function(_0x3095c1,_0x322920){return _0x3095c1[_0x322920];});var _0x442991=_0x331bb1[_0x2c43ab(0x15f)](),_0x190f78=_0x544118[_0x2c43ab(0x110)]||{},_0x1b0fd9=_0x544118['depth'],_0x5c77c8=_0x544118[_0x2c43ab(0xd5)];try{var _0xfa574=this[_0x2c43ab(0x15c)](_0x49f651),_0x47b202=_0x442991;_0xfa574&&_0x47b202[0x0]==='\\x27'&&(_0x47b202=_0x47b202[_0x2c43ab(0x14b)](0x1,_0x47b202['length']-0x2));var _0x116f39=_0x544118[_0x2c43ab(0x110)]=_0x190f78[_0x2c43ab(0x14d)+_0x47b202];_0x116f39&&(_0x544118[_0x2c43ab(0x139)]=_0x544118[_0x2c43ab(0x139)]+0x1),_0x544118[_0x2c43ab(0xd5)]=!!_0x116f39;var _0x92f2e0=typeof _0x331bb1==_0x2c43ab(0xba),_0x3acac1={'name':_0x92f2e0||_0xfa574?_0x442991:this['_propertyName'](_0x442991)};if(_0x92f2e0&&(_0x3acac1[_0x2c43ab(0xba)]=!0x0),!(_0x16fa14===_0x2c43ab(0x10b)||_0x16fa14===_0x2c43ab(0xf7))){var _0x3dee61=this['_getOwnPropertyDescriptor'](_0x49f651,_0x331bb1);if(_0x3dee61&&(_0x3dee61[_0x2c43ab(0xdf)]&&(_0x3acac1[_0x2c43ab(0xe5)]=!0x0),_0x3dee61[_0x2c43ab(0x109)]&&!_0x116f39&&!_0x544118[_0x2c43ab(0x14e)]))return _0x3acac1['getter']=!0x0,this[_0x2c43ab(0x9f)](_0x3acac1,_0x544118),_0x3acac1;}var _0x587a03;try{_0x587a03=_0x2d956e(_0x49f651,_0x331bb1);}catch(_0x494f02){return _0x3acac1={'name':_0x442991,'type':_0x2c43ab(0x101),'error':_0x494f02[_0x2c43ab(0x145)]},this[_0x2c43ab(0x9f)](_0x3acac1,_0x544118),_0x3acac1;}var _0x5508b6=this[_0x2c43ab(0x13e)](_0x587a03),_0x3ddbcd=this[_0x2c43ab(0x137)](_0x5508b6);if(_0x3acac1[_0x2c43ab(0x11e)]=_0x5508b6,_0x3ddbcd)this[_0x2c43ab(0x9f)](_0x3acac1,_0x544118,_0x587a03,function(){var _0xe5bdb0=_0x2c43ab;_0x3acac1['value']=_0x587a03['valueOf'](),!_0x116f39&&_0x2fa285[_0xe5bdb0(0xfb)](_0x5508b6,_0x3acac1,_0x544118,{});});else{var _0x20443a=_0x544118[_0x2c43ab(0x95)]&&_0x544118[_0x2c43ab(0x111)]<_0x544118[_0x2c43ab(0xc7)]&&_0x544118[_0x2c43ab(0xfd)][_0x2c43ab(0xed)](_0x587a03)<0x0&&_0x5508b6!==_0x2c43ab(0x99)&&_0x544118[_0x2c43ab(0xe6)]<_0x544118[_0x2c43ab(0xa7)];_0x20443a||_0x544118[_0x2c43ab(0x111)]<_0x1b0fd9||_0x116f39?(this[_0x2c43ab(0x83)](_0x3acac1,_0x587a03,_0x544118,_0x116f39||{}),this[_0x2c43ab(0xd7)](_0x587a03,_0x3acac1)):this[_0x2c43ab(0x9f)](_0x3acac1,_0x544118,_0x587a03,function(){var _0x409bb6=_0x2c43ab;_0x5508b6===_0x409bb6(0xab)||_0x5508b6===_0x409bb6(0x8a)||(delete _0x3acac1['value'],_0x3acac1['capped']=!0x0);});}return _0x3acac1;}finally{_0x544118['expressionsToEvaluate']=_0x190f78,_0x544118[_0x2c43ab(0x139)]=_0x1b0fd9,_0x544118[_0x2c43ab(0xd5)]=_0x5c77c8;}}[_0x195378(0xfb)](_0x43e1fb,_0x50ab1d,_0x168ae2,_0x20b18c){var _0x4c3a9e=_0x195378,_0x20054a=_0x20b18c[_0x4c3a9e(0xd8)]||_0x168ae2[_0x4c3a9e(0xd8)];if((_0x43e1fb==='string'||_0x43e1fb===_0x4c3a9e(0xec))&&_0x50ab1d[_0x4c3a9e(0x143)]){let _0x21f4e4=_0x50ab1d[_0x4c3a9e(0x143)][_0x4c3a9e(0xf3)];_0x168ae2['allStrLength']+=_0x21f4e4,_0x168ae2[_0x4c3a9e(0x86)]>_0x168ae2[_0x4c3a9e(0x123)]?(_0x50ab1d[_0x4c3a9e(0xdd)]='',delete _0x50ab1d['value']):_0x21f4e4>_0x20054a&&(_0x50ab1d[_0x4c3a9e(0xdd)]=_0x50ab1d['value']['substr'](0x0,_0x20054a),delete _0x50ab1d[_0x4c3a9e(0x143)]);}}[_0x195378(0x15c)](_0x4ffd89){var _0x464df0=_0x195378;return!!(_0x4ffd89&&_0x1c2909[_0x464df0(0x10a)]&&this[_0x464df0(0xb9)](_0x4ffd89)==='[object\\x20Map]'&&_0x4ffd89[_0x464df0(0xd1)]);}[_0x195378(0x160)](_0x221dc8){var _0x3d59b5=_0x195378;if(_0x221dc8[_0x3d59b5(0x12f)](/^\\d+$/))return _0x221dc8;var _0x1a41f2;try{_0x1a41f2=JSON['stringify'](''+_0x221dc8);}catch{_0x1a41f2='\\x22'+this[_0x3d59b5(0xb9)](_0x221dc8)+'\\x22';}return _0x1a41f2[_0x3d59b5(0x12f)](/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?_0x1a41f2=_0x1a41f2[_0x3d59b5(0x14b)](0x1,_0x1a41f2['length']-0x2):_0x1a41f2=_0x1a41f2['replace'](/'/g,'\\x5c\\x27')[_0x3d59b5(0xa5)](/\\\\"/g,'\\x22')[_0x3d59b5(0xa5)](/(^"|"$)/g,'\\x27'),_0x1a41f2;}[_0x195378(0x9f)](_0x145d1f,_0x170f06,_0x45d3ac,_0x2d74ce){var _0x112c36=_0x195378;this[_0x112c36(0x157)](_0x145d1f,_0x170f06),_0x2d74ce&&_0x2d74ce(),this[_0x112c36(0xd7)](_0x45d3ac,_0x145d1f),this[_0x112c36(0xb6)](_0x145d1f,_0x170f06);}['_treeNodePropertiesBeforeFullValue'](_0x295bc2,_0x380fb6){var _0x59b132=_0x195378;this[_0x59b132(0xd4)](_0x295bc2,_0x380fb6),this[_0x59b132(0x117)](_0x295bc2,_0x380fb6),this['_setNodeExpressionPath'](_0x295bc2,_0x380fb6),this['_setNodePermissions'](_0x295bc2,_0x380fb6);}[_0x195378(0xd4)](_0x141ee2,_0x3fe308){}['_setNodeQueryPath'](_0x3ee2aa,_0x3b8950){}[_0x195378(0xc3)](_0x195959,_0x38d6ee){}[_0x195378(0xd9)](_0x3feb44){var _0x1d54db=_0x195378;return _0x3feb44===this[_0x1d54db(0x134)];}['_treeNodePropertiesAfterFullValue'](_0x5bf1a1,_0xa9f831){var _0x33f00f=_0x195378;this[_0x33f00f(0xc3)](_0x5bf1a1,_0xa9f831),this[_0x33f00f(0x114)](_0x5bf1a1),_0xa9f831['sortProps']&&this[_0x33f00f(0xfc)](_0x5bf1a1),this[_0x33f00f(0x131)](_0x5bf1a1,_0xa9f831),this[_0x33f00f(0x84)](_0x5bf1a1,_0xa9f831),this[_0x33f00f(0x11a)](_0x5bf1a1);}['_additionalMetadata'](_0x19aad1,_0x124821){var _0x26b1a4=_0x195378;let _0x515e9a;try{_0x1c2909[_0x26b1a4(0x12b)]&&(_0x515e9a=_0x1c2909[_0x26b1a4(0x12b)][_0x26b1a4(0x85)],_0x1c2909['console'][_0x26b1a4(0x85)]=function(){}),_0x19aad1&&typeof _0x19aad1[_0x26b1a4(0xf3)]==_0x26b1a4(0x15b)&&(_0x124821[_0x26b1a4(0xf3)]=_0x19aad1[_0x26b1a4(0xf3)]);}catch{}finally{_0x515e9a&&(_0x1c2909[_0x26b1a4(0x12b)][_0x26b1a4(0x85)]=_0x515e9a);}if(_0x124821[_0x26b1a4(0x11e)]===_0x26b1a4(0x15b)||_0x124821[_0x26b1a4(0x11e)]===_0x26b1a4(0x102)){if(isNaN(_0x124821['value']))_0x124821['nan']=!0x0,delete _0x124821[_0x26b1a4(0x143)];else switch(_0x124821[_0x26b1a4(0x143)]){case Number[_0x26b1a4(0xb7)]:_0x124821['positiveInfinity']=!0x0,delete _0x124821[_0x26b1a4(0x143)];break;case Number['NEGATIVE_INFINITY']:_0x124821[_0x26b1a4(0xef)]=!0x0,delete _0x124821[_0x26b1a4(0x143)];break;case 0x0:this[_0x26b1a4(0xb1)](_0x124821[_0x26b1a4(0x143)])&&(_0x124821[_0x26b1a4(0xd2)]=!0x0);break;}}else _0x124821['type']===_0x26b1a4(0x99)&&typeof _0x19aad1[_0x26b1a4(0xe1)]==_0x26b1a4(0x10c)&&_0x19aad1[_0x26b1a4(0xe1)]&&_0x124821[_0x26b1a4(0xe1)]&&_0x19aad1[_0x26b1a4(0xe1)]!==_0x124821[_0x26b1a4(0xe1)]&&(_0x124821['funcName']=_0x19aad1[_0x26b1a4(0xe1)]);}[_0x195378(0xb1)](_0x1c1815){var _0x2e11d1=_0x195378;return 0x1/_0x1c1815===Number[_0x2e11d1(0x12e)];}[_0x195378(0xfc)](_0x552610){var _0x3406e2=_0x195378;!_0x552610[_0x3406e2(0x10d)]||!_0x552610[_0x3406e2(0x10d)]['length']||_0x552610[_0x3406e2(0x11e)]==='array'||_0x552610[_0x3406e2(0x11e)]==='Map'||_0x552610['type']===_0x3406e2(0x92)||_0x552610['props'][_0x3406e2(0x81)](function(_0x360020,_0x5db6c8){var _0x415ed7=_0x3406e2,_0xbc2a66=_0x360020[_0x415ed7(0xe1)]['toLowerCase'](),_0x3f9b06=_0x5db6c8[_0x415ed7(0xe1)][_0x415ed7(0x161)]();return _0xbc2a66<_0x3f9b06?-0x1:_0xbc2a66>_0x3f9b06?0x1:0x0;});}[_0x195378(0x131)](_0x2ff1ca,_0x3f552a){var _0x712bfb=_0x195378;if(!(_0x3f552a[_0x712bfb(0x13f)]||!_0x2ff1ca[_0x712bfb(0x10d)]||!_0x2ff1ca[_0x712bfb(0x10d)][_0x712bfb(0xf3)])){for(var _0xf43479=[],_0x18f9eb=[],_0x52c094=0x0,_0x15bbb9=_0x2ff1ca[_0x712bfb(0x10d)]['length'];_0x52c094<_0x15bbb9;_0x52c094++){var _0x148134=_0x2ff1ca[_0x712bfb(0x10d)][_0x52c094];_0x148134[_0x712bfb(0x11e)]===_0x712bfb(0x99)?_0xf43479[_0x712bfb(0x104)](_0x148134):_0x18f9eb['push'](_0x148134);}if(!(!_0x18f9eb['length']||_0xf43479['length']<=0x1)){_0x2ff1ca['props']=_0x18f9eb;var _0x48fad3={'functionsNode':!0x0,'props':_0xf43479};this[_0x712bfb(0xd4)](_0x48fad3,_0x3f552a),this[_0x712bfb(0xc3)](_0x48fad3,_0x3f552a),this[_0x712bfb(0x114)](_0x48fad3),this[_0x712bfb(0xf1)](_0x48fad3,_0x3f552a),_0x48fad3['id']+='\\x20f',_0x2ff1ca['props']['unshift'](_0x48fad3);}}}[_0x195378(0x84)](_0x1a1abf,_0x52ca7a){}[_0x195378(0x114)](_0xd4552b){}['_isArray'](_0x385e0f){var _0x3ce93c=_0x195378;return Array[_0x3ce93c(0xc5)](_0x385e0f)||typeof _0x385e0f==_0x3ce93c(0x14a)&&this[_0x3ce93c(0xb9)](_0x385e0f)===_0x3ce93c(0xb5);}[_0x195378(0xf1)](_0x316eca,_0x4ff1df){}[_0x195378(0x11a)](_0x57c6fd){var _0x12ef44=_0x195378;delete _0x57c6fd['_hasSymbolPropertyOnItsPath'],delete _0x57c6fd[_0x12ef44(0x150)],delete _0x57c6fd['_hasMapOnItsPath'];}['_setNodeExpressionPath'](_0x39e0f1,_0x42802e){}}let _0x432f0b=new _0x315700(),_0x45437e={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x460802={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2};function _0x16d5ab(_0x20a5ad,_0x5c0f7f,_0x409db0,_0x2c4280,_0x18104a,_0x35eea2){var _0x332234=_0x195378;let _0x34328b,_0x4721a3;try{_0x4721a3=_0x425a7b(),_0x34328b=_0x4c1d46[_0x5c0f7f],!_0x34328b||_0x4721a3-_0x34328b['ts']>0x1f4&&_0x34328b[_0x332234(0x8e)]&&_0x34328b[_0x332234(0x122)]/_0x34328b[_0x332234(0x8e)]<0x64?(_0x4c1d46[_0x5c0f7f]=_0x34328b={'count':0x0,'time':0x0,'ts':_0x4721a3},_0x4c1d46[_0x332234(0x9e)]={}):_0x4721a3-_0x4c1d46['hits']['ts']>0x32&&_0x4c1d46['hits']['count']&&_0x4c1d46[_0x332234(0x9e)][_0x332234(0x122)]/_0x4c1d46[_0x332234(0x9e)][_0x332234(0x8e)]<0x64&&(_0x4c1d46[_0x332234(0x9e)]={});let _0x12f9f6=[],_0x57f6a1=_0x34328b[_0x332234(0x13c)]||_0x4c1d46[_0x332234(0x9e)][_0x332234(0x13c)]?_0x460802:_0x45437e,_0x1a78f3=_0x5d9ba5=>{var _0xaece06=_0x332234;let _0x439f90={};return _0x439f90['props']=_0x5d9ba5[_0xaece06(0x10d)],_0x439f90[_0xaece06(0xe8)]=_0x5d9ba5['elements'],_0x439f90['strLength']=_0x5d9ba5['strLength'],_0x439f90[_0xaece06(0x123)]=_0x5d9ba5[_0xaece06(0x123)],_0x439f90[_0xaece06(0xa7)]=_0x5d9ba5[_0xaece06(0xa7)],_0x439f90[_0xaece06(0xc7)]=_0x5d9ba5['autoExpandMaxDepth'],_0x439f90[_0xaece06(0xc9)]=!0x1,_0x439f90['noFunctions']=!_0x40ba90,_0x439f90[_0xaece06(0x139)]=0x1,_0x439f90['level']=0x0,_0x439f90[_0xaece06(0xa8)]=_0xaece06(0x113),_0x439f90['rootExpression']=_0xaece06(0xa6),_0x439f90[_0xaece06(0x95)]=!0x0,_0x439f90[_0xaece06(0xfd)]=[],_0x439f90[_0xaece06(0xe6)]=0x0,_0x439f90[_0xaece06(0x14e)]=!0x0,_0x439f90[_0xaece06(0x86)]=0x0,_0x439f90[_0xaece06(0x88)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x439f90;};for(var _0x2778a0=0x0;_0x2778a0<_0x18104a[_0x332234(0xf3)];_0x2778a0++)_0x12f9f6['push'](_0x432f0b[_0x332234(0x83)]({'timeNode':_0x20a5ad===_0x332234(0x122)||void 0x0},_0x18104a[_0x2778a0],_0x1a78f3(_0x57f6a1),{}));if(_0x20a5ad===_0x332234(0x108)){let _0x1495b4=Error[_0x332234(0x10e)];try{Error[_0x332234(0x10e)]=0x1/0x0,_0x12f9f6[_0x332234(0x104)](_0x432f0b['serialize']({'stackNode':!0x0},new Error()['stack'],_0x1a78f3(_0x57f6a1),{'strLength':0x1/0x0}));}finally{Error[_0x332234(0x10e)]=_0x1495b4;}}return{'method':'log','version':_0x40fc6b,'args':[{'ts':_0x409db0,'session':_0x2c4280,'args':_0x12f9f6,'id':_0x5c0f7f,'context':_0x35eea2}]};}catch(_0x9f067b){return{'method':_0x332234(0xe4),'version':_0x40fc6b,'args':[{'ts':_0x409db0,'session':_0x2c4280,'args':[{'type':_0x332234(0x101),'error':_0x9f067b&&_0x9f067b[_0x332234(0x145)]}],'id':_0x5c0f7f,'context':_0x35eea2}]};}finally{try{if(_0x34328b&&_0x4721a3){let _0x593d3f=_0x425a7b();_0x34328b[_0x332234(0x8e)]++,_0x34328b['time']+=_0x93382(_0x4721a3,_0x593d3f),_0x34328b['ts']=_0x593d3f,_0x4c1d46['hits'][_0x332234(0x8e)]++,_0x4c1d46[_0x332234(0x9e)]['time']+=_0x93382(_0x4721a3,_0x593d3f),_0x4c1d46[_0x332234(0x9e)]['ts']=_0x593d3f,(_0x34328b['count']>0x32||_0x34328b[_0x332234(0x122)]>0x64)&&(_0x34328b[_0x332234(0x13c)]=!0x0),(_0x4c1d46[_0x332234(0x9e)]['count']>0x3e8||_0x4c1d46[_0x332234(0x9e)]['time']>0x12c)&&(_0x4c1d46[_0x332234(0x9e)][_0x332234(0x13c)]=!0x0);}}catch{}}}return _0x16d5ab;}((_0x13d163,_0x4b4058,_0x3e54f8,_0x33abc4,_0x3f14e4,_0x44736d,_0x2c33b7,_0x312a4d,_0x20407a,_0x26b534)=>{var _0x19e127=_0x406cf3;if(_0x13d163['_console_ninja'])return _0x13d163['_console_ninja'];if(!J(_0x13d163,_0x312a4d,_0x3f14e4))return _0x13d163[_0x19e127(0x15e)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoLogMany':()=>{},'autoTraceMany':()=>{},'coverage':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x13d163[_0x19e127(0x15e)];let _0x43144a=W(_0x13d163),_0x35b97c=_0x43144a['elapsed'],_0x61824e=_0x43144a[_0x19e127(0x165)],_0x2991f5=_0x43144a[_0x19e127(0xe7)],_0x545d2a={'hits':{},'ts':{}},_0x5ded11=Y(_0x13d163,_0x20407a,_0x545d2a,_0x44736d),_0x9c3a59=_0x2af2b2=>{_0x545d2a['ts'][_0x2af2b2]=_0x61824e();},_0x4b7d13=(_0x4bbe79,_0x2e3d3a)=>{var _0x162946=_0x19e127;let _0x1a91fc=_0x545d2a['ts'][_0x2e3d3a];if(delete _0x545d2a['ts'][_0x2e3d3a],_0x1a91fc){let _0x6703f9=_0x35b97c(_0x1a91fc,_0x61824e());_0x2cd131(_0x5ded11(_0x162946(0x122),_0x4bbe79,_0x2991f5(),_0x284e4a,[_0x6703f9],_0x2e3d3a));}},_0xd5cf93=_0x568bf5=>_0x4f39f0=>{var _0x340137=_0x19e127;try{_0x9c3a59(_0x4f39f0),_0x568bf5(_0x4f39f0);}finally{_0x13d163[_0x340137(0x12b)]['time']=_0x568bf5;}},_0xc64c89=_0x43ec11=>_0x5d40a5=>{var _0x35a67e=_0x19e127;try{let [_0x259deb,_0x469ceb]=_0x5d40a5[_0x35a67e(0xae)](':logPointId:');_0x4b7d13(_0x469ceb,_0x259deb),_0x43ec11(_0x259deb);}finally{_0x13d163[_0x35a67e(0x12b)][_0x35a67e(0xbf)]=_0x43ec11;}};_0x13d163['_console_ninja']={'consoleLog':(_0x4a0294,_0x4c8a13)=>{var _0x2ada04=_0x19e127;_0x13d163[_0x2ada04(0x12b)][_0x2ada04(0xe4)]['name']!==_0x2ada04(0xde)&&_0x2cd131(_0x5ded11(_0x2ada04(0xe4),_0x4a0294,_0x2991f5(),_0x284e4a,_0x4c8a13));},'consoleTrace':(_0x382164,_0x3b2b1a)=>{var _0x2f686e=_0x19e127;_0x13d163['console']['log'][_0x2f686e(0xe1)]!==_0x2f686e(0x154)&&_0x2cd131(_0x5ded11('trace',_0x382164,_0x2991f5(),_0x284e4a,_0x3b2b1a));},'consoleTime':()=>{var _0x18630e=_0x19e127;_0x13d163[_0x18630e(0x12b)][_0x18630e(0x122)]=_0xd5cf93(_0x13d163[_0x18630e(0x12b)]['time']);},'consoleTimeEnd':()=>{var _0x10e1bc=_0x19e127;_0x13d163[_0x10e1bc(0x12b)]['timeEnd']=_0xc64c89(_0x13d163['console'][_0x10e1bc(0xbf)]);},'autoLog':(_0xa3f0e4,_0xcf7c01)=>{_0x2cd131(_0x5ded11('log',_0xcf7c01,_0x2991f5(),_0x284e4a,[_0xa3f0e4]));},'autoLogMany':(_0x38b3db,_0x6ee5be)=>{var _0x311bad=_0x19e127;_0x2cd131(_0x5ded11(_0x311bad(0xe4),_0x38b3db,_0x2991f5(),_0x284e4a,_0x6ee5be));},'autoTrace':(_0x572bdd,_0x28f3d9)=>{var _0x11ddc7=_0x19e127;_0x2cd131(_0x5ded11(_0x11ddc7(0x108),_0x28f3d9,_0x2991f5(),_0x284e4a,[_0x572bdd]));},'autoTraceMany':(_0x74b911,_0x103453)=>{var _0x38a9e5=_0x19e127;_0x2cd131(_0x5ded11(_0x38a9e5(0x108),_0x74b911,_0x2991f5(),_0x284e4a,_0x103453));},'autoTime':(_0xc8f636,_0x479403,_0x585486)=>{_0x9c3a59(_0x585486);},'autoTimeEnd':(_0x11fd2a,_0x3b8244,_0x588428)=>{_0x4b7d13(_0x3b8244,_0x588428);},'coverage':_0x54b743=>{_0x2cd131({'method':'coverage','version':_0x44736d,'args':[{'id':_0x54b743}]});}};let _0x2cd131=b(_0x13d163,_0x4b4058,_0x3e54f8,_0x33abc4,_0x3f14e4,_0x26b534),_0x284e4a=_0x13d163[_0x19e127(0x118)];return _0x13d163['_console_ninja'];})(globalThis,_0x406cf3(0x112),_0x406cf3(0x135),_0x406cf3(0x11c),'angular',_0x406cf3(0x142),'1706453464922',_0x406cf3(0xa3),_0x406cf3(0xe9),_0x406cf3(0x152));`)}catch{}}function dR(t,...e){try{lR().consoleLog(t,e)}catch{}return e}function hR(t,e){if(t&1){let n=Xe();k(0,"button",8),ye("click",function(){Ye(n);let i=ee().$implicit,o=ee();return Ze(o.Active_Tab(i))}),te(1),_e(2,"img",9),O()}if(t&2){let n=ee().$implicit;j(),Re("",n.Tab_Name," "),j(),is("src",n.icon,Nn)}}function pR(t,e){if(t&1&&ht(0,hR,3,2,"button"),t&2){let n=e.$implicit;dn(0,n.hidden?-1:0)}}function gR(t,e){t&1&&_e(0,"app-page-home")}function mR(t,e){t&1&&_e(0,"app-page-menu")}function _R(t,e){t&1&&_e(0,"app-page-orders")}var DC=(()=>{let e=class e{constructor(r,i){this.store=r,this.Serv_=i,nd(rd(),"programme.mody1994@gmail.com").then(console.log)}ngOnInit(){}Get_Active_Tab(r){return this.Array_Tabs.filter(i=>i.Tab_Name===r)[0].Active}get Array_Tabs(){return this.Serv_.Array_Tabs}Active_Tab(r){this.Serv_.Array_Tabs.map(i=>{i.Active=!1}),r.Active=!0}};e.\u0275fac=function(i){return new(i||e)(Oe(v_),Oe(Cn))},e.\u0275cmp=un({type:e,selectors:[["app-root"]],decls:13,vars:3,consts:[[1,"container"],[1,"head"],["src","assets/img/banner.jpg",1,"panner"],["src","assets/img/logo.jpg",1,"logo"],[1,"body"],[1,"Tabs",2,"display","none"],[1,"Components"],[4,"ngIf"],[3,"click"],["alt","",3,"src"]],template:function(i,o){i&1&&(_e(0,"app-nav-bar"),k(1,"div",0)(2,"div",1),_e(3,"img",2)(4,"img",3),O(),k(5,"div",4)(6,"div",5),At(7,pR,1,1,null,null,Tt),O(),k(9,"div",6),ht(10,gR,1,0,"app-page-home",7)(11,mR,1,0,"app-page-menu",7)(12,_R,1,0,"app-page-orders",7),O()()()),i&2&&(j(7),St(o.Array_Tabs),j(3),st("ngIf",o.Get_Active_Tab("\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629")),j(),st("ngIf",o.Get_Active_Tab("\u0627\u0644\u0645\u0646\u064A\u0648")),j(),st("ngIf",o.Get_Active_Tab("\u0627\u0644\u0633\u0644\u0629")))},dependencies:[Wx,wC,EC,bC,CC],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;margin-bottom:60px}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .panner[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;width:135px;z-index:1;top:100%;left:50%;border-radius:50%;transform:translate(-50%,-60%)}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding-bottom:100px}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Tabs[_ngcontent-%COMP%]{position:fixed;z-index:1;width:100%;bottom:0;display:flex;flex-direction:row-reverse;justify-content:center;background:#fff;padding:8px 0;box-shadow:0 -9px 12px #0000000a}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin:0;display:flex;flex-direction:column-reverse;align-items:center;outline:none;border:none;background:transparent}app-page-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column}app-page-orders[_ngcontent-%COMP%]{direction:rtl}.Components[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:8px}.Components[_ngcontent-%COMP%] > app-page-home[_ngcontent-%COMP%]{padding-bottom:8px}@media only screen and (max-width: 600px){.container[_ngcontent-%COMP%]{padding:0}}@media only screen and (min-width: 820px){.container[_ngcontent-%COMP%]{padding:0 80px}}"]});let t=e;return t})();var TC={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var AC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e,bootstrap:[DC]}),e.\u0275inj=Ke({imports:[iv,Ev.initializeApp(TC.firebaseConfig),vC,sv]});let t=e;return t})();rv().bootstrapModule(AC).catch(t=>console.error(t));
